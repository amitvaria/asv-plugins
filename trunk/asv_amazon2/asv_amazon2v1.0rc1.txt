# asv_amazon2 v1.0rc1
# Add Amazon items to your TXP article
# Amit Varia
# http://www.amitvaria.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjQ6Im5hbWUiO3M6MTE6ImFzdl9hbWF6b24yIjtzOjc6InZlcnNpb24iO3M6Njoi
MS4wcmMxIjtzOjY6ImF1dGhvciI7czoxMDoiQW1pdCBWYXJpYSI7czoxMDoiYXV0aG9yX3Vy
aSI7czoyNToiaHR0cDovL3d3dy5hbWl0dmFyaWEuY29tLyI7czoxMToiZGVzY3JpcHRpb24i
O3M6MzY6IkFkZCBBbWF6b24gaXRlbXMgdG8geW91ciBUWFAgYXJ0aWNsZSI7czo0OiJ0eXBl
IjtpOjE7czo0OiJoZWxwIjtzOjIzMzg6Igk8aDE+YXN2X2FtYXpvbjI8L2gxPgoKCTxoMj52
ZXJzaW9uIDEuMHJjMTwvaDI+CgoJPGgzPldoYXQmIzgyMTc7cyBuZXc/PC9oMz4KCgk8cD5B
IGxvbmcgdGltZSBhZ28sIEkgY3JlYXRlZCBhIHBsdWdpbiBjYWxsZWQgYXN2X2FtYXpvbiwg
d2hpY2ggbGV0IHlvdSBkaXNwbGF5IHByb2R1Y3RzIGZyb20gQW1hem9uIG9uIHlvdXIgc2l0
ZS4gSXQgd29ya2VkLCBidXQgaW5zZXJ0aW5nIHRoZSBwcm9kdWN0IHJlcXVpcmVkIHlvdSB0
byBnbyB0byBBbWF6b24sIGNvcHkgdGhlIDxzcGFuIGNsYXNzPSJjYXBzIj5BU0lOPC9zcGFu
PiBudW1iZXIsIGFuZCBwYXN0ZSBpbnRvIHRoZSBUZXh0UGF0dGVybi4gV2hhdCBhIGhhc3Ns
ZSEgV2VsbCBJIGZpbmFsbHkgZ290IGFyb3VuZCB0byB3cml0aW5nIHRoZSBuZXh0IHZlcnNp
b24gb2YgYXN2X2FtYXpvbi4gSSYjODIxNzt2ZSBjYWxsZWQgaXQgYXN2X2FtYXpvbjIgc2lu
Y2UgaXQgaXMgY29tcGxldGVseSB3cml0dGVuIGFuZCB3b3JrcyBpbiBhIHdob2xlIG5ldyB3
YXkuPC9wPgoKCTxoMz5Ib3cgZG9lcyBpdCB3b3JrPzwvaDM+CgoJPHA+U2ltcGxlICYjODIx
MTsgd2hlbiB3cml0aW5nIGFuIGFydGljbGUganVzdCBjbGljayBvbiB0aGUgJiM4MjIwO0Ft
YXpvbiYjODIyMTsgbGluayBpbiB0aGUgdG9wIHJpZ2h0IGNvbHVtbi4gWW91IGNhbiBzZWFy
Y2ggYW5kIGFkZCBwcm9kdWN0cyB0byB5b3VyIHBvc3QgYnkgY2xpY2tpbmcgdGhlICYjODIy
MDthZGQmIzgyMjE7IGJ1dHRvbiBuZXh0IHRvIGVhY2ggaXRlbS48L3A+CgoJPGgzPkNyZWF0
aW5nIGEgZm9ybTwvaDM+CgoJPHA+V2l0aCB2ZXJzaW9uIDEuMCwgeW91IHdpbGwgaGF2ZSB0
byBoYXZlIGZvcm1zIHRvIGdlbmVyYXRlIHRoZSBsYXlvdXQgb2YgdGhlIHByb2R1Y3Qgb24g
eW91ciBwYWdlLiBXaGVuIGNyZWF0aW5nIGEgbmV3ICYjODIxNjttaXNjJiM4MjE3OyBmb3Jt
IHlvdSBjYW4gdXNlIHRoZSBmb2xsb3dpbmcgdmFsdWVzOjwvcD4KCgk8cD5hc3ZfdXJsPGJy
IC8+CmFzdl9zSW1hZ2VVcmw8YnIgLz4KYXN2X21JbWFnZVVybDxiciAvPgphc3ZfbEltYWdl
VXJsPGJyIC8+CmFzdl9hc2luPGJyIC8+CmFzdl90aXRsZTwvcD4KCgk8cD5PUiB5b3UgY2Fu
IHVzZSB0aGUgZGVwZWNyYXRlZCBsaXRlcmFscyBmcm9tIHRoZSBvcmlnaW5hbCB2ZXJzaW9u
PC9wPgoKCTxwPmFzdl9EZXRhaWxQYWdlVVJMPGJyIC8+CmFzdl9TbWFsbEltYWdlVVJMPGJy
IC8+CmFzdl9NZWRpdW1JbWFnZVVSTDxiciAvPgphc3ZfTGFyZ2VJbWFnZVVSTDxiciAvPgph
c3ZfVGl0bGU8L3A+CgoJPHA+YXN2X2FtYXpvbjIgd2lsbCBqdXN0IHJlcGxhY2UgdGhlc2Ug
bGl0ZXJhbHMgd2l0aCB0aGVpciBwcm9kdWN0IGNvdW50ZXJwYXJ0LCBzbzo8L3A+Cgo8cHJl
Pjxjb2RlPiYjNjA7YSBocmVmPSYjMzQ7YXN2X2FtYXpvbjJfdXJsJiMzNDsmIzYyOyYjNjA7
aW1nIHNyYz0mIzM0O2Fzdl9hbWF6b24yX3NJbWFnZVVybCYjMzQ7IC8mIzYyOyYjNjA7YnIg
LyYjNjI7YXN2X2FtYXpvbjJfdGl0bGUmIzYwOy9hJiM2MjsKPC9jb2RlPjwvcHJlPgoKCTxw
PnJldHVybnM6PC9wPgoKPHByZT48Y29kZT4mIzYwO2EgaHJlZj0mIzM0O2h0dHA6Ly93d3cu
YW1hem9uLmNvbS9ncC9yZWRpcmVjdC5odG1sJTNGQVNJTj0xNTkwNTk4MzI2JTI2dGFnPXdz
JTI2bGNvZGU9eG0yJTI2Y0lEPTIwMjUlMjZjY21JRD0xNjU5NTMlMjZsb2NhdGlvbj0vby9B
U0lOLzE1OTA1OTgzMjYlMjUzRlN1YnNjcmlwdGlvbklkPTBZOEYxWVYxTjJZU0dKMU1DMjAy
JiMzNDsmIzYyOyYjNjA7aW1nIHNyYz0mIzM0O2h0dHA6Ly9lYzEuaW1hZ2VzLWFtYXpvbi5j
b20vaW1hZ2VzL0kvMDF5YXExZXRqS0wuanBnJiMzNDsgLyYjNjI7JiM2MDticiAvJiM2MjtU
ZXh0cGF0dGVybiBTb2x1dGlvbnM6IFBIUC1CYXNlZCBDb250ZW50IE1hbmFnZW1lbnQgTWFk
ZSBFYXN5IChTb2x1dGlvbnMpJiM2MDsvYSYjNjI7CndoaWNoIHdpbGwgZGlzcGxheSBsaWtl
IHRoaXM6CjwvY29kZT48L3ByZT4KCgk8cD48YSBocmVmPSJodHRwOi8vd3d3LmFtYXpvbi5j
b20vZ3AvcmVkaXJlY3QuaHRtbCUzRkFTSU49MTU5MDU5ODMyNiUyNnRhZz13cyUyNmxjb2Rl
PXhtMiUyNmNJRD0yMDI1JTI2Y2NtSUQ9MTY1OTUzJTI2bG9jYXRpb249L28vQVNJTi8xNTkw
NTk4MzI2JTI1M0ZTdWJzY3JpcHRpb25JZD0wWThGMVlWMU4yWVNHSjFNQzIwMiI+PGltZyBz
cmM9Imh0dHA6Ly9lYzEuaW1hZ2VzLWFtYXpvbi5jb20vaW1hZ2VzL0kvMDF5YXExZXRqS0wu
anBnIiAvPjxiciAvPgpUZXh0cGF0dGVybiBTb2x1dGlvbnM6IFBIUC1CYXNlZCBDb250ZW50
IE1hbmFnZW1lbnQgTWFkZSBFYXN5IChTb2x1dGlvbnMpPC9hPjwvcD4iO3M6NDoiY29kZSI7
czoxOTIyODoiLy8gYXN2X2FtYXpvbjIKLy8gRGVzaWduZWQgYXJvdW5kIHRoZSBuZWVkIHRv
IGluY2x1ZGUgaXRlbXMgZnJvbSBBbWF6b24gaW4geW91ciB3ZWJzaXRlCi8vLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoK
aWYoJ2FkbWluJyA9PSBAdHhwaW50ZXJmYWNlKQp7CglhZGRfcHJpdnMoJ2Fzdl9hbWF6b24y
JywnMSwyLDMsNCcpOyAvLyBBbGxvdyBvbmx5IHVzZXJsZXZlbHMgMSwyLDMsNCBhY2VzcyB0
byB0aGlzIHBsdWdpbi4KCXJlZ2lzdGVyX3RhYignZXh0ZW5zaW9ucycsICdhc3ZfYW1hem9u
MicsICJBbWF6b24gU2V0dGluZ3MiKTsKCXJlZ2lzdGVyX2NhbGxiYWNrKCJhc3ZfYW1hem9u
MiIsICJhc3ZfYW1hem9uMiIpOwoKCXJlZ2lzdGVyX2NhbGxiYWNrKCdhc3ZfYW1hem9uX2Jh
Y2tlbmQnLCAnYXJ0aWNsZScpOwoJcmVnaXN0ZXJfY2FsbGJhY2soJ2Fzdl9hbWF6b25fYmFj
a2VuZCcsICdwYWdlJyk7CglyZWdpc3Rlcl9jYWxsYmFjaygnYXN2X2FtYXpvbl9iYWNrZW5k
JywgJ2Zvcm0nKTsKCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKaWYoZ3BzKCdhc3ZfYW1hem9uMl9hY3Rpb24n
KSAmJiBncHMoJ2Fzdl9rZXl3b3JkcycpKQp7CgkkYXN2X2FtYXpvbiA9IG5ldyBhc3ZfQW1h
em9uKCJVUyIpOwoJaGVhZGVyKCdDb250ZW50LVR5cGU6IHRleHQveG1sJyk7CgllY2hvICRh
c3ZfYW1hem9uLT5yZXF1ZXN0SXRlbXMoYXJyYXkoCgkJCQkJCQkJIktleXdvcmRzIiA9PiBn
cHMoJ2Fzdl9rZXl3b3JkcycpLAoJCQkJCQkJCSJTZWFyY2hJbmRleCIgPT4gZ3BzKCdhc3Zf
c2VhcmNoaW5kZXgnKSwKCQkJCQkJCQkiSXRlbVBhZ2UiID0+IGdwcygnYXN2X2l0ZW1wYWdl
JyksCgkJCQkJCQkJIk9wZXJhdGlvbiIgPT4gIkl0ZW1TZWFyY2giCgkJCQkJCQkpKTsKCWV4
aXQ7Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQoKZnVuY3Rpb24gYXN2X2FtYXpvbjIoJGV2ZW50LCAkc3RlcCkK
ewoJcGFnZXRvcCgnQW1hem9uIENhY2hlIFNldHRpbmdzJyk7CgoJJGFzdl9hbWF6b25fY2Fj
aGVkaXIgPSAnJzsKCSRhc3ZfYW1hem9uX2NhY2hlZHVybCA9ICcnOwoKCglpZigkc3RlcCA9
PSAnc2F2ZScpCgl7CgkJc2V0X3ByZWYoJ2Fzdl9hbWF6b25fY2FjaGVkaXInLCBncHMoJ2Fz
dl9hbWF6b25fY2FjaGVkaXInKSwnJywnJyk7CgkJc2V0X3ByZWYoJ2Fzdl9hbWF6b25fY2Fj
aGV1cmwnLCBncHMoJ2Fzdl9hbWF6b25fY2FjaGV1cmwnKSwnJywnJyk7Cgl9CgoJZXh0cmFj
dChnZXRfcHJlZnMoKSk7CgoJZWNobyBzdGFydFRhYmxlKCdsaXN0JykudHIodGQoZm9ybSgK
CQkJCWdyYWYodGFnKCdQYXRoIHRvIGNhY2hlOiAnLCAnbGFiZWwnKS4KCQkJCQlmSW5wdXQo
J3RleHQnLCAnYXN2X2FtYXpvbl9jYWNoZWRpcicsICRhc3ZfYW1hem9uX2NhY2hlZGlyLCAn
ZWRpdCcsICcnLCAnJywgMzApKS4KCQkJCWdyYWYodGFnKCdVUkwgdG8gY2FjaGU6ICcsICds
YWJlbCcpLgoJCQkJCWZJbnB1dCgndGV4dCcsICdhc3ZfYW1hem9uX2NhY2hldXJsJywgJGFz
dl9hbWF6b25fY2FjaGV1cmwsICdlZGl0JywgJycsICcnLCAzMCkpLgoJCQkJZUlucHV0KCdh
c3ZfYW1hem9uMicpLgoJCQkJc0lucHV0KCdzYXZlJykuCgkJIAkJZ3JhZihmSW5wdXQoJ3N1
Ym1pdCcsICcnLCBnVHh0KCdTYXZlJyksICcnKSkKCQkJCSkpKS5lbmRUYWJsZSgpOwp9Cgov
Ly0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KCmZ1bmN0aW9uIGFzdl9hbWF6b24yX2Rpc3BsYXkoJGF0dHMsJHRoaW5nKQp7
CglleHRyYWN0KGxBdHRzKGFycmF5KAoJCSd1cmwnID0+ICcnLAoJCSdzbWFsbGltYWdlJyA9
PiAnJywKCQknbWVkaXVtaW1hZ2UnID0+ICcnLAoJCSdsYXJnZWltYWdlJyA9PiAnJywKCQkn
YXNpbicgPT4gJycsCgkJJ3RpdGxlJyA9PiAnJywKCQknZm9ybScgPT4gJycsCgkJJ2NhY2hl
JyA9PiAnJywKCQknbG9jYWxlJyA9PiAnVVMnCgkpLCAkYXR0cykpOwoKCWlmKCRhc2luKQoJ
ewoJCSRkb2NhY2hlID0gKCRjYWNoZT09InkiKT8gdHJ1ZTogZmFsc2U7CgkJJGFzdl9hbWF6
b25fcmVxdWVzdCA9IG5ldyBhc3ZfQW1hem9uKCRsb2NhbGUpOwoJCSRhc3ZfYW1hem9uMl9j
b250ZW50cyA9ICRhc3ZfYW1hem9uX3JlcXVlc3QtPnJlcXVlc3RJdGVtKGFycmF5KAoJCQkJ
CQkJCQkJIkl0ZW1JZCIgPT4gJGFzaW4sCgkJCQkJCQkJCQkiT3BlcmF0aW9uIiA9PiAiSXRl
bUxvb2t1cCIKCQkJCQkJCQkJKSwgJGRvY2FjaGUpOwoKCgkJJHVybCA9ICRhc3ZfYW1hem9u
Ml9jb250ZW50c1siYXN2X0RldGFpbFBhZ2VVUkwiXTsKCQkkc21hbGxpbWFnZSA9ICRhc3Zf
YW1hem9uMl9jb250ZW50c1siYXN2X1NtYWxsSW1hZ2VVUkwiXTsKCQkkbWVkaXVtaW1hZ2Ug
PSAkYXN2X2FtYXpvbjJfY29udGVudHNbImFzdl9NZWRpdW1JbWFnZVVSTCJdOwoJCSRsYXJn
ZWltYWdlID0gJGFzdl9hbWF6b24yX2NvbnRlbnRzWyJhc3ZfTGFyZ2VJbWFnZVVSTCJdOwoJ
CSR0aXRsZSA9ICRhc3ZfYW1hem9uMl9jb250ZW50c1siYXN2X1RpdGxlIl07Cgl9CgoJaWYo
JGZvcm0pCgl7CgkJJHRoaW5nID0gZmV0Y2hfZm9ybSgkZm9ybSk7Cgl9CglpZigkdGhpbmcp
Cgl7CgkJJHRoaW5nID0gc3RyX3JlcGxhY2UoJ2Fzdl91cmwnLCAkdXJsLCAkdGhpbmcpOwoJ
CSR0aGluZyA9IHN0cl9yZXBsYWNlKCdhc3Zfc0ltYWdlVXJsJywgJHNtYWxsaW1hZ2UsICR0
aGluZyk7CgkJJHRoaW5nID0gc3RyX3JlcGxhY2UoJ2Fzdl9tSW1hZ2VVcmwnLCAkbWVkaXVt
aW1hZ2UsICR0aGluZyk7CgkJJHRoaW5nID0gc3RyX3JlcGxhY2UoJ2Fzdl9sSW1hZ2VVcmwn
LCAkbGFyZ2VpbWFnZSwgJHRoaW5nKTsKCQkkdGhpbmcgPSBzdHJfcmVwbGFjZSgnYXN2X2Fz
aW4nLCAkYXNpbiwgJHRoaW5nKTsKCQkkdGhpbmcgPSBzdHJfcmVwbGFjZSgnYXN2X3RpdGxl
JywgJHRpdGxlLCAkdGhpbmcpOwoKCQkkdGhpbmcgPSBzdHJfcmVwbGFjZSgnYXN2X0RldGFp
bFBhZ2VVUkwnLCAkdXJsLCAkdGhpbmcpOwoJCSR0aGluZyA9IHN0cl9yZXBsYWNlKCdhc3Zf
U21hbGxJbWFnZVVSTCcsICRzbWFsbGltYWdlLCAkdGhpbmcpOwoJCSR0aGluZyA9IHN0cl9y
ZXBsYWNlKCdhc3ZfTWVkaXVtSW1hZ2VVUkwnLCAkbWVkaXVtaW1hZ2UsICR0aGluZyk7CgkJ
JHRoaW5nID0gc3RyX3JlcGxhY2UoJ2Fzdl9MYXJnZUltYWdlVVJMJywgJGxhcmdlaW1hZ2Us
ICR0aGluZyk7CgkJJHRoaW5nID0gc3RyX3JlcGxhY2UoJ2Fzdl9UaXRsZScsICR0aXRsZSwg
JHRoaW5nKTsKCX0KCWVsc2UKCXsKCQkkdGhpbmcgPSAgIjxhIGhyZWY9XCIiLiR1cmwuIlwi
PjxpbWcgc3JjPVwiIi4kc21hbGxpbWFnZS4iXCIgLz48YnIgLz4iLiR0aXRsZS4iPC9hPjxi
ciAvPiI7Cgl9CgoJcmV0dXJuICR0aGluZzsKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpmdW5jdGlvbiBhc3Zf
YW1hem9uX2JhY2tlbmQgKCRldmVudCwgJHN0ZXApCnsKCSRhc3ZfYW1hem9uMl9sb2NhdGlv
biA9ICcnOwoJJGFzdl9hbWF6b24yX3RleHRhcmVhPSAnJzsKCglzd2l0Y2goJGV2ZW50KXsK
CQljYXNlICJhcnRpY2xlIjoKCQkJJGFzdl9hbWF6b24yX2xvY2F0aW9uID0gImFkdmFuY2Vk
IjsKCQkJJGFzdl9hbWF6b24yX3RleHRhcmVhID0gImJvZHkiOwoJCQlicmVhazsKCQljYXNl
ICJwYWdlIjoKCQkJJGFzdl9hbWF6b24yX2xvY2F0aW9uID0gIm1pc2MtdGFncyI7CgkJCSRh
c3ZfYW1hem9uMl90ZXh0YXJlYSA9ICJodG1sIjsKCQkJYnJlYWs7CgkJY2FzZSAiZm9ybSI6
CgkJCSRhc3ZfYW1hem9uMl9sb2NhdGlvbiA9ICJhcnRpY2xlLXRhZ3MiOwoJCQkkYXN2X2Ft
YXpvbjJfdGV4dGFyZWEgPSAiZm9ybSI7CgkJCWJyZWFrOwoJfQoKCSRhc3Zfc2VhcmNoSW5k
ZXggPSBhcnJheSgiQXBwYXJlbCIsICJCYWJ5IiwgIkJsZW5kZWQiLCAiQm9va3MiLCAiQ2xh
c3NpY2FsIiwgIkRWRCIsICJEaWdpdGFsTXVzaWMiLCAiRWxlY3Ryb25pY3MiLCAiR291cm1l
dEZvb2QiLCAiSGVhbHRoUGVyc29uYWxDYXJlIiwgIkpld2VscnkiLCAiS2l0Y2hlbiIsICJN
YWdhemluZXMiLCAiTWVyY2hhbnRzIiwgIk1pc2NlbGxhbmVvdXMiLCAiTXVzaWMiLCAiTXVz
aWNUcmFja3MiLCAiTXVzaWNhbEluc3RydW1lbnRzIiwgIk9mZmljZVByb2R1Y3RzIiwgIk91
dGRvb3JMaXZpbmciLCAiUENIYXJkd2FyZSIsICJQZXRTdXBwbGllcyIsICJQaG90byIsICJS
ZXN0YXVyYW50cyIsICJTb2Z0d2FyZSIsICJTcG9ydGluZ0dvb2RzIiwgIlRvb2xzIiwgIlRv
eXMiLCAiVkhTIiwgIlZpZGVvIiwgIlZpZGVvR2FtZXMiLCAiV2lyZWxlc3NBY2Nlc3Nvcmll
cyIpOwoKCSRsaW5lID0gIjxoMyBjbGFzcz1cInBsYWluXCI+IjsKCgkkbGluZSAuPSAiPGEg
aHJlZj1cIiNhc3ZfYW1hem9uMlwiIG9uY2xpY2s9XCIkKCcjYXN2X2FtYXpvbjJ3cmFwcGVy
Jykuc2xpZGVUb2dnbGUoJ3Nsb3cnKTsgcmV0dXJuIGZhbHNlO1wiPkFtYXpvbjwvYT4iOwoK
CSRsaW5lIC49ICI8L2gzPiI7CgoJJGZvcm0gPSAiPGZvcm0gb25TdWJtaXQ9XCJhc3ZfbG9h
ZFJlc3VsdHMoKTsgcmV0dXJuIGZhbHNlO1wiPjxoMz5BbWF6b248L2gzPjxwIGlkPVwiYXN2
X2FtYXpvbjJfY2xvc2VcIj48YSBocmVmPVwiI1wiIG9uY2xpY2s9XCIkKCcjYXN2X2FtYXpv
bjJ3cmFwcGVyJykuc2xpZGVUb2dnbGUoJ3Nsb3cnKTsgcmV0dXJuIGZhbHNlO1wiPmNsb3Nl
PC9hPjwvcD48ZmllbGRzZXQ+PGxlZ2VuZD5TZWFyY2g8L2xlZ2VuZD4iLgoKCQlncmFmKCI8
bGFiZWwgZm9yPVwiYXN2X1NlYXJjaEluZGV4XCI+Q2hvb3NlIGEgY2F0ZWdvcnk8L2xhYmVs
PjxiciAvPiIuCgoJCQlzZWxlY3RJbnB1dCgnYXN2X1NlYXJjaEluZGV4JywgJGFzdl9zZWFy
Y2hJbmRleCwgJGFzdl9zZWFyY2hJbmRleCwgZmFsc2UsJycsJ2Fzdl9TZWFyY2hJbmRleCcp
KS4KCgkJZ3JhZigiPGxhYmVsIGZvcj1cImFzdl9LZXl3b3Jkc1wiPktleXdvcmRzPC9sYWJl
bD48YnIgLz4iLgoKCQkJZklucHV0KCd0ZXh0JywgJ2Fzdl9LZXl3b3JkcycsICcnLCAnZWRp
dCcsICcnLCAnJywgJzIwJywgICcnLCAnYXN2X0tleXdvcmRzJykpLgoKCQlmSW5wdXQoJ3N1
Ym1pdCcsJ2Fzdl9TZWFyY2gnLCdTZWFyY2gnLCJwdWJsaXNoIiwgJycsICdhc3ZfbG9hZFJl
c3VsdHMoKTtyZXR1cm4gZmFsc2U7JywgJycsICcnKS4KCgkJZklucHV0KCdidXR0b24nLCdh
c3ZfQ2FuY2VsJywnQ2FuY2VsJywicHVibGlzaCIsICcnLCAnYXN2X2NhbmNlbFJlc3VsdHMo
KTtyZXR1cm4gZmFsc2U7JywgJycsICcnKS4KCgkJIjwvZmllbGRzZXQ+PC9mb3JtPiI7CgoJ
JGxpbmUgLj0gIjxkaXYgaWQ9XCJhc3ZfYW1hem9uMndyYXBwZXJcIiBzdHlsZT1cImRpc3Bs
YXk6bm9uZVwiID48ZGl2IGlkPVwiYXN2X2FtYXpvbjJcIiA+JGZvcm08L2Rpdj48ZGl2IGlk
PVwiYXN2X2FtYXpvbjJmb3JtXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48L2Rpdj48ZGl2
IGlkPVwiYXN2X2FtYXpvbjJSZXN1bHRzXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48L2Rp
dj48L2Rpdj4iOwoKCSRsaW5lID0gYXN2X3NhZmVKUygkbGluZSk7CgoJJHJzID0gc2FmZV9j
b2x1bW4oJ25hbWUnLCAndHhwX2Zvcm0nLCAidHlwZSA9ICdtaXNjJyIpOwoKCSRmb3JtcyA9
ICc8cD48bGFiZWwgZm9yPSJhc3ZfYW1hem9uMl90YWd0eXBlIj5UeXBlPC9sYWJlbD46ICcu
c2VsZWN0SW5wdXQoJ2Fzdl9hbWF6b24yX3RhZ3R5cGUnLCBhcnJheSgnZm9ybScsICdmb3Jt
IChjYWNoZWQpJywgJ2hhcmRjb2RlJyksIGFycmF5KCdmb3JtJywgJ2Zvcm0gKGNhY2hlZCkn
LCAnaGFyZGNvZGUnKSwgZmFsc2UsICcnLCAnYXN2X2FtYXpvbjJfdGFndHlwZScpLic8L3A+
JzsKCgkkZm9ybXMgLj0gJzxwPjxsYWJlbCBmb3I9ImFzdl9hbWF6b24yX2Zvcm0iPkZvcm08
L2xhYmVsPjogJzsKCglpZiAoJHJzKQoJewoJCSRmb3JtcyAuPSBzZWxlY3RJbnB1dCgnYXN2
X2FtYXpvbjJfZm9ybScsICRycywgJGZvcm0sIHRydWUsICcnLCAnYXN2X2FtYXpvbjJfZm9y
bScpLic8L3A+JzsKCX0KCWVsc2UKCXsKCQkkZm9ybXMgLj0gJzxzZWxlY3QgaWQ9ImFzdl9h
bWF6b24yX2Zvcm0iPjxvcHRpb24gLz48L3NlbGVjdD48L3A+JzsKCX0KCSRhc3ZfYW1hem9u
Ml9pbWFnZXNpemUgPSBhcnJheSgnc21hbGwnLCAnbWVkaXVtJywgJ2xhcmdlJyk7CgoJJGZv
cm1zID0gYXN2X3NhZmVKUygkZm9ybXMpOwoKCSRqcyA9IDw8PEVPRgo8c2NyaXB0IGxhbmd1
YWdlPSJKYXZhU2NyaXB0IiBTUkM9Ii90ZXh0cGF0dGVybi9qcXVlcnkuanMiPgo8L3Njcmlw
dD4KPHNjcmlwdCBsYW5ndWFnZT0iamF2YXNjcmlwdCIgdHlwZT0idGV4dC9qYXZhc2NyaXB0
Ij4KPCEtLQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCi8vQXR0YWNoIHRoZSBhbWF6b24yIHBsdWdpbiB0byB0aGUg
cGFnZQoKICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgewoJJCgiJGxpbmUiKS5pbnNl
cnRCZWZvcmUoJCgiIyRhc3ZfYW1hem9uMl9sb2NhdGlvbiIpLnByZXYoKSk7CgoJJCgiI2Fz
dl9hbWF6b24yd3JhcHBlciIpLmNzcygicG9zaXRpb24iLCAiYWJzb2x1dGUiKTsKCSQoIiNh
c3ZfYW1hem9uMndyYXBwZXIiKS5jc3MoInRvcCIsICI4MHB4Iik7CgkkKCIjYXN2X2FtYXpv
bjJ3cmFwcGVyIikuY3NzKCJyaWdodCIsICIwcHgiKTsKCSQoIiNhc3ZfYW1hem9uMndyYXBw
ZXIiKS5jc3MoIndpZHRoIiwgIjIwMHB4Iik7CgkkKCIjYXN2X2FtYXpvbjJ3cmFwcGVyIiku
Y3NzKCJiYWNrZ3JvdW5kLWNvbG9yIiwgIiNmZmZmY2MiKTsKCSQoIiNhc3ZfYW1hem9uMndy
YXBwZXIiKS5jc3MoInBhZGRpbmciLCAiMjBweCIpOwoJJCgiI2Fzdl9hbWF6b24yd3JhcHBl
ciBoMyIpLmNzcygiZmxvYXQiLCAibGVmdCIpOwoJJCgiI2Fzdl9hbWF6b24yd3JhcHBlciBo
MyIpLmNzcygiZGlzcGxheSIsICJpbmxpbmUiKTsKCSQoIiNhc3ZfYW1hem9uMl9jbG9zZSIp
LmNzcygidGV4dC1hbGlnbiIsICJyaWdodCIpOwogICB9KTsKCi8vLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZnVuY3Rp
b24gYXN2X2xvYWRSZXN1bHRzKCkKewoJdmFyIGtleXdvcmRzID0JJCgiI2Fzdl9LZXl3b3Jk
cyIpLnZhbCgpOwoJdmFyIHNlYXJjaGluZGV4ID0gJCgiI2Fzdl9TZWFyY2hJbmRleCBvcHRp
b25bQHNlbGVjdGVkXSIpLnRleHQoKTsKCWFzdl9yZXF1ZXN0KGtleXdvcmRzLCBzZWFyY2hp
bmRleCwgJzEnKTsKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpmdW5jdGlvbiBhc3ZfcmVxdWVzdChrZXl3b3Jk
cywgc2VhcmNoaW5kZXgsIGl0ZW1wYWdlKXsKCSQoJyNhc3ZfYW1hem9uMmZvcm0nKS5odG1s
KCc8ZmllbGRzZXQ+PGxlZ2VuZD5PcHRpb25zPC9sZWdlbmQ+PGZvcm0+JGZvcm1zPC9mb3Jt
PicpOwoJJCgnI2Fzdl9hbWF6b24yUmVzdWx0cycpLmh0bWwoJzxmaWVsZHNldD48bGVnZW5k
PlJlc3VsdHM8L2xlZ2VuZD48ZGl2IGlkPSJhc3ZfYW1hem9uMlJlc3VsdHNEYXRhIj48cCA+
bG9hZGluZy4uLjwvcD48L2Rpdj48L2ZpZWxkc2V0PicpOwoJJCgiI2Fzdl9hbWF6b24yUmVz
dWx0c0RhdGEiKS5jc3MoInBhZGRpbmciLCAiMHB4IDBweCAxMHB4IDBweCIpOwoJJCgnI2Fz
dl9hbWF6b24yZm9ybScpLnNob3coJ3Nsb3cnKTsKCSQoJyNhc3ZfYW1hem9uMlJlc3VsdHMn
KS5zaG93KCdzbG93Jyk7CgoJJC5nZXQoJ2luZGV4LnBocCcsCgkgCXthc3ZfYW1hem9uMl9h
Y3Rpb246ICIxIiwgYXN2X2tleXdvcmRzOiBlc2NhcGUoa2V5d29yZHMpLCBhc3Zfc2VhcmNo
aW5kZXg6IGVzY2FwZShzZWFyY2hpbmRleCksIGFzdl9pdGVtcGFnZTogaXRlbXBhZ2UgfSwK
CSAgIGFzdl9wYXJzZVJlc3BvbnNlLAoJICAgInhtbCIKCSApOwp9CgovLy0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmZ1
bmN0aW9uIGFzdl9wYXJzZVJlc3BvbnNlKHhtbCkKewoJdmFyIGl0ZW1QYWdlID0gJCgnSXRl
bVBhZ2UnLCB4bWwpLnRleHQoKTsKCXZhciBzZWFyY2hpbmRleCA9ICQoJ1NlYXJjaEluZGV4
JywgeG1sKS50ZXh0KCk7Cgl2YXIgdG90YWxQYWdlcyA9ICQoJ1RvdGFsUGFnZXMnLCB4bWwp
LnRleHQoKTsKCXZhciBrZXl3b3JkcyA9ICQoJ0tleXdvcmRzJywgeG1sKS50ZXh0KCk7Cgl2
YXIgbGluZSA9IiI7CgoJbGluZSArPSBhc3ZfcHJldm5leHRfbGluayhrZXl3b3Jkcywgc2Vh
cmNoaW5kZXgsIGl0ZW1QYWdlLCB0b3RhbFBhZ2VzLCAidG9wIik7CgoJJCh4bWwpLmZpbmQo
J0l0ZW0nKS5lYWNoKGZ1bmN0aW9uKCl7CgkJdmFyIHRpdGxlID0gJCgnVGl0bGUnLHRoaXMp
LnRleHQoKTsKCQl2YXIgc0ltYWdlVVJMID0gJCgiU21hbGxJbWFnZSA+IFVSTCIsdGhpcyku
dGV4dCgpOwoJCXZhciBtSW1hZ2VVUkwgPSAkKCJNZWRpdW1JbWFnZSA+IFVSTCIsdGhpcyku
dGV4dCgpOwoJCXZhciBsSW1hZ2VVUkwgPSAkKCJMYXJnZUltYWdlID4gVVJMIix0aGlzKS50
ZXh0KCk7CgkJdmFyIHVybCA9ICQoJ0RldGFpbFBhZ2VVUkwnLHRoaXMpLnRleHQoKTsKCQl2
YXIgYXNpbiA9ICQoJ0FTSU4nLHRoaXMpLnRleHQoKTsKCgoJCXZhciBhbWF6b25IVE1MID0g
JzxhIGhyZWY9IicrdXJsKyciPjxpbWcgc3JjPSInKyBzSW1hZ2VVUkwgKyciIHN0eWxlPSJk
aXNwbGF5OiBibG9jazttYXJnaW4tbGVmdDogYXV0bzttYXJnaW4tcmlnaHQ6IGF1dG87Ii8+
PHNwYW4gc3R5bGU9InRleHQtYWxpZ246IGNlbnRlciI+JyArIHRpdGxlICsgJzwvc3Bhbj48
L2E+JyA7CgoJCXZhciBmb3JtID0gJzxmb3JtIGlkPSJhc3ZfYW1hem9uMl8nK2FzaW4rJyBv
bnN1Ym1pdD0iYXN2X2FtYXpvbjJfYWRkdG9Cb2R5KFwnJythc2luKydcJykiPicgKwoJCQkJ
CSc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJhc3ZfYW1hem9uMl90aXRsZSIgdmFsdWU9
IicrdGl0bGUrJyIgLz4nICsKCQkJCQknPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYXN2
X2FtYXpvbjJfc0ltYWdlVVJMIiB2YWx1ZSA9Iicrc0ltYWdlVVJMKyciIC8+JyArCgkJCQkJ
JzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImFzdl9hbWF6b24yX21JbWFnZVVSTCIgdmFs
dWUgPSInK21JbWFnZVVSTCsnIiAvPicgKwoJCQkJCSc8aW5wdXQgdHlwZT0iaGlkZGVuIiBu
YW1lPSJhc3ZfYW1hem9uMl9sSW1hZ2VVUkwiIHZhbHVlID0iJytsSW1hZ2VVUkwrJyIgLz4n
ICsKCQkJCQknPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYXN2X2FtYXpvbjJfdXJsIiB2
YWx1ZSA9IicrdXJsKyciIC8+JyArCgkJCQkJJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9
ImFzdl9hbWF6b24yX2FzaW4iIHZhbHVlID0iJythc2luKyciIC8+JyArCgkJCQkJJzxpbnB1
dCB0eXBlPSJidXR0b24iIHN0eWxlPSJmbG9hdDpyaWdodCIgb25jbGljaz0iYXN2X2FtYXpv
bjJfYWRkdG9Cb2R5KFwnJythc2luKydcJykiIGNsYXNzPSJwdWJsaXNoIiB2YWx1ZT0iYWRk
IiAvPicKCQkJCSAgICc8L2Zvcm0+JzsKCgkJbGluZSArPSAnPHA+JyArIGZvcm0gKyBhbWF6
b25IVE1MICArICc8L3A+JzsKICAgIH0pOwoKCWxpbmUgKz0gYXN2X3ByZXZuZXh0X2xpbmso
a2V5d29yZHMsIHNlYXJjaGluZGV4LCBpdGVtUGFnZSwgdG90YWxQYWdlcywgImJvdHRvbSIp
OwoKICAgICQoIiNhc3ZfYW1hem9uMlJlc3VsdHNEYXRhIikuaHRtbChsaW5lKTsKCSQoIiNh
c3ZfYW1hem9uMlJlc3VsdHNEYXRhIikuY3NzKCJtYXgtaGVpZ2h0IiwgIjUwMHB4Iik7Cgkk
KCIjYXN2X2FtYXpvbjJSZXN1bHRzRGF0YSIpLmNzcygib3ZlcmZsb3ciLCAiYXV0byIpOwoJ
JCgiI2Fzdl9hbWF6b24yUmVzdWx0c0RhdGEiKS5jc3MoInBhZGRpbmciLCAiMHB4IDBweCAx
MHB4IDBweCIpOwp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiQuZm4uYXBwZW5kVmFsID0gZnVuY3Rpb24odHh0
KSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7CiAgICAgICAgdGhpcy52YWx1
ZSArPSB0eHQ7CiAgICB9KTsKfTsKCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCmZ1bmN0aW9uIGFzdl9hbWF6b24y
X2FkZHRvQm9keShhc2luKQp7Cgl2YXIgdGl0bGUgPSAkKCdpbnB1dDpoaWRkZW5bQG5hbWU9
YXN2X2FtYXpvbjJfdGl0bGVdJykudmFsKCk7Cgl2YXIgc0ltYWdlVVJMID0gJCgnaW5wdXQ6
aGlkZGVuW0BuYW1lPWFzdl9hbWF6b24yX3NJbWFnZVVSTF0nKS52YWwoKTsKCXZhciBtSW1h
Z2VVUkwgPSAkKCdpbnB1dDpoaWRkZW5bQG5hbWU9YXN2X2FtYXpvbjJfbUltYWdlVVJMXScp
LnZhbCgpOwoJdmFyIGxJbWFnZVVSTCA9ICQoJ2lucHV0OmhpZGRlbltAbmFtZT1hc3ZfYW1h
em9uMl9sSW1hZ2VVUkxdJykudmFsKCk7Cgl2YXIgdXJsID0gJCgnaW5wdXQ6aGlkZGVuW0Bu
YW1lPWFzdl9hbWF6b24yX3VybF0nKS52YWwoKTsKCXZhciBhc2luID0gJCgnaW5wdXQ6aGlk
ZGVuW0BuYW1lPWFzdl9hbWF6b24yX2FzaW5dJykudmFsKCk7Cgl2YXIgZm9ybSA9ICQoIiNh
c3ZfYW1hem9uMl9mb3JtIG9wdGlvbltAc2VsZWN0ZWRdIikudGV4dCgpOwoKCXN3aXRjaCgk
KCIjYXN2X2FtYXpvbjJfdGFndHlwZSBvcHRpb25bQHNlbGVjdGVkXSIpLnRleHQoKSkKCXsK
CQljYXNlICJoYXJkY29kZSI6CgkJCXZhciBhc3ZfdGFnID0gJzx0eHA6YXN2X2FtYXpvbjJf
ZGlzcGxheSAnOwoJCQlhc3ZfdGFnICs9ICh0aXRsZSk/ICd0aXRsZT0iJyt0aXRsZSsnIiAn
IDogIiI7CgkJCWFzdl90YWcgKz0gKHNJbWFnZVVSTCk/ICdzbWFsbGltYWdlPSInK3NJbWFn
ZVVSTCsnIiAnIDogIiI7CgkJCWFzdl90YWcgKz0gKG1JbWFnZVVSTCk/ICdtZWRpdW1pbWFn
ZT0iJyttSW1hZ2VVUkwrJyIgJyA6ICIiOwoJCQlhc3ZfdGFnICs9IChsSW1hZ2VVUkwpPyAn
bGFyZ2VpbWFnZT0iJytsSW1hZ2VVUkwrJyIgJyA6ICIiOwoJCQlhc3ZfdGFnICs9ICh1cmwp
PyAndXJsPSInK3VybCsnIiAnIDogIiI7CgkJCWFzdl90YWcgKz0gKGZvcm0pPyAnZm9ybT0i
Jytmb3JtKyciICcgOiAiIjsKCQkJYXN2X3RhZyArPSAnIC8+JzsKCQkJYnJlYWs7CgkJY2Fz
ZSAiZm9ybSI6CgkJCXZhciBhc3ZfdGFnID0gJzx0eHA6YXN2X2FtYXpvbjJfZGlzcGxheSAn
OwoJCQlhc3ZfdGFnICs9IChhc2luKT8gJ2FzaW49IicrYXNpbisnIiAnIDogIiI7CgkJCWFz
dl90YWcgKz0gKGZvcm0pPyAnZm9ybT0iJytmb3JtKyciICcgOiAiIjsKCQkJYXN2X3RhZyAr
PSAnIC8+JzsKCQkJYnJlYWs7CgkJY2FzZSAiZm9ybSAoY2FjaGVkKSI6CgkJCXZhciBhc3Zf
dGFnID0gJzx0eHA6YXN2X2FtYXpvbjJfZGlzcGxheSAnOwoJCQlhc3ZfdGFnICs9IChhc2lu
KT8gJ2FzaW49IicrYXNpbisnIiAnIDogIiI7CgkJCWFzdl90YWcgKz0gKGZvcm0pPyAnZm9y
bT0iJytmb3JtKyciICcgOiAiIjsKCQkJYXN2X3RhZyArPSAnY2FjaGVkPSJ5Iic7CgkJCWFz
dl90YWcgKz0gJyAvPic7CgkJCWJyZWFrOwoJfQoJJCgnIyRhc3ZfYW1hem9uMl90ZXh0YXJl
YScpLmFwcGVuZFZhbChhc3ZfdGFnKTsKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpmdW5jdGlvbiBhc3ZfYW1h
em9uMl9hZGR0b0JvZHlfUmVzcG9uc2UocmVzcG9uc2UpCnsKCWluc2VydEF0Q2FyZXQoJCgn
IyRhc3ZfYW1hem9uMl90ZXh0YXJlYScpLCByZXNwb25zZSk7Cn0KCi8vLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZnVu
Y3Rpb24gYXN2X2NhbmNlbFJlc3VsdHMoKQp7CgkkKCcjYXN2X2FtYXpvbjJSZXN1bHRzJyku
c2xpZGVVcCgnc2xvdycpOwoJJCgnI2Fzdl9hbWF6b24yZm9ybScpLnNsaWRlVXAoJ3Nsb3cn
KTsKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tCgpmdW5jdGlvbiBhc3ZfcHJldm5leHRfbGluayhrZXl3b3Jkcywg
c2VhcmNoaW5kZXgsIGl0ZW1QYWdlLCB0b3RhbFBhZ2VzLCBsb2MpCnsKCWxpbmUgPSAnJzsK
CglpZihwYXJzZUludCh0b3RhbFBhZ2VzKT4xKQoJewoJCWlmKGxvYz09ImJvdHRvbSIpIGxp
bmUrPSc8aHIgLz4nOwoKCQlsaW5lKz0nPHAgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsi
Pic7CgoJCWl0ZW1QYWdlID0gcGFyc2VJbnQoaXRlbVBhZ2UpOwoKCQl2YXIgdGV4dCA9ICcn
OwoKCQlpZihpdGVtUGFnZT4xKQoJCXsKCQkJdmFyIHBJdGVtUGFnZSA9IGl0ZW1QYWdlIC0g
MTsKCgkJCWxpbmUgKz0gJzxhIGhyZWY9IiMiIG9uY2xpY2s9ImFzdl9yZXF1ZXN0KFwnJytr
ZXl3b3JkcyArICdcJyxcJycgKyBzZWFyY2hpbmRleCArICdcJyxcJycrIHBJdGVtUGFnZSsn
XCcpO3JldHVybiBmYWxzZTsiPnByZXZpb3VzPC9hPiB8ICc7CgoJCX0KCQlpZihpdGVtUGFn
ZTx0b3RhbFBhZ2VzKQoJCXsKCQkJdmFyIG5JdGVtUGFnZSA9IGl0ZW1QYWdlICsgMTsKCgkJ
CWxpbmUgKz0gJzxhIGhyZWY9IiMiIG9uY2xpY2s9ImFzdl9yZXF1ZXN0KFwnJytrZXl3b3Jk
cyArICdcJyxcJycgKyBzZWFyY2hpbmRleCArICdcJyxcJycrIG5JdGVtUGFnZSsnXCcpO3Jl
dHVybiBmYWxzZTsiPm5leHQ8L2E+JzsKCgkJfQoKCQlsaW5lKz0nPC9wPic7CgoJCWlmKGxv
Yz09InRvcCIpIGxpbmUrPSc8aHIgLz4nOwoJfQoKCXJldHVybiBsaW5lOwp9CgovLy0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KCi8vIC0tPgo8L3NjcmlwdD4KRU9GOwoJZWNobyAkanM7Cn0KCi8vLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZnVu
Y3Rpb24gYXN2X3NhZmVKUygkbGluZSkKewoJcmV0dXJuIHN0cl9yZXBsYWNlKCJcbiIsICIi
LCBhZGRzbGFzaGVzKCRsaW5lKSk7Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKY2xhc3MgYXN2X0FtYXpvbgp7
Cgl2YXIgJGFwaV9rZXkgPSAiMFk4RjFZVjFOMllTR0oxTUMyMDIiOwoJdmFyICRjb250ZW50
VHlwZSA9ICJ0ZXh0JTJGeG1sIjsKCXZhciAkb3BlcmF0aW9uID0gIkl0ZW1TZWFyY2giOwoJ
dmFyICRzZXJ2aWNlID0gIkFXU0VDb21tZXJjZVNlcnZpY2UiOwoJdmFyICRiYXNlVVJMID0g
Imh0dHA6Ly9lY3MuYW1hem9uYXdzLmNvbS9vbmNhL3htbD8iOwoJdmFyICRzZWFyY2hJbmRl
eCA9ICJCbGVuZGVkIjsKCXZhciAkcmVzcG9uc2VHcm91cCA9ICJJbWFnZXMsU21hbGwiOwoJ
dmFyICR2ZXJzaW9uID0gIjIwMDUtMDMtMjMiOwoKCXZhciAkbG9jYWxlOwoKCS8vLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQoKCWZ1bmN0aW9uIGFzdl9BbWF6b24oJGxvY2FsZSkKCXsKCQkkdGhpcy0+bG9jYWxlID0g
JGxvY2FsZTsKCgkJc3dpdGNoKCRsb2NhbGUpCgkJewoJCQljYXNlICJVUyI6CgkJCQkkdGhp
cy0+YmFzZVVSTCA9ICJodHRwOi8vd2Vic2VydmljZXMuYW1hem9uLmNvbS9vbmNhL3htbD8i
OwoJCQkJYnJlYWs7CgkJCWNhc2UgIkRFIjoKCQkJCSR0aGlzLT5iYXNlVVJMID0gImh0dHA6
Ly93ZWJzZXJ2aWNlcy5hbWF6b24uZGUvb25jYS94bWw/IjsKCQkJCWJyZWFrOwoJCQljYXNl
ICJKUCI6CgkJCQkkdGhpcy0+YmFzZVVSTCA9ICJodHRwOi8vd2Vic2VydmljZXMuYW1hem9u
LmNvLmpwL29uY2EveG1sPyI7CgkJCQlicmVhazsKCQkJY2FzZSAiRlIiOgoJCQkJJHRoaXMt
PmJhc2VVUkwgPSAiaHR0cDovL3dlYnNlcnZpY2VzLmFtYXpvbi5mci9vbmNhL3htbD8iOwoJ
CQkJYnJlYWs7CgkJCWNhc2UgIkNBIjoKCQkJCSR0aGlzLT5iYXNlVVJMID0gImh0dHA6Ly93
ZWJzZXJ2aWNlcy5hbWF6b24uY2Evb25jYS94bWw/IjsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0
OgoJCQkJJHRoaXMtPmJhc2VVUkwgPSAiaHR0cDovL3dlYnNlcnZpY2VzLmFtYXpvbi5jb20v
b25jYS94bWw/IjsKCQkJCWJyZWFrOwoJCX0KCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCglmdW5jdGlvbiBy
ZXF1ZXN0SXRlbSgkcmVxdWVzdEl0ZW1zLCAkZG9jYWNoZSkKCXsKCQlleHRyYWN0KGdldF9w
cmVmcygpKTsKCgoJCSRjYWNoZV9sb2NhbHBhdGggPSAiJGFzdl9hbWF6b25fY2FjaGVkaXIv
JHRoaXMtPmxvY2FsZS0iLiRyZXF1ZXN0SXRlbXNbJ0l0ZW1JZCddOwoJCSRjYWNoZXVybCA9
ICR0ZW1wZGlyLiRjYWNoZV9sb2NhbHBhdGg7CgoJCWlmKCRkb2NhY2hlICYmIGZpbGVfZXhp
c3RzKCRjYWNoZXVybCkgJiYgdGltZSgpIC0gZmlsZW10aW1lKCRjYWNoZXVybCkgPDMwMCkK
CQl7CgkJCSR1cmwgPSAkY2FjaGV1cmw7CgkJfQoJCWVsc2UKCQl7CgkJCSR1cmwgPSAkdGhp
cy0+YnVpbGRVUkwoJHJlcXVlc3RJdGVtcyk7CgkJfQoKCgkJJGRhdGEgPSAkdGhpcy0+ZmV0
Y2hVUkwoJHVybCk7CgoJCSRjb250ZW50cyA9ICR0aGlzLT5wYXJzZSgkZGF0YSk7CgoJCWlm
KCRkb2NhY2hlKQoJCXsKCQkJaWYoJGNhY2hldXJsICE9ICR1cmwpCgkJCXsKCQkJCSR0aGlz
LT5jYWNoZSgkY2FjaGVfbG9jYWxwYXRoLCAkZGF0YSk7CgkJCX0KCgkJCWZvcmVhY2goJGNv
bnRlbnRzIGFzICRrZXk9PiR2YWx1ZSkKCQkJewoJCQkJc3dpdGNoKCRrZXkpCgkJCQl7CgkJ
CQkJY2FzZSAiYXN2X1NtYWxsSW1hZ2VVUkwiOgoJCQkJCWNhc2UgImFzdl9NZWRpdW1JbWFn
ZVVSTCI6CgkJCQkJY2FzZSAiYXN2X0xhcmdlSW1hZ2VVUkwiOgoJCQkJCQkkY2FjaGVfbG9j
YWxwYXRoID0gJGFzdl9hbWF6b25fY2FjaGVkaXIuIi8iLmJhc2VuYW1lKCR2YWx1ZSk7CgoJ
CQkJCQlpZighZmlsZV9leGlzdHMoJGNhY2hlX2xvY2FscGF0aCkgfHwgdGltZSgpIC0gZmls
ZW10aW1lKCRjYWNoZV9sb2NhbHBhdGgpID4zMDApCgkJCQkJCXsKCQkJCQkJCSRkYXRhID0g
JHRoaXMtPmZldGNoVVJMKCR2YWx1ZSk7CgkJCQkJCQkkdGhpcy0+Y2FjaGUoJGNhY2hlX2xv
Y2FscGF0aCwgJGRhdGEpOwoJCQkJCQl9CgoJCQkJCQkkY29udGVudHNbJGtleV0gPSAkYXN2
X2FtYXpvbl9jYWNoZXVybC4nLycuYmFzZW5hbWUoJHZhbHVlKTsKCQkJCX0KCQkJfQoJCX0K
CgkJcmV0dXJuICRjb250ZW50czsKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCglmdW5jdGlvbiByZXF1ZXN0
SXRlbXMoJHJlcXVlc3RJdGVtcykKCXsKCQkkdXJsID0gJHRoaXMtPmJ1aWxkVVJMKCRyZXF1
ZXN0SXRlbXMpOwoKCQlyZXR1cm4gJHRoaXMtPmZldGNoVVJMKCR1cmwpOwoJfQoKCS8vLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQoKCWZ1bmN0aW9uIHBhcnNlKCRkYXRhKQoJewoKCQlleHRyYWN0KGdldF9wcmVmcygp
KTsKCgkJJHBhcnNlciA9IHhtbF9wYXJzZXJfY3JlYXRlKCk7CgkJJGFtYXpvbl9wYXJzZXIg
PSAmbmV3IEFtYXpvblBhcnNlcigpOwoJCXhtbF9zZXRfb2JqZWN0KCRwYXJzZXIsICRhbWF6
b25fcGFyc2VyKTsKCQl4bWxfcGFyc2VyX3NldF9vcHRpb24oJHBhcnNlciwgWE1MX09QVElP
Tl9DQVNFX0ZPTERJTkcsIGZhbHNlKTsKCQl4bWxfc2V0X2VsZW1lbnRfaGFuZGxlcigkcGFy
c2VyLCAic3RhcnRFbGVtZW50IiwgImVuZEVsZW1lbnQiKTsKCQl4bWxfc2V0X2NoYXJhY3Rl
cl9kYXRhX2hhbmRsZXIoJHBhcnNlciwgImNoYXJhY3RlckRhdGEiKTsKCgkJaWYgKCF4bWxf
cGFyc2UoJHBhcnNlciwgJGRhdGEpKQoJCXsKCQkJcHJpbnQoc3ByaW50ZigiWE1MIGVycm9y
OiAlcyBhdCBsaW5lICVkIiwKCQkJeG1sX2Vycm9yX3N0cmluZyh4bWxfZ2V0X2Vycm9yX2Nv
ZGUoJHBhcnNlcikpLAoJCQl4bWxfZ2V0X2N1cnJlbnRfbGluZV9udW1iZXIoJHBhcnNlcikp
KTsKCQl9CgoJCXhtbF9wYXJzZXJfZnJlZSgkcGFyc2VyKTsKCgkJcmV0dXJuICRhbWF6b25f
cGFyc2VyLT5nZXRDb250ZW50c0FycmF5KCk7Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoJZnVuY3Rpb24g
Y2FjaGUoJGxvY2FscGF0aCwgJGRhdGEpCgl7CgkJJGZwID0gZm9wZW4oJGxvY2FscGF0aCwg
J3cnKTsKCQlmd3JpdGUoJGZwLCAkZGF0YSk7CgkJZmNsb3NlKCRmcCk7Cgl9CgoJLy8tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tCgoJZnVuY3Rpb24gZmV0Y2hVUkwoJHVybCkKCXsKCQkvLyBjcmVhdGUgYSBuZXcgY3Vy
bCByZXNvdXJjZQoJCSRjaCA9IGN1cmxfaW5pdCgpOwoKCQkvLyBzZXQgVVJMIGFuZCBvdGhl
ciBhcHByb3ByaWF0ZSBvcHRpb25zCgkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwg
JHVybCk7CgoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwxKTsK
CgkJLy8gZ3JhYiBVUkwgYW5kIHBhc3MgaXQgdG8gdGhlIGJyb3dzZXIKCQkkZGF0YSA9IGN1
cmxfZXhlYygkY2gpOwoKCQkvLyBjbG9zZSBjdXJsIHJlc291cmNlLCBhbmQgZnJlZSB1cCBz
eXN0ZW0gcmVzb3VyY2VzCgkJY3VybF9jbG9zZSgkY2gpOwoKCQlyZXR1cm4gJGRhdGE7Cgl9
CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCgoJZnVuY3Rpb24gYnVpbGRVUkwgLyogcHJpdmF0ZSAqLygkcmVxdWVz
dEl0ZW1zKQoJewoJCSR1cmwgPSAkdGhpcy0+YmFzZVVSTC4KCQkJCSJTZXJ2aWNlPSIuJHRo
aXMtPnNlcnZpY2UuCgkJCQkiJlN1YnNjcmlwdGlvbklkPSIuJHRoaXMtPmFwaV9rZXkuCgkJ
CQkiJlZlcnNpb249Ii4kdGhpcy0+dmVyc2lvbi4KCQkJCSImUmVzcG9uc2VHcm91cD0iLiR0
aGlzLT5yZXNwb25zZUdyb3VwOwoKCQkkdGhpcy0+cmVxdWVzdGVkSXRlbXMgPSAkcmVxdWVz
dEl0ZW1zOwoKCQlmb3JlYWNoKCRyZXF1ZXN0SXRlbXMgYXMgJGtleT0+JHZhbHVlKQoJCXsK
CQkJCSR1cmwgLj0gJyYnLiRrZXkuJz0nLiR2YWx1ZTsKCQl9CgoJCXJldHVybiAkdXJsOwoJ
fQoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQoKCWZ1bmN0aW9uIGdldFJlc3BvbnNlKCkKCXsKCQlyZXR1cm4gJHRo
aXMtPnJlc3BvbnNlOwoJfQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmNsYXNzIEFtYXpvblBhcnNlcgp7Ci8v
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQovKiBUaGlzIGNsYXNzIGlzIGEgaGVscGVyIHRvIHRoZSBhc3ZfYW1hem9uIGZ1
bmN0aW9uLiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGlzIHRvIHBhcnNlIHRoZSB4bWwg
ZGF0YSBhbmQgcmV0dXJuIHRoZSBpbmZvcm1hdGlvbiB0byB0aGUgYXN2X2FtYXpvbiBmdW5j
dGlvbi4qLwogICB2YXIgJGFzdl9jb250ZW50czsJLy9ob2xkIGFsbCB0aGUgZGF0YSB0byBy
ZXR1cm4KICAgdmFyICRhc3ZfZmxhZzsJLy9ob2xkIHRoZSBjdXJyZW50IHRhZyBuYW1lCgog
ICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0KCiAgIGZ1bmN0aW9uIEFtYXpvblBhcnNlcigpCiAgIHsKICAgfQoKICAg
Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tCgogICBmdW5jdGlvbiBzdGFydEVsZW1lbnQoJHBhcnNlciwgJHRhZ05hbWUs
ICRhdHRycyl7CgkgICBzd2l0Y2ggKCR0YWdOYW1lKSB7CgkJICAgY2FzZSAiRGV0YWlsUGFn
ZVVSTCI6CgkJICAgY2FzZSAiU21hbGxJbWFnZSI6CgkJICAgY2FzZSAiTWVkaXVtSW1hZ2Ui
OgoJCSAgIGNhc2UgIkxhcmdlSW1hZ2UiOgoJCSAgIGNhc2UgIkl0ZW1BdHRyaWJ1dGVzIjoK
CQkJICAgJHRoaXMtPmFzdl9mbGFnID0gJHRhZ05hbWU7CgkJCSAgIGJyZWFrOwoJCSAgIGNh
c2UgIlVSTCI6CgkJCSAgIGlmKCR0aGlzLT5hc3ZfZmxhZyA9PSAiU21hbGxJbWFnZSIpCgkJ
CQkgICAkdGhpcy0+YXN2X2ZsYWcgPSAiU21hbGxJbWFnZVVSTCI7CgkJCSAgIGlmKCR0aGlz
LT5hc3ZfZmxhZyA9PSAiTWVkaXVtSW1hZ2UiKQoJCQkJICAgJHRoaXMtPmFzdl9mbGFnID0g
Ik1lZGl1bUltYWdlVVJMIjsKCQkJICAgaWYoJHRoaXMtPmFzdl9mbGFnID09ICJMYXJnZUlt
YWdlIikKCQkJCSAgICR0aGlzLT5hc3ZfZmxhZyA9ICJMYXJnZUltYWdlVVJMIjsKCQkJICAg
YnJlYWs7CgkJICAgY2FzZSAiVGl0bGUiOgoJCQkgICBpZigkdGhpcy0+YXN2X2ZsYWcgPT0g
Ikl0ZW1BdHRyaWJ1dGVzIikKCQkJCSAgICR0aGlzLT5hc3ZfZmxhZyA9ICJUaXRsZSI7CgkJ
CSAgIGJyZWFrOwoJICAgfQogICB9CgogICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgIGZ1bmN0aW9uIGVuZEVs
ZW1lbnQoJHBhcnNlciwgJHRhZ05hbWUpewogICB9CgogICAvLy0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgIGZ1bmN0
aW9uIGNoYXJhY3RlckRhdGEoJHBhcnNlciwgJGRhdGEpewoJICAgc3dpdGNoICgkdGhpcy0+
YXN2X2ZsYWcpIHsKCQkgICBjYXNlICJEZXRhaWxQYWdlVVJMIjoKCQkgICBjYXNlICJTbWFs
bEltYWdlVVJMIjoKCQkgICBjYXNlICJNZWRpdW1JbWFnZVVSTCI6CgkJICAgY2FzZSAiTGFy
Z2VJbWFnZVVSTCI6CgkJICAgY2FzZSAiVGl0bGUiOgoJCQkgICAkdGhpcy0+YXN2X2NvbnRl
bnRzWyJhc3ZfIi4kdGhpcy0+YXN2X2ZsYWddID0gJGRhdGE7CgkJCSAgICR0aGlzLT5hc3Zf
ZmxhZyA9ICcnOwoJCQkgICBicmVhazsKCSAgIH0KICAgfQoKICAgLy8tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICBm
dW5jdGlvbiBnZXRDb250ZW50c0FycmF5KCl7CgkgICByZXR1cm4gJHRoaXMtPmFzdl9jb250
ZW50czsKICAgfQoKfSI7czozOiJtZDUiO3M6MzI6IjQyN2U1ODg5ODc4MDAzM2Q3YTEzNmM3
MWFmNWViNmIxIjt9
