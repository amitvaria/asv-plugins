# asv_amazon v2.1
# Add Amazon items to your TXP article
# Amit Varia
# http://www.amitvaria.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjQ6Im5hbWUiO3M6MTA6ImFzdl9hbWF6b24iO3M6NzoidmVyc2lvbiI7czozOiIy
LjEiO3M6NjoiYXV0aG9yIjtzOjEwOiJBbWl0IFZhcmlhIjtzOjEwOiJhdXRob3JfdXJpIjtz
OjI1OiJodHRwOi8vd3d3LmFtaXR2YXJpYS5jb20vIjtzOjExOiJkZXNjcmlwdGlvbiI7czoz
NjoiQWRkIEFtYXpvbiBpdGVtcyB0byB5b3VyIFRYUCBhcnRpY2xlIjtzOjQ6InR5cGUiO2k6
MTtzOjQ6ImhlbHAiO3M6MjI0MDoiCTxoMT5hc3ZfYW1hem9uPC9oMT4KCgk8aDI+dmVyc2lv
biAyLjA8L2gyPgoKCTxoMz5XaGF0JiM4MjE3O3MgbmV3PzwvaDM+CgoJPHA+QSBsb25nIHRp
bWUgYWdvLCBJIGNyZWF0ZWQgYSBwbHVnaW4gY2FsbGVkIGFzdl9hbWF6b24sIHdoaWNoIGxl
dCB5b3UgZGlzcGxheSBwcm9kdWN0cyBmcm9tIEFtYXpvbiBvbiB5b3VyIHNpdGUuIEl0IHdv
cmtlZCwgYnV0IGluc2VydGluZyB0aGUgcHJvZHVjdCByZXF1aXJlZCB5b3UgdG8gZ28gdG8g
QW1hem9uLCBjb3B5IHRoZSA8c3BhbiBjbGFzcz0iY2FwcyI+QVNJTjwvc3Bhbj4gbnVtYmVy
LCBhbmQgcGFzdGUgaW50byB0aGUgVGV4dFBhdHRlcm4uIFdoYXQgYSBoYXNzbGUhIFdlbGwg
SSBmaW5hbGx5IGdvdCBhcm91bmQgdG8gd3JpdGluZyB0aGUgbmV4dCB2ZXJzaW9uIG9mIGFz
dl9hbWF6b24uPC9wPgoKCTxoMz5Ib3cgZG9lcyBpdCB3b3JrPzwvaDM+CgoJPHA+U2ltcGxl
ICYjODIxMTsgd2hlbiB3cml0aW5nIGFuIGFydGljbGUganVzdCBjbGljayBvbiB0aGUgJiM4
MjIwO0FtYXpvbiYjODIyMTsgbGluayBpbiB0aGUgdG9wIHJpZ2h0IGNvbHVtbi4gWW91IGNh
biBzZWFyY2ggYW5kIGFkZCBwcm9kdWN0cyB0byB5b3VyIHBvc3QgYnkgY2xpY2tpbmcgdGhl
ICYjODIyMDthZGQmIzgyMjE7IGJ1dHRvbiBuZXh0IHRvIGVhY2ggaXRlbS48L3A+CgoJPGgz
PkNyZWF0aW5nIGEgZm9ybTwvaDM+CgoJPHA+V2l0aCB2ZXJzaW9uIDEuMCwgeW91IHdpbGwg
aGF2ZSB0byBoYXZlIGZvcm1zIHRvIGdlbmVyYXRlIHRoZSBsYXlvdXQgb2YgdGhlIHByb2R1
Y3Qgb24geW91ciBwYWdlLiBXaGVuIGNyZWF0aW5nIGEgbmV3ICYjODIxNjttaXNjJiM4MjE3
OyBmb3JtIHlvdSBjYW4gdXNlIHRoZSBmb2xsb3dpbmcgdmFsdWVzOjwvcD4KCgk8cD5hc3Zf
dXJsPGJyIC8+CmFzdl9zSW1hZ2VVcmw8YnIgLz4KYXN2X21JbWFnZVVybDxiciAvPgphc3Zf
bEltYWdlVXJsPGJyIC8+CmFzdl9hc2luPGJyIC8+CmFzdl90aXRsZTwvcD4KCgk8cD5PUiB5
b3UgY2FuIHVzZSB0aGUgZGVwZWNyYXRlZCBsaXRlcmFscyBmcm9tIHRoZSBvcmlnaW5hbCB2
ZXJzaW9uPC9wPgoKCTxwPmFzdl9EZXRhaWxQYWdlVVJMPGJyIC8+CmFzdl9TbWFsbEltYWdl
VVJMPGJyIC8+CmFzdl9NZWRpdW1JbWFnZVVSTDxiciAvPgphc3ZfTGFyZ2VJbWFnZVVSTDxi
ciAvPgphc3ZfVGl0bGU8L3A+CgoJPHA+YXN2X2FtYXpvbjIgd2lsbCBqdXN0IHJlcGxhY2Ug
dGhlc2UgbGl0ZXJhbHMgd2l0aCB0aGVpciBwcm9kdWN0IGNvdW50ZXJwYXJ0LCBzbzo8L3A+
Cgo8cHJlPjxjb2RlPiYjNjA7YSBocmVmPSYjMzQ7YXN2X2FtYXpvbjJfdXJsJiMzNDsmIzYy
OyYjNjA7aW1nIHNyYz0mIzM0O2Fzdl9hbWF6b24yX3NJbWFnZVVybCYjMzQ7IC8mIzYyOyYj
NjA7YnIgLyYjNjI7YXN2X2FtYXpvbjJfdGl0bGUmIzYwOy9hJiM2MjsKPC9jb2RlPjwvcHJl
PgoKCTxwPnJldHVybnM6PC9wPgoKPHByZT48Y29kZT4mIzYwO2EgaHJlZj0mIzM0O2h0dHA6
Ly93d3cuYW1hem9uLmNvbS9ncC9yZWRpcmVjdC5odG1sJTNGQVNJTj0xNTkwNTk4MzI2JTI2
dGFnPXdzJTI2bGNvZGU9eG0yJTI2Y0lEPTIwMjUlMjZjY21JRD0xNjU5NTMlMjZsb2NhdGlv
bj0vby9BU0lOLzE1OTA1OTgzMjYlMjUzRlN1YnNjcmlwdGlvbklkPTBZOEYxWVYxTjJZU0dK
MU1DMjAyJiMzNDsmIzYyOyYjNjA7aW1nIHNyYz0mIzM0O2h0dHA6Ly9lYzEuaW1hZ2VzLWFt
YXpvbi5jb20vaW1hZ2VzL0kvMDF5YXExZXRqS0wuanBnJiMzNDsgLyYjNjI7JiM2MDticiAv
JiM2MjtUZXh0cGF0dGVybiBTb2x1dGlvbnM6IFBIUC1CYXNlZCBDb250ZW50IE1hbmFnZW1l
bnQgTWFkZSBFYXN5IChTb2x1dGlvbnMpJiM2MDsvYSYjNjI7CndoaWNoIHdpbGwgZGlzcGxh
eSBsaWtlIHRoaXM6CjwvY29kZT48L3ByZT4KCgk8cD48YSBocmVmPSJodHRwOi8vd3d3LmFt
YXpvbi5jb20vZ3AvcmVkaXJlY3QuaHRtbCUzRkFTSU49MTU5MDU5ODMyNiUyNnRhZz13cyUy
Nmxjb2RlPXhtMiUyNmNJRD0yMDI1JTI2Y2NtSUQ9MTY1OTUzJTI2bG9jYXRpb249L28vQVNJ
Ti8xNTkwNTk4MzI2JTI1M0ZTdWJzY3JpcHRpb25JZD0wWThGMVlWMU4yWVNHSjFNQzIwMiI+
PGltZyBzcmM9Imh0dHA6Ly9lYzEuaW1hZ2VzLWFtYXpvbi5jb20vaW1hZ2VzL0kvMDF5YXEx
ZXRqS0wuanBnIiAvPjxiciAvPgpUZXh0cGF0dGVybiBTb2x1dGlvbnM6IFBIUC1CYXNlZCBD
b250ZW50IE1hbmFnZW1lbnQgTWFkZSBFYXN5IChTb2x1dGlvbnMpPC9hPjwvcD4iO3M6NDoi
Y29kZSI7czoyNDU3MToiLy8gYXN2X2FtYXpvbjIKLy8gRGVzaWduZWQgYXJvdW5kIHRoZSBu
ZWVkIHRvIGluY2x1ZGUgaXRlbXMgZnJvbSBBbWF6b24gaW4geW91ciB3ZWJzaXRlCi8vLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQoKaWYoJ2FkbWluJyA9PSBAdHhwaW50ZXJmYWNlKQp7CglhZGRfcHJpdnMoJ2Fzdl9h
bWF6b24yJywnMSwyLDMsNCcpOyAvLyBBbGxvdyBvbmx5IHVzZXJsZXZlbHMgMSwyLDMsNCBh
Y2VzcyB0byB0aGlzIHBsdWdpbi4KCXJlZ2lzdGVyX3RhYignZXh0ZW5zaW9ucycsICdhc3Zf
YW1hem9uMicsICJBbWF6b24gU2V0dGluZ3MiKTsKCXJlZ2lzdGVyX2NhbGxiYWNrKCJhc3Zf
YW1hem9uMiIsICJhc3ZfYW1hem9uMiIpOwoKCXJlZ2lzdGVyX2NhbGxiYWNrKCdhc3ZfYW1h
em9uX2JhY2tlbmQnLCAnYXJ0aWNsZScpOwoJcmVnaXN0ZXJfY2FsbGJhY2soJ2Fzdl9hbWF6
b25fYmFja2VuZCcsICdwYWdlJyk7CglyZWdpc3Rlcl9jYWxsYmFjaygnYXN2X2FtYXpvbl9i
YWNrZW5kJywgJ2Zvcm0nKTsKCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKaWYoZ3BzKCdhc3ZfYW1hem9uMl9h
Y3Rpb24nKSAmJiBncHMoJ2Fzdl9rZXl3b3JkcycpKQp7CgkkYXN2X2FtYXpvbiA9IG5ldyBh
c3ZfQW1hem9uKCJVUyIpOwoJaGVhZGVyKCdDb250ZW50LVR5cGU6IHRleHQveG1sJyk7Cgll
Y2hvICRhc3ZfYW1hem9uLT5yZXF1ZXN0SXRlbXMoYXJyYXkoCgkJCQkJCQkJIktleXdvcmRz
IiA9PiBncHMoJ2Fzdl9rZXl3b3JkcycpLAoJCQkJCQkJCSJTZWFyY2hJbmRleCIgPT4gZ3Bz
KCdhc3Zfc2VhcmNoaW5kZXgnKSwKCQkJCQkJCQkiSXRlbVBhZ2UiID0+IGdwcygnYXN2X2l0
ZW1wYWdlJyksCgkJCQkJCQkJIk9wZXJhdGlvbiIgPT4gIkl0ZW1TZWFyY2giCgkJCQkJCQkp
KTsKCWV4aXQ7Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZnVuY3Rpb24gYXN2X2FtYXpvbjIoJGV2ZW50LCAk
c3RlcCkKewoJcGFnZXRvcCgnQW1hem9uIENhY2hlIFNldHRpbmdzJyk7CgoJJGFzdl9hbWF6
b25fY2FjaGVkaXIgPSAnJzsKCSRhc3ZfYW1hem9uX2NhY2hlZHVybCA9ICcnOwoKCglpZigk
c3RlcCA9PSAnc2F2ZScpCgl7CgkJc2V0X3ByZWYoJ2Fzdl9hbWF6b25fY2FjaGVkaXInLCBn
cHMoJ2Fzdl9hbWF6b25fY2FjaGVkaXInKSwnJywnJyk7CgkJc2V0X3ByZWYoJ2Fzdl9hbWF6
b25fY2FjaGV1cmwnLCBncHMoJ2Fzdl9hbWF6b25fY2FjaGV1cmwnKSwnJywnJyk7Cgl9CgoJ
ZXh0cmFjdChnZXRfcHJlZnMoKSk7CgoJZWNobyBzdGFydFRhYmxlKCdsaXN0JykudHIodGQo
Zm9ybSgKCQkJCWdyYWYodGFnKCdQYXRoIHRvIGNhY2hlOiAnLCAnbGFiZWwnKS4KCQkJCQlm
SW5wdXQoJ3RleHQnLCAnYXN2X2FtYXpvbl9jYWNoZWRpcicsICRhc3ZfYW1hem9uX2NhY2hl
ZGlyLCAnZWRpdCcsICcnLCAnJywgMzApKS4KCQkJCWdyYWYodGFnKCdVUkwgdG8gY2FjaGU6
ICcsICdsYWJlbCcpLgoJCQkJCWZJbnB1dCgndGV4dCcsICdhc3ZfYW1hem9uX2NhY2hldXJs
JywgJGFzdl9hbWF6b25fY2FjaGV1cmwsICdlZGl0JywgJycsICcnLCAzMCkpLgoJCQkJZUlu
cHV0KCdhc3ZfYW1hem9uMicpLgoJCQkJc0lucHV0KCdzYXZlJykuCgkJIAkJZ3JhZihmSW5w
dXQoJ3N1Ym1pdCcsICcnLCBnVHh0KCdTYXZlJyksICcnKSkKCQkJCSkpKS5lbmRUYWJsZSgp
Owp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KCmZ1bmN0aW9uIGFzdl9hbWF6b24yX2Rpc3BsYXkoJGF0dHMsJHRo
aW5nKQp7CglleHRyYWN0KGxBdHRzKGFycmF5KAoJCSd1cmwnID0+ICcnLAoJCSdzbWFsbGlt
YWdlJyA9PiAnJywKCQknbWVkaXVtaW1hZ2UnID0+ICcnLAoJCSdsYXJnZWltYWdlJyA9PiAn
JywKCQknYXNpbicgPT4gJycsCgkJJ3RpdGxlJyA9PiAnJywKCQknZm9ybScgPT4gJycsCgkJ
J2NhY2hlJyA9PiAnJywKCQknbG9jYWxlJyA9PiAnVVMnCgkpLCAkYXR0cykpOwoKCWlmKCRh
c2luKQoJewoJCSRkb2NhY2hlID0gKCRjYWNoZT09InkiKT8gdHJ1ZTogZmFsc2U7CgkJJGFz
dl9hbWF6b25fcmVxdWVzdCA9IG5ldyBhc3ZfQW1hem9uKCRsb2NhbGUpOwoJCSRhc3ZfYW1h
em9uMl9jb250ZW50cyA9ICRhc3ZfYW1hem9uX3JlcXVlc3QtPnJlcXVlc3RJdGVtKGFycmF5
KAoJCQkJCQkJCQkJIkl0ZW1JZCIgPT4gJGFzaW4sCgkJCQkJCQkJCQkiT3BlcmF0aW9uIiA9
PiAiSXRlbUxvb2t1cCIKCQkJCQkJCQkJKSwgJGRvY2FjaGUpOwoKCgkJJHVybCA9ICRhc3Zf
YW1hem9uMl9jb250ZW50c1siYXN2X0RldGFpbFBhZ2VVUkwiXTsKCQkkc21hbGxpbWFnZSA9
ICRhc3ZfYW1hem9uMl9jb250ZW50c1siYXN2X1NtYWxsSW1hZ2VVUkwiXTsKCQkkbWVkaXVt
aW1hZ2UgPSAkYXN2X2FtYXpvbjJfY29udGVudHNbImFzdl9NZWRpdW1JbWFnZVVSTCJdOwoJ
CSRsYXJnZWltYWdlID0gJGFzdl9hbWF6b24yX2NvbnRlbnRzWyJhc3ZfTGFyZ2VJbWFnZVVS
TCJdOwoJCSR0aXRsZSA9ICRhc3ZfYW1hem9uMl9jb250ZW50c1siYXN2X1RpdGxlIl07Cgl9
CgoJaWYoJGZvcm0pCgl7CgkJJHRoaW5nID0gZmV0Y2hfZm9ybSgkZm9ybSk7Cgl9CglpZigk
dGhpbmcpCgl7CgoJCSR0aGluZyA9IHN0cl9yZXBsYWNlKCdhc3ZfdXJsJywgJHVybCwgJHRo
aW5nKTsKCQkkdGhpbmcgPSBzdHJfcmVwbGFjZSgnYXN2X3NJbWFnZVVybCcsICRzbWFsbGlt
YWdlLCAkdGhpbmcpOwoJCSR0aGluZyA9IHN0cl9yZXBsYWNlKCdhc3ZfbUltYWdlVXJsJywg
JG1lZGl1bWltYWdlLCAkdGhpbmcpOwoJCSR0aGluZyA9IHN0cl9yZXBsYWNlKCdhc3ZfbElt
YWdlVXJsJywgJGxhcmdlaW1hZ2UsICR0aGluZyk7CgkJJHRoaW5nID0gc3RyX3JlcGxhY2Uo
J2Fzdl9hc2luJywgJGFzaW4sICR0aGluZyk7CgkJJHRoaW5nID0gc3RyX3JlcGxhY2UoJ2Fz
dl90aXRsZScsICR0aXRsZSwgJHRoaW5nKTsKCgkJJHRoaW5nID0gc3RyX3JlcGxhY2UoJ2Fz
dl9hbWF6b24yX3VybCcsICR1cmwsICR0aGluZyk7CgkJJHRoaW5nID0gc3RyX3JlcGxhY2Uo
J2Fzdl9hbWF6b24yX3NJbWFnZVVybCcsICRzbWFsbGltYWdlLCAkdGhpbmcpOwoJCSR0aGlu
ZyA9IHN0cl9yZXBsYWNlKCdhc3ZfYW1hem9uMl9tSW1hZ2VVcmwnLCAkbWVkaXVtaW1hZ2Us
ICR0aGluZyk7CgkJJHRoaW5nID0gc3RyX3JlcGxhY2UoJ2Fzdl9hbWF6b24yX2xJbWFnZVVy
bCcsICRsYXJnZWltYWdlLCAkdGhpbmcpOwoJCSR0aGluZyA9IHN0cl9yZXBsYWNlKCdhc3Zf
YW1hem9uMl9hc2luJywgJGFzaW4sICR0aGluZyk7CgkJJHRoaW5nID0gc3RyX3JlcGxhY2Uo
J2Fzdl9hbWF6b24yX3RpdGxlJywgJHRpdGxlLCAkdGhpbmcpOwoKCQkkdGhpbmcgPSBzdHJf
cmVwbGFjZSgnYXN2X0RldGFpbFBhZ2VVUkwnLCAkdXJsLCAkdGhpbmcpOwoJCSR0aGluZyA9
IHN0cl9yZXBsYWNlKCdhc3ZfU21hbGxJbWFnZVVSTCcsICRzbWFsbGltYWdlLCAkdGhpbmcp
OwoJCSR0aGluZyA9IHN0cl9yZXBsYWNlKCdhc3ZfTWVkaXVtSW1hZ2VVUkwnLCAkbWVkaXVt
aW1hZ2UsICR0aGluZyk7CgkJJHRoaW5nID0gc3RyX3JlcGxhY2UoJ2Fzdl9MYXJnZUltYWdl
VVJMJywgJGxhcmdlaW1hZ2UsICR0aGluZyk7CgkJJHRoaW5nID0gc3RyX3JlcGxhY2UoJ2Fz
dl9UaXRsZScsICR0aXRsZSwgJHRoaW5nKTsKCX0KCWVsc2UKCXsKCQkkdGhpbmcgPSAgIjxh
IGhyZWY9XCIiLiR1cmwuIlwiPjxpbWcgc3JjPVwiIi4kc21hbGxpbWFnZS4iXCIgLz48YnIg
Lz4iLiR0aXRsZS4iPC9hPjxiciAvPiI7Cgl9CgoJcmV0dXJuICR0aGluZzsKfQoKLy8tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tCgpmdW5jdGlvbiBhc3ZfYW1hem9uX2JhY2tlbmQgKCRldmVudCwgJHN0ZXApCnsKCSRh
c3ZfYW1hem9uMl9sb2NhdGlvbiA9ICcnOwoJJGFzdl9hbWF6b24yX3RleHRhcmVhPSAnJzsK
Cglzd2l0Y2goJGV2ZW50KXsKCQljYXNlICJhcnRpY2xlIjoKCQkJJGFzdl9hbWF6b24yX2xv
Y2F0aW9uID0gImFkdmFuY2VkIjsKCQkJJGFzdl9hbWF6b24yX3RleHRhcmVhID0gImJvZHki
OwoJCQlicmVhazsKCQljYXNlICJwYWdlIjoKCQkJJGFzdl9hbWF6b24yX2xvY2F0aW9uID0g
Im1pc2MtdGFncyI7CgkJCSRhc3ZfYW1hem9uMl90ZXh0YXJlYSA9ICJodG1sIjsKCQkJYnJl
YWs7CgkJY2FzZSAiZm9ybSI6CgkJCSRhc3ZfYW1hem9uMl9sb2NhdGlvbiA9ICJhcnRpY2xl
LXRhZ3MiOwoJCQkkYXN2X2FtYXpvbjJfdGV4dGFyZWEgPSAiZm9ybSI7CgkJCWJyZWFrOwoJ
fQoKCSRhc3Zfc2VhcmNoSW5kZXggPSBhcnJheSgiQXBwYXJlbCIsICJCYWJ5IiwgIkJsZW5k
ZWQiLCAiQm9va3MiLCAiQ2xhc3NpY2FsIiwgIkRWRCIsICJEaWdpdGFsTXVzaWMiLCAiRWxl
Y3Ryb25pY3MiLCAiR291cm1ldEZvb2QiLCAiSGVhbHRoUGVyc29uYWxDYXJlIiwgIkpld2Vs
cnkiLCAiS2l0Y2hlbiIsICJNYWdhemluZXMiLCAiTWVyY2hhbnRzIiwgIk1pc2NlbGxhbmVv
dXMiLCAiTXVzaWMiLCAiTXVzaWNUcmFja3MiLCAiTXVzaWNhbEluc3RydW1lbnRzIiwgIk9m
ZmljZVByb2R1Y3RzIiwgIk91dGRvb3JMaXZpbmciLCAiUENIYXJkd2FyZSIsICJQZXRTdXBw
bGllcyIsICJQaG90byIsICJSZXN0YXVyYW50cyIsICJTb2Z0d2FyZSIsICJTcG9ydGluZ0dv
b2RzIiwgIlRvb2xzIiwgIlRveXMiLCAiVkhTIiwgIlZpZGVvIiwgIlZpZGVvR2FtZXMiLCAi
V2lyZWxlc3NBY2Nlc3NvcmllcyIpOwoKCSRsaW5lID0gIjxoMyBjbGFzcz1cInBsYWluXCI+
IjsKCgkkbGluZSAuPSAiPGEgaHJlZj1cIiNhc3ZfYW1hem9uMlwiIG9uY2xpY2s9XCIkKCcj
YXN2X2FtYXpvbjJ3cmFwcGVyJykuc2xpZGVUb2dnbGUoJ3Nsb3cnKTsgcmV0dXJuIGZhbHNl
O1wiPkFtYXpvbjwvYT4iOwoKCSRsaW5lIC49ICI8L2gzPiI7CgoJJGZvcm0gPSAiPGZvcm0g
b25TdWJtaXQ9XCJhc3ZfbG9hZFJlc3VsdHMoKTsgcmV0dXJuIGZhbHNlO1wiPjxoMz5BbWF6
b248L2gzPjxwIGlkPVwiYXN2X2FtYXpvbjJfY2xvc2VcIj48YSBocmVmPVwiI1wiIG9uY2xp
Y2s9XCIkKCcjYXN2X2FtYXpvbjJ3cmFwcGVyJykuc2xpZGVUb2dnbGUoJ3Nsb3cnKTsgcmV0
dXJuIGZhbHNlO1wiPmNsb3NlPC9hPjwvcD48ZmllbGRzZXQ+PGxlZ2VuZD5TZWFyY2g8L2xl
Z2VuZD4iLgoKCQlncmFmKCI8bGFiZWwgZm9yPVwiYXN2X1NlYXJjaEluZGV4XCI+Q2hvb3Nl
IGEgY2F0ZWdvcnk8L2xhYmVsPjxiciAvPiIuCgoJCQlzZWxlY3RJbnB1dCgnYXN2X1NlYXJj
aEluZGV4JywgJGFzdl9zZWFyY2hJbmRleCwgJGFzdl9zZWFyY2hJbmRleCwgZmFsc2UsJycs
J2Fzdl9TZWFyY2hJbmRleCcpKS4KCgkJZ3JhZigiPGxhYmVsIGZvcj1cImFzdl9LZXl3b3Jk
c1wiPktleXdvcmRzPC9sYWJlbD48YnIgLz4iLgoKCQkJZklucHV0KCd0ZXh0JywgJ2Fzdl9L
ZXl3b3JkcycsICcnLCAnZWRpdCcsICcnLCAnJywgJzIwJywgICcnLCAnYXN2X0tleXdvcmRz
JykpLgoKCQlmSW5wdXQoJ3N1Ym1pdCcsJ2Fzdl9TZWFyY2gnLCdTZWFyY2gnLCJwdWJsaXNo
IiwgJycsICdhc3ZfbG9hZFJlc3VsdHMoKTtyZXR1cm4gZmFsc2U7JywgJycsICcnKS4KCgkJ
ZklucHV0KCdidXR0b24nLCdhc3ZfQ2FuY2VsJywnQ2FuY2VsJywicHVibGlzaCIsICcnLCAn
YXN2X2NhbmNlbFJlc3VsdHMoKTtyZXR1cm4gZmFsc2U7JywgJycsICcnKS4KCgkJIjwvZmll
bGRzZXQ+PC9mb3JtPiI7CgoJJGxpbmUgLj0gIjxkaXYgaWQ9XCJhc3ZfYW1hem9uMndyYXBw
ZXJcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiID48ZGl2IGlkPVwiYXN2X2FtYXpvbjJcIiA+
JGZvcm08L2Rpdj48ZGl2IGlkPVwiYXN2X2FtYXpvbjJmb3JtXCIgc3R5bGU9XCJkaXNwbGF5
Om5vbmVcIj48L2Rpdj48ZGl2IGlkPVwiYXN2X2FtYXpvbjJSZXN1bHRzXCIgc3R5bGU9XCJk
aXNwbGF5Om5vbmVcIj48L2Rpdj48L2Rpdj4iOwoKCSRsaW5lID0gYXN2X3NhZmVKUygkbGlu
ZSk7CgoJJHJzID0gc2FmZV9jb2x1bW4oJ25hbWUnLCAndHhwX2Zvcm0nLCAidHlwZSA9ICdt
aXNjJyIpOwoKCSRmb3JtcyA9ICc8cD48bGFiZWwgZm9yPSJhc3ZfYW1hem9uMl90YWd0eXBl
Ij5UeXBlPC9sYWJlbD46ICcuc2VsZWN0SW5wdXQoJ2Fzdl9hbWF6b24yX3RhZ3R5cGUnLCBh
cnJheSgnZm9ybScsICdmb3JtIChjYWNoZWQpJywgJ2hhcmRjb2RlJyksIGFycmF5KCdmb3Jt
JywgJ2Zvcm0gKGNhY2hlZCknLCAnaGFyZGNvZGUnKSwgZmFsc2UsICcnLCAnYXN2X2FtYXpv
bjJfdGFndHlwZScpLic8L3A+JzsKCgkkZm9ybXMgLj0gJzxwPjxsYWJlbCBmb3I9ImFzdl9h
bWF6b24yX2Zvcm0iPkZvcm08L2xhYmVsPjogJzsKCglpZiAoJHJzKQoJewoJCSRmb3JtcyAu
PSBzZWxlY3RJbnB1dCgnYXN2X2FtYXpvbjJfZm9ybScsICRycywgJGZvcm0sIHRydWUsICcn
LCAnYXN2X2FtYXpvbjJfZm9ybScpLic8L3A+JzsKCX0KCWVsc2UKCXsKCQkkZm9ybXMgLj0g
JzxzZWxlY3QgaWQ9ImFzdl9hbWF6b24yX2Zvcm0iPjxvcHRpb24gLz48L3NlbGVjdD48L3A+
JzsKCX0KCSRhc3ZfYW1hem9uMl9pbWFnZXNpemUgPSBhcnJheSgnc21hbGwnLCAnbWVkaXVt
JywgJ2xhcmdlJyk7CgoJJGZvcm1zID0gYXN2X3NhZmVKUygkZm9ybXMpOwoKCSRqcyA9IDw8
PEVPRgo8c2NyaXB0IGxhbmd1YWdlPSJKYXZhU2NyaXB0IiBTUkM9Ii90ZXh0cGF0dGVybi9q
cXVlcnkuanMiPgo8L3NjcmlwdD4KPHNjcmlwdCBsYW5ndWFnZT0iamF2YXNjcmlwdCIgdHlw
ZT0idGV4dC9qYXZhc2NyaXB0Ij4KPCEtLQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vQXR0YWNoIHRoZSBhbWF6
b24yIHBsdWdpbiB0byB0aGUgcGFnZQoKICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkg
ewoJJCgiJGxpbmUiKS5pbnNlcnRCZWZvcmUoJCgiIyRhc3ZfYW1hem9uMl9sb2NhdGlvbiIp
LnByZXYoKSk7CgoJJCgiI2Fzdl9hbWF6b24yd3JhcHBlciIpLmNzcygicG9zaXRpb24iLCAi
YWJzb2x1dGUiKTsKCSQoIiNhc3ZfYW1hem9uMndyYXBwZXIiKS5jc3MoInRvcCIsICI4MHB4
Iik7CgkkKCIjYXN2X2FtYXpvbjJ3cmFwcGVyIikuY3NzKCJyaWdodCIsICIwcHgiKTsKCSQo
IiNhc3ZfYW1hem9uMndyYXBwZXIiKS5jc3MoIndpZHRoIiwgIjIwMHB4Iik7CgkkKCIjYXN2
X2FtYXpvbjJ3cmFwcGVyIikuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIiwgIiNmZmZmY2MiKTsK
CSQoIiNhc3ZfYW1hem9uMndyYXBwZXIiKS5jc3MoInBhZGRpbmciLCAiMjBweCIpOwoJJCgi
I2Fzdl9hbWF6b24yd3JhcHBlciBoMyIpLmNzcygiZmxvYXQiLCAibGVmdCIpOwoJJCgiI2Fz
dl9hbWF6b24yd3JhcHBlciBoMyIpLmNzcygiZGlzcGxheSIsICJpbmxpbmUiKTsKCSQoIiNh
c3ZfYW1hem9uMl9jbG9zZSIpLmNzcygidGV4dC1hbGlnbiIsICJyaWdodCIpOwogICB9KTsK
Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQoKZnVuY3Rpb24gYXN2X2xvYWRSZXN1bHRzKCkKewoJdmFyIGtleXdvcmRz
ID0JJCgiI2Fzdl9LZXl3b3JkcyIpLnZhbCgpOwoJdmFyIHNlYXJjaGluZGV4ID0gJCgiI2Fz
dl9TZWFyY2hJbmRleCBvcHRpb25bQHNlbGVjdGVkXSIpLnRleHQoKTsKCWFzdl9yZXF1ZXN0
KGtleXdvcmRzLCBzZWFyY2hpbmRleCwgJzEnKTsKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpmdW5jdGlvbiBh
c3ZfcmVxdWVzdChrZXl3b3Jkcywgc2VhcmNoaW5kZXgsIGl0ZW1wYWdlKXsKCSQoJyNhc3Zf
YW1hem9uMmZvcm0nKS5odG1sKCc8ZmllbGRzZXQ+PGxlZ2VuZD5PcHRpb25zPC9sZWdlbmQ+
PGZvcm0+JGZvcm1zPC9mb3JtPicpOwoJJCgnI2Fzdl9hbWF6b24yUmVzdWx0cycpLmh0bWwo
JzxmaWVsZHNldD48bGVnZW5kPlJlc3VsdHM8L2xlZ2VuZD48ZGl2IGlkPSJhc3ZfYW1hem9u
MlJlc3VsdHNEYXRhIj48cCA+bG9hZGluZy4uLjwvcD48L2Rpdj48L2ZpZWxkc2V0PicpOwoJ
JCgiI2Fzdl9hbWF6b24yUmVzdWx0c0RhdGEiKS5jc3MoInBhZGRpbmciLCAiMHB4IDBweCAx
MHB4IDBweCIpOwoJJCgnI2Fzdl9hbWF6b24yZm9ybScpLnNob3coJ3Nsb3cnKTsKCSQoJyNh
c3ZfYW1hem9uMlJlc3VsdHMnKS5zaG93KCdzbG93Jyk7CgoJJC5nZXQoJ2luZGV4LnBocCcs
CgkgCXthc3ZfYW1hem9uMl9hY3Rpb246ICIxIiwgYXN2X2tleXdvcmRzOiBlc2NhcGUoa2V5
d29yZHMpLCBhc3Zfc2VhcmNoaW5kZXg6IGVzY2FwZShzZWFyY2hpbmRleCksIGFzdl9pdGVt
cGFnZTogaXRlbXBhZ2UgfSwKCSAgIGFzdl9wYXJzZVJlc3BvbnNlLAoJICAgInhtbCIKCSAp
Owp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KCmZ1bmN0aW9uIGFzdl9wYXJzZVJlc3BvbnNlKHhtbCkKewoJdmFy
IGl0ZW1QYWdlID0gJCgnSXRlbVBhZ2UnLCB4bWwpLnRleHQoKTsKCXZhciBzZWFyY2hpbmRl
eCA9ICQoJ1NlYXJjaEluZGV4JywgeG1sKS50ZXh0KCk7Cgl2YXIgdG90YWxQYWdlcyA9ICQo
J1RvdGFsUGFnZXMnLCB4bWwpLnRleHQoKTsKCXZhciBrZXl3b3JkcyA9ICQoJ0tleXdvcmRz
JywgeG1sKS50ZXh0KCk7Cgl2YXIgbGluZSA9IiI7CgoJbGluZSArPSBhc3ZfcHJldm5leHRf
bGluayhrZXl3b3Jkcywgc2VhcmNoaW5kZXgsIGl0ZW1QYWdlLCB0b3RhbFBhZ2VzLCAidG9w
Iik7CgoKCSQoeG1sKS5maW5kKCdJdGVtJykuZWFjaChmdW5jdGlvbigpewoJCXZhciB0aXRs
ZSA9ICQoJ1RpdGxlJyx0aGlzKS50ZXh0KCk7CgkJdmFyIHNJbWFnZVVSTCA9ICQoIlNtYWxs
SW1hZ2UgPiBVUkwiLHRoaXMpLnRleHQoKTsKCQl2YXIgbUltYWdlVVJMID0gJCgiTWVkaXVt
SW1hZ2UgPiBVUkwiLHRoaXMpLnRleHQoKTsKCQl2YXIgbEltYWdlVVJMID0gJCgiTGFyZ2VJ
bWFnZSA+IFVSTCIsdGhpcykudGV4dCgpOwoJCXZhciB1cmwgPSAkKCdEZXRhaWxQYWdlVVJM
Jyx0aGlzKS50ZXh0KCk7CgkJdmFyIGFzaW4gPSAkKCdBU0lOJyx0aGlzKS50ZXh0KCk7CgoK
CQl2YXIgYW1hem9uSFRNTCA9ICc8YSBocmVmPSInK3VybCsnIj48aW1nIHNyYz0iJysgc0lt
YWdlVVJMICsnIiBzdHlsZT0iZGlzcGxheTogYmxvY2s7bWFyZ2luLWxlZnQ6IGF1dG87bWFy
Z2luLXJpZ2h0OiBhdXRvOyIvPjxzcGFuIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXIiPicg
KyB0aXRsZSArICc8L3NwYW4+PC9hPicgOwoKCQl2YXIgZm9ybSA9ICc8Zm9ybSBpZD0iYXN2
X2FtYXpvbjJfJythc2luKyciPicgKwoJCQkJCSc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1l
PSJhc3ZfYW1hem9uMl90aXRsZSIgdmFsdWU9IicrdGl0bGUrJyIgLz4nICsKCQkJCQknPGlu
cHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYXN2X2FtYXpvbjJfc0ltYWdlVVJMIiB2YWx1ZSA9
Iicrc0ltYWdlVVJMKyciIC8+JyArCgkJCQkJJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9
ImFzdl9hbWF6b24yX21JbWFnZVVSTCIgdmFsdWUgPSInK21JbWFnZVVSTCsnIiAvPicgKwoJ
CQkJCSc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJhc3ZfYW1hem9uMl9sSW1hZ2VVUkwi
IHZhbHVlID0iJytsSW1hZ2VVUkwrJyIgLz4nICsKCQkJCQknPGlucHV0IHR5cGU9ImhpZGRl
biIgbmFtZT0iYXN2X2FtYXpvbjJfdXJsIiB2YWx1ZSA9IicrdXJsKyciIC8+JyArCgkJCQkJ
JzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImFzdl9hbWF6b24yX2FzaW4iIHZhbHVlID0i
Jythc2luKyciIC8+JyArCgkJCQkJJzxpbnB1dCB0eXBlPSJidXR0b24iIGlkPSJhc3ZfYW1h
em9uMl9hZGRfJythc2luKyciIHN0eWxlPSJmbG9hdDpyaWdodCIgb25jbGljaz0iYXN2X2Ft
YXpvbjJfYWRkdG9Cb2R5KHRoaXMucGFyZW50Tm9kZSkiIGNsYXNzPSJwdWJsaXNoIiB2YWx1
ZT0iYWRkIiAvPicrICAnPC9mb3JtPic7CgoJCWxpbmUgKz0gJzxwPicgKyBmb3JtICsgYW1h
em9uSFRNTCAgKyAnPC9wPic7CiAgICB9KTsKCglsaW5lICs9IGFzdl9wcmV2bmV4dF9saW5r
KGtleXdvcmRzLCBzZWFyY2hpbmRleCwgaXRlbVBhZ2UsIHRvdGFsUGFnZXMsICJib3R0b20i
KTsKCiAgICAkKCIjYXN2X2FtYXpvbjJSZXN1bHRzRGF0YSIpLmh0bWwobGluZSk7CgkkKCIj
YXN2X2FtYXpvbjJSZXN1bHRzRGF0YSIpLmNzcygibWF4LWhlaWdodCIsICI1MDBweCIpOwoJ
JCgiI2Fzdl9hbWF6b24yUmVzdWx0c0RhdGEiKS5jc3MoIm92ZXJmbG93IiwgImF1dG8iKTsK
CSQoIiNhc3ZfYW1hem9uMlJlc3VsdHNEYXRhIikuY3NzKCJwYWRkaW5nIiwgIjBweCAwcHgg
MTBweCAwcHgiKTsKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgokLmZuLmFwcGVuZFZhbCA9IGZ1bmN0aW9uKHR4
dCkgewogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpewogICAgICAgIHRoaXMudmFs
dWUgKz0gdHh0OwogICAgfSk7Cn07CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgpmdW5jdGlvbiBhc3ZfYW1hem9u
Ml9hZGR0b0JvZHkoZWxlbSkKewoJdmFyIHRpdGxlID0gJCgnaW5wdXQ6aGlkZGVuW0BuYW1l
PWFzdl9hbWF6b24yX3RpdGxlXScsIGVsZW0pLnZhbCgpOwoJdmFyIHNJbWFnZVVSTCA9ICQo
J2lucHV0OmhpZGRlbltAbmFtZT1hc3ZfYW1hem9uMl9zSW1hZ2VVUkxdJywgZWxlbSkudmFs
KCk7Cgl2YXIgbUltYWdlVVJMID0gJCgnaW5wdXQ6aGlkZGVuW0BuYW1lPWFzdl9hbWF6b24y
X21JbWFnZVVSTF0nLCBlbGVtKS52YWwoKTsKCXZhciBsSW1hZ2VVUkwgPSAkKCdpbnB1dDpo
aWRkZW5bQG5hbWU9YXN2X2FtYXpvbjJfbEltYWdlVVJMXScsIGVsZW0pLnZhbCgpOwoJdmFy
IHVybCA9ICQoJ2lucHV0OmhpZGRlbltAbmFtZT1hc3ZfYW1hem9uMl91cmxdJywgZWxlbSku
dmFsKCk7Cgl2YXIgYXNpbiA9ICQoJ2lucHV0OmhpZGRlbltAbmFtZT1hc3ZfYW1hem9uMl9h
c2luXScsIGVsZW0pLnZhbCgpOwoJdmFyIGZvcm0gPSAkKCIjYXN2X2FtYXpvbjJfZm9ybSBv
cHRpb25bQHNlbGVjdGVkXSIpLnRleHQoKTsKCglzd2l0Y2goJCgiI2Fzdl9hbWF6b24yX3Rh
Z3R5cGUgb3B0aW9uW0BzZWxlY3RlZF0iKS50ZXh0KCkpCgl7CgkJY2FzZSAiaGFyZGNvZGUi
OgoJCQl2YXIgYXN2X3RhZyA9ICc8dHhwOmFzdl9hbWF6b24yX2Rpc3BsYXkgJzsKCQkJYXN2
X3RhZyArPSAodGl0bGUpPyAndGl0bGU9IicrdGl0bGUrJyIgJyA6ICIiOwoJCQlhc3ZfdGFn
ICs9IChzSW1hZ2VVUkwpPyAnc21hbGxpbWFnZT0iJytzSW1hZ2VVUkwrJyIgJyA6ICIiOwoJ
CQlhc3ZfdGFnICs9IChtSW1hZ2VVUkwpPyAnbWVkaXVtaW1hZ2U9IicrbUltYWdlVVJMKyci
ICcgOiAiIjsKCQkJYXN2X3RhZyArPSAobEltYWdlVVJMKT8gJ2xhcmdlaW1hZ2U9IicrbElt
YWdlVVJMKyciICcgOiAiIjsKCQkJYXN2X3RhZyArPSAodXJsKT8gJ3VybD0iJyt1cmwrJyIg
JyA6ICIiOwoJCQlhc3ZfdGFnICs9IChmb3JtKT8gJ2Zvcm09IicrZm9ybSsnIiAnIDogIiI7
CgkJCWFzdl90YWcgKz0gJyAvPic7CgkJCWJyZWFrOwoJCWNhc2UgImZvcm0iOgoJCQl2YXIg
YXN2X3RhZyA9ICc8dHhwOmFzdl9hbWF6b24yX2Rpc3BsYXkgJzsKCQkJYXN2X3RhZyArPSAo
YXNpbik/ICdhc2luPSInK2FzaW4rJyIgJyA6ICIiOwoJCQlhc3ZfdGFnICs9IChmb3JtKT8g
J2Zvcm09IicrZm9ybSsnIiAnIDogIiI7CgkJCWFzdl90YWcgKz0gJyAvPic7CgkJCWJyZWFr
OwoJCWNhc2UgImZvcm0gKGNhY2hlZCkiOgoJCQl2YXIgYXN2X3RhZyA9ICc8dHhwOmFzdl9h
bWF6b24yX2Rpc3BsYXkgJzsKCQkJYXN2X3RhZyArPSAoYXNpbik/ICdhc2luPSInK2FzaW4r
JyIgJyA6ICIiOwoJCQlhc3ZfdGFnICs9IChmb3JtKT8gJ2Zvcm09IicrZm9ybSsnIiAnIDog
IiI7CgkJCWFzdl90YWcgKz0gJ2NhY2hlPSJ5Iic7CgkJCWFzdl90YWcgKz0gJyAvPic7CgkJ
CWJyZWFrOwoJfQoJLy9lZEluc2VydENvbnRlbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQo
JyRhc3ZfYW1hem9uMl90ZXh0YXJlYScpLCBhc3ZfdGFnKTsKCgkkKCcjJGFzdl9hbWF6b24y
X3RleHRhcmVhJykuaW5zZXJ0QXRDYXJldChhc3ZfdGFnKTsKfQoKLy8tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpmdW5j
dGlvbiBhc3ZfYW1hem9uMl9hZGR0b0JvZHlfUmVzcG9uc2UocmVzcG9uc2UpCnsKCWluc2Vy
dEF0Q2FyZXQoJCgnIyRhc3ZfYW1hem9uMl90ZXh0YXJlYScpLCByZXNwb25zZSk7Cn0KCi8v
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQoKZnVuY3Rpb24gYXN2X2NhbmNlbFJlc3VsdHMoKQp7CgkkKCcjYXN2X2FtYXpv
bjJSZXN1bHRzJykuc2xpZGVVcCgnc2xvdycpOwoJJCgnI2Fzdl9hbWF6b24yZm9ybScpLnNs
aWRlVXAoJ3Nsb3cnKTsKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpmdW5jdGlvbiBhc3ZfcHJldm5leHRfbGlu
ayhrZXl3b3Jkcywgc2VhcmNoaW5kZXgsIGl0ZW1QYWdlLCB0b3RhbFBhZ2VzLCBsb2MpCnsK
CWxpbmUgPSAnJzsKCglpZihwYXJzZUludCh0b3RhbFBhZ2VzKT4xKQoJewoJCWlmKGxvYz09
ImJvdHRvbSIpIGxpbmUrPSc8aHIgLz4nOwoKCQlsaW5lKz0nPHAgc3R5bGU9InRleHQtYWxp
Z246IGNlbnRlcjsiPic7CgoJCWl0ZW1QYWdlID0gcGFyc2VJbnQoaXRlbVBhZ2UpOwoKCQl2
YXIgdGV4dCA9ICcnOwoKCQlpZihpdGVtUGFnZT4xKQoJCXsKCQkJdmFyIHBJdGVtUGFnZSA9
IGl0ZW1QYWdlIC0gMTsKCgkJCWxpbmUgKz0gJzxhIGhyZWY9IiMiIG9uY2xpY2s9ImFzdl9y
ZXF1ZXN0KFwnJytrZXl3b3JkcyArICdcJyxcJycgKyBzZWFyY2hpbmRleCArICdcJyxcJycr
IHBJdGVtUGFnZSsnXCcpO3JldHVybiBmYWxzZTsiPnByZXZpb3VzPC9hPiB8ICc7CgoJCX0K
CQlpZihpdGVtUGFnZTx0b3RhbFBhZ2VzKQoJCXsKCQkJdmFyIG5JdGVtUGFnZSA9IGl0ZW1Q
YWdlICsgMTsKCgkJCWxpbmUgKz0gJzxhIGhyZWY9IiMiIG9uY2xpY2s9ImFzdl9yZXF1ZXN0
KFwnJytrZXl3b3JkcyArICdcJyxcJycgKyBzZWFyY2hpbmRleCArICdcJyxcJycrIG5JdGVt
UGFnZSsnXCcpO3JldHVybiBmYWxzZTsiPm5leHQ8L2E+JzsKCgkJfQoKCQlsaW5lKz0nPC9w
Pic7CgoJCWlmKGxvYz09InRvcCIpIGxpbmUrPSc8aHIgLz4nOwoJfQoKCXJldHVybiBsaW5l
Owp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KCi8qKgogKiBJbnNlcnQgY29udGVudCBhdCBjYXJldCBwb3NpdGlv
biAoY29udmVydGVkIHRvIGpxdWVyeSBmdW5jdGlvbikKICogQGxpbmsgaHR0cDovL2FsZXhr
aW5nLm9yZy9ibG9nLzIwMDMvMDYvMDIvaW5zZXJ0aW5nLWF0LXRoZS1jdXJzb3ItdXNpbmct
amF2YXNjcmlwdAogKi8KJC5mbi5pbnNlcnRBdENhcmV0ID0gZnVuY3Rpb24gKG15VmFsdWUp
IHsKCXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXsKCQkvL0lFIHN1cHBvcnQKCQlpZiAo
ZG9jdW1lbnQuc2VsZWN0aW9uKSB7CgkJCXRoaXMuZm9jdXMoKTsKCQkJc2VsID0gZG9jdW1l
bnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7CgkJCXNlbC50ZXh0ID0gbXlWYWx1ZTsKCQkJ
dGhpcy5mb2N1cygpOwoJCX0KCQkvL01PWklMTEEvTkVUU0NBUEUgc3VwcG9ydAoJCWVsc2Ug
aWYgKHRoaXMuc2VsZWN0aW9uU3RhcnQgfHwgdGhpcy5zZWxlY3Rpb25TdGFydCA9PSAnMCcp
IHsKCQkJdmFyIHN0YXJ0UG9zID0gdGhpcy5zZWxlY3Rpb25TdGFydDsKCQkJdmFyIGVuZFBv
cyA9IHRoaXMuc2VsZWN0aW9uRW5kOwoJCQl2YXIgc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxU
b3A7CgkJCXRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cmluZygwLCBzdGFydFBvcykK
CQkJICAgICAgICAgICAgICArIG15VmFsdWUKCSAgICAgICAgICAgICAgICAgICAgICArIHRo
aXMudmFsdWUuc3Vic3RyaW5nKGVuZFBvcywgdGhpcy52YWx1ZS5sZW5ndGgpOwoJCQl0aGlz
LmZvY3VzKCk7CgkJCXRoaXMuc2VsZWN0aW9uU3RhcnQgPSBzdGFydFBvcyArIG15VmFsdWUu
bGVuZ3RoOwoJCQl0aGlzLnNlbGVjdGlvbkVuZCA9IHN0YXJ0UG9zICsgbXlWYWx1ZS5sZW5n
dGg7CgkJCXRoaXMuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wOwoJCX0gZWxzZSB7CgkJCXRoaXMu
dmFsdWUgKz0gbXlWYWx1ZTsKCQkJdGhpcy5mb2N1cygpOwoJCX0KCX0pOwoKfTsKCi8vLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQoKCi8vIC0tPgo8L3NjcmlwdD4KRU9GOwoJZWNobyAkanM7Cn0KCi8vLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoK
ZnVuY3Rpb24gYXN2X3NhZmVKUygkbGluZSkKewoJcmV0dXJuIHN0cl9yZXBsYWNlKCJcbiIs
ICIiLCBhZGRzbGFzaGVzKCRsaW5lKSk7Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKY2xhc3MgYXN2X0FtYXpv
bgp7Cgl2YXIgJGFwaV9rZXkgPSAiMFk4RjFZVjFOMllTR0oxTUMyMDIiOwoJdmFyICRjb250
ZW50VHlwZSA9ICJ0ZXh0JTJGeG1sIjsKCXZhciAkb3BlcmF0aW9uID0gIkl0ZW1TZWFyY2gi
OwoJdmFyICRzZXJ2aWNlID0gIkFXU0VDb21tZXJjZVNlcnZpY2UiOwoJdmFyICRiYXNlVVJM
ID0gImh0dHA6Ly9lY3MuYW1hem9uYXdzLmNvbS9vbmNhL3htbD8iOwoJdmFyICRzZWFyY2hJ
bmRleCA9ICJCbGVuZGVkIjsKCXZhciAkcmVzcG9uc2VHcm91cCA9ICJJbWFnZXMsU21hbGwi
OwoJdmFyICR2ZXJzaW9uID0gIjIwMDUtMDMtMjMiOwoKCXZhciAkbG9jYWxlOwoKCS8vLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQoKCWZ1bmN0aW9uIGFzdl9BbWF6b24oJGxvY2FsZSkKCXsKCQkkdGhpcy0+bG9jYWxl
ID0gJGxvY2FsZTsKCgkJc3dpdGNoKCRsb2NhbGUpCgkJewoJCQljYXNlICJVUyI6CgkJCQkk
dGhpcy0+YmFzZVVSTCA9ICJodHRwOi8vd2Vic2VydmljZXMuYW1hem9uLmNvbS9vbmNhL3ht
bD8iOwoJCQkJYnJlYWs7CgkJCWNhc2UgIkRFIjoKCQkJCSR0aGlzLT5iYXNlVVJMID0gImh0
dHA6Ly93ZWJzZXJ2aWNlcy5hbWF6b24uZGUvb25jYS94bWw/IjsKCQkJCWJyZWFrOwoJCQlj
YXNlICJKUCI6CgkJCQkkdGhpcy0+YmFzZVVSTCA9ICJodHRwOi8vd2Vic2VydmljZXMuYW1h
em9uLmNvLmpwL29uY2EveG1sPyI7CgkJCQlicmVhazsKCQkJY2FzZSAiRlIiOgoJCQkJJHRo
aXMtPmJhc2VVUkwgPSAiaHR0cDovL3dlYnNlcnZpY2VzLmFtYXpvbi5mci9vbmNhL3htbD8i
OwoJCQkJYnJlYWs7CgkJCWNhc2UgIkNBIjoKCQkJCSR0aGlzLT5iYXNlVVJMID0gImh0dHA6
Ly93ZWJzZXJ2aWNlcy5hbWF6b24uY2Evb25jYS94bWw/IjsKCQkJCWJyZWFrOwoJCQlkZWZh
dWx0OgoJCQkJJHRoaXMtPmJhc2VVUkwgPSAiaHR0cDovL3dlYnNlcnZpY2VzLmFtYXpvbi5j
b20vb25jYS94bWw/IjsKCQkJCWJyZWFrOwoJCX0KCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCglmdW5jdGlv
biByZXF1ZXN0SXRlbSgkcmVxdWVzdEl0ZW1zLCAkZG9jYWNoZSkKCXsKCQlleHRyYWN0KGdl
dF9wcmVmcygpKTsKCgoJCSRjYWNoZV9sb2NhbHBhdGggPSAiJGFzdl9hbWF6b25fY2FjaGVk
aXIvJHRoaXMtPmxvY2FsZS0iLiRyZXF1ZXN0SXRlbXNbJ0l0ZW1JZCddOwoJCSRjYWNoZXVy
bCA9ICR0ZW1wZGlyLiRjYWNoZV9sb2NhbHBhdGg7CgoJCWlmKCRkb2NhY2hlICYmIGZpbGVf
ZXhpc3RzKCRjYWNoZXVybCkgJiYgdGltZSgpIC0gZmlsZW10aW1lKCRjYWNoZXVybCkgPDMw
MCkKCQl7CgkJCSR1cmwgPSAkY2FjaGV1cmw7CgkJfQoJCWVsc2UKCQl7CgkJCSR1cmwgPSAk
dGhpcy0+YnVpbGRVUkwoJHJlcXVlc3RJdGVtcyk7CgkJfQoKCgkJJGRhdGEgPSAkdGhpcy0+
ZmV0Y2hVUkwoJHVybCk7CgoJCSRjb250ZW50cyA9ICR0aGlzLT5wYXJzZSgkZGF0YSk7CgoJ
CWlmKCRkb2NhY2hlKQoJCXsKCQkJaWYoJGNhY2hldXJsICE9ICR1cmwpCgkJCXsKCQkJCSR0
aGlzLT5jYWNoZSgkY2FjaGVfbG9jYWxwYXRoLCAkZGF0YSk7CgkJCX0KCgkJCWZvcmVhY2go
JGNvbnRlbnRzIGFzICRrZXk9PiR2YWx1ZSkKCQkJewoJCQkJc3dpdGNoKCRrZXkpCgkJCQl7
CgkJCQkJY2FzZSAiYXN2X1NtYWxsSW1hZ2VVUkwiOgoJCQkJCWNhc2UgImFzdl9NZWRpdW1J
bWFnZVVSTCI6CgkJCQkJY2FzZSAiYXN2X0xhcmdlSW1hZ2VVUkwiOgoJCQkJCQkkY2FjaGVf
bG9jYWxwYXRoID0gJGFzdl9hbWF6b25fY2FjaGVkaXIuIi8iLmJhc2VuYW1lKCR2YWx1ZSk7
CgoJCQkJCQlpZighZmlsZV9leGlzdHMoJGNhY2hlX2xvY2FscGF0aCkgfHwgdGltZSgpIC0g
ZmlsZW10aW1lKCRjYWNoZV9sb2NhbHBhdGgpID4zMDApCgkJCQkJCXsKCQkJCQkJCSRkYXRh
ID0gJHRoaXMtPmZldGNoVVJMKCR2YWx1ZSk7CgkJCQkJCQkkdGhpcy0+Y2FjaGUoJGNhY2hl
X2xvY2FscGF0aCwgJGRhdGEpOwoJCQkJCQl9CgoJCQkJCQkkY29udGVudHNbJGtleV0gPSAk
YXN2X2FtYXpvbl9jYWNoZXVybC4nLycuYmFzZW5hbWUoJHZhbHVlKTsKCQkJCX0KCQkJfQoJ
CX0KCgkJcmV0dXJuICRjb250ZW50czsKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCglmdW5jdGlvbiByZXF1
ZXN0SXRlbXMoJHJlcXVlc3RJdGVtcykKCXsKCQkkdXJsID0gJHRoaXMtPmJ1aWxkVVJMKCRy
ZXF1ZXN0SXRlbXMpOwoKCQlyZXR1cm4gJHRoaXMtPmZldGNoVVJMKCR1cmwpOwoJfQoKCS8v
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQoKCWZ1bmN0aW9uIHBhcnNlKCRkYXRhKQoJewoKCQlleHRyYWN0KGdldF9wcmVm
cygpKTsKCgkJJHBhcnNlciA9IHhtbF9wYXJzZXJfY3JlYXRlKCk7CgkJJGFtYXpvbl9wYXJz
ZXIgPSAmbmV3IEFtYXpvbjJQYXJzZXIoKTsKCQl4bWxfc2V0X29iamVjdCgkcGFyc2VyLCAk
YW1hem9uX3BhcnNlcik7CgkJeG1sX3BhcnNlcl9zZXRfb3B0aW9uKCRwYXJzZXIsIFhNTF9P
UFRJT05fQ0FTRV9GT0xESU5HLCBmYWxzZSk7CgkJeG1sX3NldF9lbGVtZW50X2hhbmRsZXIo
JHBhcnNlciwgInN0YXJ0RWxlbWVudCIsICJlbmRFbGVtZW50Iik7CgkJeG1sX3NldF9jaGFy
YWN0ZXJfZGF0YV9oYW5kbGVyKCRwYXJzZXIsICJjaGFyYWN0ZXJEYXRhIik7CgoJCWlmICgh
eG1sX3BhcnNlKCRwYXJzZXIsICRkYXRhKSkKCQl7CgkJCXByaW50KHNwcmludGYoIlhNTCBl
cnJvcjogJXMgYXQgbGluZSAlZCIsCgkJCXhtbF9lcnJvcl9zdHJpbmcoeG1sX2dldF9lcnJv
cl9jb2RlKCRwYXJzZXIpKSwKCQkJeG1sX2dldF9jdXJyZW50X2xpbmVfbnVtYmVyKCRwYXJz
ZXIpKSk7CgkJfQoKCQl4bWxfcGFyc2VyX2ZyZWUoJHBhcnNlcik7CgoJCXJldHVybiAkYW1h
em9uX3BhcnNlci0+Z2V0Q29udGVudHNBcnJheSgpOwoJfQoKCS8vLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCWZ1bmN0
aW9uIGNhY2hlKCRsb2NhbHBhdGgsICRkYXRhKQoJewoJCSRmcCA9IGZvcGVuKCRsb2NhbHBh
dGgsICd3Jyk7CgkJZndyaXRlKCRmcCwgJGRhdGEpOwoJCWZjbG9zZSgkZnApOwoJfQoKCS8v
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQoKCWZ1bmN0aW9uIGZldGNoVVJMKCR1cmwpCgl7CgkJLy8gY3JlYXRlIGEgbmV3
IGN1cmwgcmVzb3VyY2UKCQkkY2ggPSBjdXJsX2luaXQoKTsKCgkJLy8gc2V0IFVSTCBhbmQg
b3RoZXIgYXBwcm9wcmlhdGUgb3B0aW9ucwoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9V
UkwsICR1cmwpOwoKCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIs
MSk7CgoJCS8vIGdyYWIgVVJMIGFuZCBwYXNzIGl0IHRvIHRoZSBicm93c2VyCgkJJGRhdGEg
PSBjdXJsX2V4ZWMoJGNoKTsKCgkJLy8gY2xvc2UgY3VybCByZXNvdXJjZSwgYW5kIGZyZWUg
dXAgc3lzdGVtIHJlc291cmNlcwoJCWN1cmxfY2xvc2UoJGNoKTsKCgkJcmV0dXJuICRkYXRh
OwoJfQoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQoKCWZ1bmN0aW9uIGJ1aWxkVVJMIC8qIHByaXZhdGUgKi8oJHJl
cXVlc3RJdGVtcykKCXsKCQkkdXJsID0gJHRoaXMtPmJhc2VVUkwuCgkJCQkiU2VydmljZT0i
LiR0aGlzLT5zZXJ2aWNlLgoJCQkJIiZTdWJzY3JpcHRpb25JZD0iLiR0aGlzLT5hcGlfa2V5
LgoJCQkJIiZWZXJzaW9uPSIuJHRoaXMtPnZlcnNpb24uCgkJCQkiJlJlc3BvbnNlR3JvdXA9
Ii4kdGhpcy0+cmVzcG9uc2VHcm91cDsKCgkJJHRoaXMtPnJlcXVlc3RlZEl0ZW1zID0gJHJl
cXVlc3RJdGVtczsKCgkJZm9yZWFjaCgkcmVxdWVzdEl0ZW1zIGFzICRrZXk9PiR2YWx1ZSkK
CQl7CgkJCQkkdXJsIC49ICcmJy4ka2V5Lic9Jy4kdmFsdWU7CgkJfQoKCQlyZXR1cm4gJHVy
bDsKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0KCglmdW5jdGlvbiBnZXRSZXNwb25zZSgpCgl7CgkJcmV0dXJu
ICR0aGlzLT5yZXNwb25zZTsKCX0KfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpjbGFzcyBBbWF6b24yUGFyc2Vy
CnsKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCi8qIFRoaXMgY2xhc3MgaXMgYSBoZWxwZXIgdG8gdGhlIGFzdl9hbWF6
b24gZnVuY3Rpb24uIFRoZSBwdXJwb3NlIG9mIHRoaXMgY2xhc3MgaXMgdG8gcGFyc2UgdGhl
IHhtbCBkYXRhIGFuZCByZXR1cm4gdGhlIGluZm9ybWF0aW9uIHRvIHRoZSBhc3ZfYW1hem9u
IGZ1bmN0aW9uLiovCiAgIHZhciAkYXN2X2NvbnRlbnRzOwkvL2hvbGQgYWxsIHRoZSBkYXRh
IHRvIHJldHVybgogICB2YXIgJGFzdl9mbGFnOwkvL2hvbGQgdGhlIGN1cnJlbnQgdGFnIG5h
bWUKCiAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQoKICAgZnVuY3Rpb24gQW1hem9uMlBhcnNlcigpCiAgIHsKICAg
fQoKICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tCgogICBmdW5jdGlvbiBzdGFydEVsZW1lbnQoJHBhcnNlciwgJHRh
Z05hbWUsICRhdHRycyl7CgkgICBzd2l0Y2ggKCR0YWdOYW1lKSB7CgkJICAgY2FzZSAiRGV0
YWlsUGFnZVVSTCI6CgkJICAgY2FzZSAiU21hbGxJbWFnZSI6CgkJICAgY2FzZSAiTWVkaXVt
SW1hZ2UiOgoJCSAgIGNhc2UgIkxhcmdlSW1hZ2UiOgoJCSAgIGNhc2UgIkl0ZW1BdHRyaWJ1
dGVzIjoKCQkJICAgJHRoaXMtPmFzdl9mbGFnID0gJHRhZ05hbWU7CgkJCSAgIGJyZWFrOwoJ
CSAgIGNhc2UgIlVSTCI6CgkJCSAgIGlmKCR0aGlzLT5hc3ZfZmxhZyA9PSAiU21hbGxJbWFn
ZSIpCgkJCQkgICAkdGhpcy0+YXN2X2ZsYWcgPSAiU21hbGxJbWFnZVVSTCI7CgkJCSAgIGlm
KCR0aGlzLT5hc3ZfZmxhZyA9PSAiTWVkaXVtSW1hZ2UiKQoJCQkJICAgJHRoaXMtPmFzdl9m
bGFnID0gIk1lZGl1bUltYWdlVVJMIjsKCQkJICAgaWYoJHRoaXMtPmFzdl9mbGFnID09ICJM
YXJnZUltYWdlIikKCQkJCSAgICR0aGlzLT5hc3ZfZmxhZyA9ICJMYXJnZUltYWdlVVJMIjsK
CQkJICAgYnJlYWs7CgkJICAgY2FzZSAiVGl0bGUiOgoJCQkgICBpZigkdGhpcy0+YXN2X2Zs
YWcgPT0gIkl0ZW1BdHRyaWJ1dGVzIikKCQkJCSAgICR0aGlzLT5hc3ZfZmxhZyA9ICJUaXRs
ZSI7CgkJCSAgIGJyZWFrOwoJICAgfQogICB9CgogICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgIGZ1bmN0aW9u
IGVuZEVsZW1lbnQoJHBhcnNlciwgJHRhZ05hbWUpewogICB9CgogICAvLy0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAg
IGZ1bmN0aW9uIGNoYXJhY3RlckRhdGEoJHBhcnNlciwgJGRhdGEpewoJICAgc3dpdGNoICgk
dGhpcy0+YXN2X2ZsYWcpIHsKCQkgICBjYXNlICJEZXRhaWxQYWdlVVJMIjoKCQkgICBjYXNl
ICJTbWFsbEltYWdlVVJMIjoKCQkgICBjYXNlICJNZWRpdW1JbWFnZVVSTCI6CgkJICAgY2Fz
ZSAiTGFyZ2VJbWFnZVVSTCI6CgkJICAgY2FzZSAiVGl0bGUiOgoJCQkgICAkdGhpcy0+YXN2
X2NvbnRlbnRzWyJhc3ZfIi4kdGhpcy0+YXN2X2ZsYWddID0gJGRhdGE7CgkJCSAgICR0aGlz
LT5hc3ZfZmxhZyA9ICcnOwoJCQkgICBicmVhazsKCSAgIH0KICAgfQoKICAgLy8tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
CgogICBmdW5jdGlvbiBnZXRDb250ZW50c0FycmF5KCl7CgkgICByZXR1cm4gJHRoaXMtPmFz
dl9jb250ZW50czsKICAgfQoKfQoKZnVuY3Rpb24gYXN2X2FtYXpvbigkYXR0LCAkdGhpbmc9
JycpewovKiBhc3ZfYW1hem9uIGlzIHRoZSBtYWluIGZ1bmN0aW9uIGZvciB0aGUgcGx1Z2lu
LiBXaGVuIHRoZSBwbHVnaW4gdGFncyBhcmUgaW5zZXJ0ZWQgaW50byB0aGUgcGFnZSwgdGhp
cyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZC4KCSRhdHQgLSBhbiBhcnJheSB0aGF0IGhvbGRz
IHRoZSBmb2xsb3dpbmcgdmFsdWVzOiAkYXNpbiwgWyRsb2NhbGUsICRjYWNoZSwgJGNhY2hl
aW1nXQoJJHRoaW5nIC0gYSBzdHJpbmcgdGhhdCBob2xkcyB0aGUgc3RyaW5nIGluIGJldHdl
ZW4gdGhlIG9wZW4gYW4gY2xvc2UgdGFncyBvZiB0aGlzIHBsdWdpbgoqLwoJZ2xvYmFsICR0
ZW1wZGlyOwoJZ2xvYmFsICRzaXRldXJsOwoKCS8vU2V0dGluZyBkZWZhdWx0cyEgLSBOb3Rl
IGFueSBzZXR0aW5ncyBpbiB0aGUgdGFncyB3aWxsIG92ZXJyaWRlIHRoZXNlIHNldHRpbmdz
CgkkbG9jYWxlPSJ1cyI7IC8vIHVzL2RlL2ZyL2pwL2NhL3VrCgkkY2FjaGVpbWc9Im5vbmUi
OyAvLyBub25lL3NtYWxsL21lZGl1bS9sYXJnZQoJJGNhY2hlPSJub25lIjsgLy8gdHJ1ZS9m
YWxzZQoJJHRtcF9mb2xkZXIgPSAkdGVtcGRpcjsKCSRwYXRoID0gImh0dHA6Ly8kc2l0ZXVy
bC90ZXh0cGF0dGVybi90bXAiOwoKCS8vTWFrZSBzdXJlIHRoYXQgdGhlIGFycmF5ICRhdHQg
aXMgYSBwcm9wZXIgYXJyYXkgYmVmb3JlIGV4dHJhY3RpbmcgYWxsIHRoZSBjb250ZW50cyBp
bnRvIHZhcmlhYmxlIG5hbWVzIG9mIHRoZWlyIGtleXMKCWlzX2FycmF5KCRhdHQpID8gZXh0
cmFjdCgkYXR0KSA6IHByaW50KCJhc3ZfYW1hem9uOiBQbGVhc2UgcmVmZXIgdG8gdGhlIG1h
bnVhbCB0byBwcm9wZXJseSBkZWZpbmUgdGhlIGFzdl9hbWF6b24gdGFnLiIpOwoKCS8vQW4g
QVNJTiBtdXN0IGJlIHByb3ZpZGVkIGZvciB0aGlzIHBsdWdpbgoJaWYoIWlzc2V0KCRhc2lu
KSkKCXsKCQlwcmludCgiWW91IG11c3Qgc3BlY2lmeSB0aGUgQVNJTiAoQW1hem9uIFN0YW5k
YXJkIEl0ZW0gTnVtYmVyKSBmb3IgdGhlIHByb2R1Y3QgdGhhdCB5b3Ugd2FudCB0byBkaXNw
bGF5LiBUaGUgQVNJTiBpcyBhIDEwIGRpZ2l0IG51bWJlciBmb3VuZCBpbiB0aGUgVVJMIG9m
IHRoZXByb2R1Y3QgZGV0YWlsIHBhZ2UuIik7Cgl9CgoJLy9jYWNoZWltZyBzaG91bGQgYmUg
ZWl0aGVyIHNtYWxsLCBtZWRpdW0sIG9yIGxhcmdlLiBCeSBkZWZhdWx0IGNhY2hlaW1nIGlz
IHNldCB0byBub25lICh0aGlzIG1lYW5zIG5vdCB0byBjYWNoZSB0aGUgaW1hZ2UpCglpZigo
JGNhY2hlID09ICJ0cnVlIikgJiYgZmlsZV9leGlzdHMoIiR0bXBfZm9sZGVyLyRsb2NhbGUt
JGFzaW4ueG1sIikgJiYgKHRpbWUoKSAtIChmaWxlYXRpbWUoIiR0bXBfZm9sZGVyLyRsb2Nh
bGUtJGFzaW4ueG1sIikpIDwgODY0MDAwMCkpCgl7CgkJJHVybCA9ICIkdG1wX2ZvbGRlci8k
bG9jYWxlLSRhc2luLnhtbCI7Cgl9CgllbHNlCgl7Ly9PdGhlcndpc2UgZ28gZ3JhYiB0aGUg
eG1sIGZpbGUKCgkJJGJhc2UgPSAnJzsKCgkJLy9TZXQgdGhlIGJhc2UgdXJsIHRvIHRoZSBh
cHByb3ByaWF0ZSBsb2NhbGUKCQlzd2l0Y2ggKCRsb2NhbGUpIHsKCQkJY2FzZSAidXMiOgoJ
CQkJJGJhc2UgPSAnaHR0cDovL3dlYnNlcnZpY2VzLmFtYXpvbi5jb20vb25jYS94bWwnOwoJ
CQkJYnJlYWs7CgkJCWNhc2UgInVrIjoKCQkJCSRiYXNlID0gJ2h0dHA6Ly93ZWJzZXJ2aWNl
cy5hbWF6b24uY28udWsvb25jYS94bWwnOwoJCQkJYnJlYWs7CgkJCWNhc2UgImRlIjoKCQkJ
CSRiYXNlID0gJ2h0dHA6Ly93ZWJzZXJ2aWNlcy5hbWF6b24uZGUvb25jYS94bWwnOwoJCQkJ
YnJlYWs7CgkJCWNhc2UgImpwIjoKCQkJCSRiYXNlID0gJ2h0dHA6Ly93ZWJzZXJ2aWNlcy5h
bWF6b24uY28uanAvb25jYS94bWwnOwoJCQkJYnJlYWs7CgkJCWNhc2UgImZyIjoKCQkJCSRi
YXNlID0gJ2h0dHA6Ly93ZWJzZXJ2aWNlcy5hbWF6b24uZnIvb25jYS94bWwnOwoJCQkJYnJl
YWs7CgkJCWNhc2UgImNhIjoKCQkJCSRiYXNlID0gJ2h0dHA6Ly93ZWJzZXJ2aWNlcy5hbWF6
b24uY2Evb25jYS94bWwnOwoJCQkJYnJlYWs7CgkJfQoKCQkkcXVlcnlfc3RyaW5nID0gJyc7
CgoJCSRwYXJhbXMgPSBhcnJheSgKCQkJJ1NlcnZpY2UnID0+ICdBV1NFQ29tbWVyY2VTZXJ2
aWNlJywKCQkJJ1N1YnNjcmlwdGlvbklkJyA9PiAnMERaV0Q5QktRNkRIUEg0WEEyRzInICwg
Ly8gWW91IGNhbiBzcGVjaWZ5IHlvdXIgb3duIGRldmVsb3BlciB0YWcgaWYgeW91IGhhdmUg
cmVnaXN0ZXJlZCB0byBiZSBhbiBBbWF6b24gd2ViIHNlcnZpY2VzIGRldmVsb3BlcgoJCQkn
T3BlcmF0aW9uJyA9PiAnSXRlbUxvb2t1cCcsCgkJCSdJdGVtSWQnID0+ICRhc2luLAoJCQkn
UmVzcG9uc2VHcm91cCcgPT4gJ01lZGl1bScsCgkJKTsKCgkJZm9yZWFjaCAoJHBhcmFtcyBh
cyAka2V5ID0+ICR2YWx1ZSkKCQl7CgkJCSRxdWVyeV9zdHJpbmcgLj0gIiRrZXk9IiAuIHVy
bGVuY29kZSgkdmFsdWUpIC4gIiYiOwoJCX0KCgkJLy9CdWlsZCB0aGUgdXJsCgkJJHVybCA9
ICIkYmFzZT8kcXVlcnlfc3RyaW5nIjsKCX0KCgkvL1NldCB1cCB0aGUgcGFyc2VyIC0gdG8g
dW5kZXJzdGFuZCB0aGlzIEkgc3VnZ2VzdCB0aGUgZm9sbG93aW5nIHR1dG9yaWFsOiBodHRw
Oi8vd3d3LnNpdGVwb2ludC5jb20vYXJ0aWNsZS9waHAteG1sLXBhcnNpbmctcnNzLTEtMAoJ
JHBhcnNlciA9IHhtbF9wYXJzZXJfY3JlYXRlKCk7CgkkYW1hem9uX3BhcnNlciA9ICZuZXcg
QW1hem9uMlBhcnNlcigkbG9jYWxlLCAkYXNpbiwgJGNhY2hlaW1nLCAkdG1wX2ZvbGRlcik7
Cgl4bWxfc2V0X29iamVjdCgkcGFyc2VyLCAkYW1hem9uX3BhcnNlcik7Cgl4bWxfcGFyc2Vy
X3NldF9vcHRpb24oJHBhcnNlciwgWE1MX09QVElPTl9DQVNFX0ZPTERJTkcsIGZhbHNlKTsK
CXhtbF9zZXRfZWxlbWVudF9oYW5kbGVyKCRwYXJzZXIsICJzdGFydEVsZW1lbnQiLCAiZW5k
RWxlbWVudCIpOwoJeG1sX3NldF9jaGFyYWN0ZXJfZGF0YV9oYW5kbGVyKCRwYXJzZXIsICJj
aGFyYWN0ZXJEYXRhIik7CgoJJGNoID0gY3VybF9pbml0KCk7CgljdXJsX3NldG9wdCgkY2gs
IENVUkxPUFRfVVJMLCAkdXJsKTsKCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5U
UkFOU0ZFUiwxKTsKCSRkYXRhPWN1cmxfZXhlYyAoJGNoKTsKCWN1cmxfY2xvc2UgKCRjaCk7
CglpZiAoIXhtbF9wYXJzZSgkcGFyc2VyLCAkZGF0YSkpIHsKCQlwcmludChzcHJpbnRmKCJY
TUwgZXJyb3I6ICVzIGF0IGxpbmUgJWQiLAoJCQkJCXhtbF9lcnJvcl9zdHJpbmcoeG1sX2dl
dF9lcnJvcl9jb2RlKCRwYXJzZXIpKSwKCQkJCQl4bWxfZ2V0X2N1cnJlbnRfbGluZV9udW1i
ZXIoJHBhcnNlcikpKTsKCX0KCgl4bWxfcGFyc2VyX2ZyZWUoJHBhcnNlcik7CgoJLy9HcmFi
IHRoZSBjb250ZW50cyBmcm9tIHRoZSBBbWF6b25QYXJzZXIgQ2xhc3MKCSRhc3ZfY29udGVu
dHMgPSAkYW1hem9uX3BhcnNlci0+Z2V0Q29udGVudHNBcnJheSgpOwoKCS8vUHJvcGVybHkg
c3ludGhlc2l6ZSB0aGUgSFRNTCB0byByZXR1cm4KCWlmKCR0aGluZykKCXsKCQlmb3JlYWNo
KCRhc3ZfY29udGVudHMgYXMgJGtleT0+JHZhbHVlKQoJCXsKCQkJJHRoaW5nID0gc3RyX3Jl
cGxhY2UoJGtleSwgJHZhbHVlLCAJJHRoaW5nKTsKCQl9Cgl9CgllbHNlCgl7CgkJJHRoaW5n
ID0gIjxhIGhyZWY9XCIiLiRhc3ZfY29udGVudHNbJ2Fzdl9EZXRhaWxQYWdlVVJMJ10uIlwi
PjxpbWcgc3JjPVwiIi4kYXN2X2NvbnRlbnRzWydhc3ZfU21hbGxJbWFnZVVSTCddLiJcIiAv
PjxiciAvPiIuJGFzdl9jb250ZW50c1snYXN2X1RpdGxlJ10uIjwvYT48YnIgLz4iOwoJfQoJ
cmV0dXJuICR0aGluZzsKfSI7czozOiJtZDUiO3M6MzI6IjVlMTQwNWZmYzYyYzkzMTg1MDI4
ZDEzOWNiZGFhNTM5Ijt9
