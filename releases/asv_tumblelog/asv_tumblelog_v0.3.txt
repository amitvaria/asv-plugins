# asv_tumblelog v0.2.1
# Implementing the greatness of tumblelogs
# Amit Varia
# http://www.amitvaria.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjQ6Im5hbWUiO3M6MTM6ImFzdl90dW1ibGVsb2ciO3M6NzoidmVyc2lvbiI7czo1
OiIwLjIuMSI7czo2OiJhdXRob3IiO3M6MTA6IkFtaXQgVmFyaWEiO3M6MTA6ImF1dGhvcl91
cmkiO3M6MjU6Imh0dHA6Ly93d3cuYW1pdHZhcmlhLmNvbS8iO3M6MTE6ImRlc2NyaXB0aW9u
IjtzOjQwOiJJbXBsZW1lbnRpbmcgdGhlIGdyZWF0bmVzcyBvZiB0dW1ibGVsb2dzIjtzOjQ6
InR5cGUiO2k6MTtzOjQ6ImhlbHAiO3M6MzA5MjoiCTxoMT5hc3ZfdHVtYmxlbG9nPC9oMT4K
Cgk8aDI+dGhlIGJlZ2lubmluZyBvZiBhIGxpZmVzdHJlYW08L2gyPgoKCTxoMz5TdW1tYXJ5
PC9oMz4KCgk8cD5JIHVzZWQgdG8gYmUgYW4gYXZpZCB1c2VyIG9mIHNlcnZpY2VzIGxpa2Ug
PGEgaHJlZj0iaHR0cDovL3d3dy50dW1ibHIuY29tIj5UdW1ibHI8L2E+LCBidXQgZm91bmQg
bXlzZWxmIHdhbnRpbmcgbW9yZSBmcmVlZG9tIGFuZCBjb250cm9sIG92ZXIgbXkgcG9zdHMu
IFBsZWFzZSBmb2xsb3cgdGhlIHNldHVwIGluc3RydWN0aW9ucyBiZWxvdyB0byBlbnN1cmUg
dGhhdCBldmVyeXRoaW5nIGdldHMgc2V0dXAuIGFzdl90dW1ibGVsb2cgd2lsbCBpbXBvcnQg
ZmVlZHMgZm9yIHlvdSBhcyA8c3BhbiBjbGFzcz0iY2FwcyI+VFhQPC9zcGFuPiBhcnRpY2xl
cy48L3A+CgoJPGgzPlNldHVwL0luc3RhbGxhdGlvbjwvaDM+CgoJPHA+YXN2X3R1bWJsZWxv
ZyByZXF1aXJlcyA8YSBocmVmPSJodHRwOi8vd3d3LnNpbXBsZXBpZS5vcmciPlNpbXBsZVBp
ZTwvYT4sIHNvIHBsZWFzZSBncmFiIHRoZSBsYXRlc3QgdmVyc2lvbi4gQWZ0ZXIgYWN0aXZh
dGluZyB0aGUgcGx1Z2luIHlvdSB3aWxsIGhhdmUgYSBuZXcgdGFiIHVuZGVyICYjODIyMDtF
eHRlbnNpb25zJiM4MjIxOyBjYWxsZWQgJiM4MjIwO1R1bWJsZWxvZyYjODIyMTsuIEluIHRo
aXMgdGFiIHlvdSBoYXZlIGZvdXIgb3B0aW9ucyAmIzgyMTE7IFNldHRpbmdzLCBGZWVkcywg
UGFnZSBEZXNpZ24sIEZvcm0gRGVzaWduLjwvcD4KCgk8cD5PbmNlIGV2ZXJ5dGhpbmcgaXMg
c2V0dXAgeW91JiM4MjE3O2xsIG5lZWQgdG8gc2V0dXAgYSBjcm9uIGpvYiB0byBnZXQgYSBz
cGVjaWZpYyB1cmwgdG8gdXBkYXRlIHRoZSBmZWVkcy4gVGhlIHBhdGggd291bGQgYmU6IGh0
dHA6Ly93ZWJzaXRldXJsLz9hc3ZfdHVtYmxlbG9nX3VwZGF0ZWZlZWRzPTEgKG5vdGU6IHRo
aXMgaXMgbm90IHRoZSB0ZXh0cGF0dGVybiBmb2xkZXIsIGJ1dCB0aGUgdXJsIHRvIHlvdXIg
bWFpbiBzaXRlKS48L3A+CgoJPGgzPlNldHRpbmdzPC9oMz4KCgk8cD5CZWZvcmUgdXNpbmcg
YXN2X3R1bWJsZWxvZyB5b3UmIzgyMTc7bGwgbmVlZCB0byBzZXR1cCBhIGNvdXBsZSB0aGlu
Z3MuCgk8dWw+CgkJPGxpPjxzdHJvbmc+U291cmNlIExpbmsgRmllbGQ8L3N0cm9uZz4gJiM4
MjExOyBzZWxlY3QgdGhlIGN1c3RvbSBmaWVsZCB5b3Ugd291bGQgbGlrZSB0byB1c2UgdG8g
c3RvcmUgdGhlIG9yaWdpbmFsIGxpbmsgdG8gdGhlIGltcG9ydGVkIHBvc3Q8L2xpPgoJCTxs
aT48c3Ryb25nPlR1bWJsZWxvZyBTZWN0aW9uPC9zdHJvbmc+ICYjODIxMTsgdGhlIHNlY3Rp
b24gdG8gaW1wb3J0IHRoZSBmZWVkIGludG88L2xpPgoJCTxsaT48c3Ryb25nPlNpbXBsZVBp
ZSBQYXRoPC9zdHJvbmc+ICYjODIxMTsgL3RoZS9wYXRoL3RvL3lvdXIvU2ltcGxlUGllL2lu
c3RhbGw8L2xpPgoJPC91bD48L3A+CgoJPHVsPgoJCTxsaT48c3Ryb25nPlBvc3QgRm9ybTwv
c3Ryb25nPiAmIzgyMTE7IHRoZSBmb3JtIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gZmVlZHMg
dHlwZWQgYXMgcG9zdHM8L2xpPgoJCTxsaT48c3Ryb25nPlF1b3RlIEZvcm08L3N0cm9uZz4g
JiM4MjExOyB0aGUgZm9ybSB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIGZlZWRzIHR5cGVkIGFz
IHF1b3RlczwvbGk+CgkJPGxpPjxzdHJvbmc+TGluayBGb3JtPC9zdHJvbmc+ICYjODIxMTsg
dGhlIGZvcm0gdGhhdCBzaG91bGQgYmUgdXNlZCB0byBmZWVkcyB0eXBlZCBhcyBsaW5rczwv
bGk+CgkJPGxpPjxzdHJvbmc+UGhvdG8gRm9ybTwvc3Ryb25nPiAmIzgyMTE7IHRoZSBmb3Jt
IHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gZmVlZHMgdHlwZWQgYXMgcGhvdG9zPC9saT4KCTwv
dWw+CgoJPGgzPkZlZWRzPC9oMz4KCgk8cD5JbiB0aGUgJiM4MjE2O0ZlZWRzJiM4MjE3OyBz
ZWN0aW9uIHlvdSBhZGQvZWRpdC92aWV3IGFsbCB5b3VyIGZlZWRzIHlvdSBhcmUgaW1wb3J0
aW5nLiBXaGVuIGFkZGluZyBhIGZlZWQsIGZpbGwgaW4gdGhlIGluZm9ybWF0aW9uIGFuZCBj
aG9vc2UgdGhlIGFwcHJvcHJpYXRlIHR5cGUuIFlvdSBjYW4gY3JlYXRlIHlvdXIgb3duIGRl
ZmluaXRpb25zIGZvciBlYWNoIHR5cGUgc2luY2UgeW91IGNhbiBlZGl0IHRoZSBkZXNpZ24g
aW4gbGF0dGVyIHNlY3Rpb25zLjwvcD4KCgk8cD48c3Ryb25nPlRoZSBvbmUgZXhjZXB0aW9u
IGlzIHRoZSBwaG90byB0eXBlLjwvc3Ryb25nPiBJZiBhIGZlZWQgaXMgdHlwZWQgYXMgYSBw
aG90byB0aGVuIGFzdl90dW1ibGVsb2cgd2lsbCBwYXJzZSB0aGUgYm9keSBvZiBhIHBvc3Qg
YW5kIGdyYWIgdGhlIGZpcnN0IGltYWdlLCBpbXBvcnQgaXQgaW50byA8c3BhbiBjbGFzcz0i
Y2FwcyI+VFhQPC9zcGFuPiwgYW5kIG1ha2UgdGhlIGJvZHkgb2YgdGhlIGltcG9ydGVkIGFy
dGljbGUgYSByZWZlcmVuY2UgdG8gdGhlIGltcG9ydGVkIHBob3RvLjwvcD4KCgk8aDM+UGFn
ZSBEZXNpZ248L2gzPgoKCTxwPkhlcmUgeW91IGNhbiBlZGl0IHRoZSBwYWdlIHRoYXQgaXMg
YXNzb2NpYXRlZCB0byB5b3VyIHR1bWJsZWxvZyBzZWN0aW9uLjwvcD4KCgk8aDM+UGFnZSBT
dHlsZTwvaDM+CgoJPHA+SGVyZSB5b3UgY2FuIGVkaXQgdGhlIHN0eWxlIHRoYXQgaXMgYXNz
b2NpYXRlZCB0byB5b3VyIHR1bWJsZWxvZyBzZWN0aW9uLjwvcD4KCgk8aDM+Rm9ybSBEZXNp
Z248L2gzPgoKCTxwPkhlcmUgeW91IGNhbiBlZGl0IHRoZSA0IGZvcm1zIHVzZWQgZm9yIHlv
dXIgdHVtYmxlbG9nLjwvcD4KCgk8aDM+UmVjY29tbWVuZGF0aW9uczwvaDM+CgoJPHA+WW91
JiM4MjE3O2xsIGxlYXJuIHRoYXQgeW91IGhhdmUgYSBsb3Qgb2Ygcm9vbSBmb3IgZmxleGli
aWxpdHkgYW5kIGN1c3RvbWl6YXRpb24gd2l0aCBhc3ZfdHVtYmxlbG9nLiBJIHdvdWxkIHJl
Y29tbWVuZCBpbnN0YWxsaW5nIHBsdWdpbnMgbGlrZSByc3NfYXV0b19leGNlcnB0IGFuZCB0
cnVfdGFncy4gV2l0aCByc3NfYXV0b19leGNlcnB0IHlvdSBjYW4gdHJ1bmNhdGUgcG9zdHMg
YW5kIHRydV90YWdzIHdpbGwgbGV0IHlvdSBpbXBsZW1lbnQgYSB0YWdnaW5nIHNvbHV0aW9u
IHVzaW5nIHRoZSAmIzgyMTY7S2V5d29yZHMmIzgyMTc7IGZpZWxkLjwvcD4iO3M6NDoiY29k
ZSI7czoyNDUxMToiCmlmIChAdHhwaW50ZXJmYWNlID09ICdhZG1pbicpCnsKCWFkZF9wcml2
cygnYXN2X3R1bWJsZWxvZycsJzEsMiwzLDQnKTsgLy8gQWxsb3cgb25seSB1c2VybGV2ZWxz
IDEsMiwzLDQgYWNlc3MgdG8gdGhpcyBwbHVnaW4uCglyZWdpc3Rlcl90YWIoJ2V4dGVuc2lv
bnMnLCAnYXN2X3R1bWJsZWxvZycsICJUdW1ibGVsb2ciKTsKCXJlZ2lzdGVyX2NhbGxiYWNr
KCJhc3ZfdHVtYmxlbG9nIiwgImFzdl90dW1ibGVsb2ciKTsKfQoKLy8tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBV
dGlsaXR5IEZ1bmN0aW9ucwovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl90dW1ibGVsb2dfdGl0
bGUoJGFjdGl2ZSkKewoKCSR0aXRsZXMgPSBhcnJheSgnU2V0dGluZ3MnPT4nU2V0dGluZ3Mn
LCAnRmVlZHMnPT4nRmVlZHMnLCAncGFnZS1kZXNpZ24nPT4nUGFnZSBEZXNpZ24nLCAncGFn
ZS1zdHlsZSc9PidQYWdlIFN0eWxlJywgJ0Rlc2lnbic9PidGb3JtIERlc2lnbicpOwoJJG5l
d3RpdGxlcyA9IGFycmF5KCk7Cglmb3JlYWNoKCR0aXRsZXMgYXMgJGtleT0+JHRpdGxlKQoJ
ewoJCWlmKCR0aXRsZSE9JGFjdGl2ZSkKCQl7CgkJCSR0aXRsZT0nPGEgaHJlZj0iaW5kZXgu
cGhwP2V2ZW50PWFzdl90dW1ibGVsb2cmc3RlcD0nLiRrZXkuJyI+Jy4kdGl0bGUuJzwvYT4n
OwoJCX0KCQlhcnJheV9wdXNoKCRuZXd0aXRsZXMsICR0aXRsZSk7Cgl9CgoJcmV0dXJuIHRh
Zyhqb2luKCRuZXd0aXRsZXMsICIgfCAiKSwgJ2gxJywgJyBzdHlsZT0idGV4dC1hbGlnbjog
Y2VudGVyOyInKTsKfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl9zZWN0aW9uX3BvcHVwKCRT
ZWN0aW9uLCAkaWQpCnsKCSRycyA9IHNhZmVfY29sdW1uKCduYW1lJywgJ3R4cF9zZWN0aW9u
JywgIm5hbWUgIT0gJ2RlZmF1bHQnIik7CgoJaWYgKCRycykKCXsKCQlyZXR1cm4gc2VsZWN0
SW5wdXQoJ3R1bWJsZWxvZ3NlY3Rpb24nLCAkcnMsICRTZWN0aW9uLCBmYWxzZSwgJycsICRp
ZCk7Cgl9CgoJcmV0dXJuIGZhbHNlOwp9Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gYXN2X2N1c3Rv
bV9wb3B1cCgkQ3VzdG9tLCAkaWQpCnsKCSRycyA9IHNhZmVfY29sdW1uKCd2YWwnLCAndHhw
X3ByZWZzJywgIm5hbWUgTElLRSAnY3VzdG9tXyVfc2V0JyIpOwoKCWlmICgkcnMpCgl7CgkJ
cmV0dXJuIHNlbGVjdElucHV0KCdzb3VyY2VsaW5rJywgJHJzLCAkQ3VzdG9tLCBmYWxzZSwg
JycsICRpZCk7Cgl9CgoJcmV0dXJuIGZhbHNlOwp9Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gYXN2
X2Zvcm1fcG9wdXAoJEN1c3RvbSwgJGlkLCAkbmFtZT0iIikKewoJJHJzID0gc2FmZV9jb2x1
bW4oJ25hbWUnLCAndHhwX2Zvcm0nLCAidHlwZT0nYXJ0aWNsZSciKTsKCglpZiAoJHJzKQoJ
ewoJCXJldHVybiBzZWxlY3RJbnB1dCgkaWQsICRycywgJEN1c3RvbSwgZmFsc2UsICcnLCAk
aWQpOwoJfQoKCXJldHVybiBmYWxzZTsKfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl9jYXRf
cG9wdXAoJEN1c3RvbSwgJGlkLCAkbmFtZT0iIikKewoJJHJzID0gZ2V0VHJlZSgncm9vdCcs
ICdhcnRpY2xlJyk7CgoJaWYgKCRycykKCXsKCQlyZXR1cm4gdHJlZVNlbGVjdElucHV0KCRu
YW1lLCRycywkQ3VzdG9tLCAkaWQpOwoJfQoKCXJldHVybiBmYWxzZTsKfQovLy0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
ZnVuY3Rpb24gZ2V0X2Fzdl90dW1ibGVsb2dfcHJlZnMoKQp7Cgkkb3V0ID0gYXJyYXkoKTsK
CSRyID0gc2FmZV9yb3dzX3N0YXJ0KCduYW1lLCB2YWwnLCAndHhwX3ByZWZzJywgImV2ZW50
PSdhc3ZfdHVtYmxlbG8nIik7CglpZiAoJHIpIHsKCQl3aGlsZSAoJGEgPSBuZXh0Um93KCRy
KSkgewoJCQkkb3V0WyRhWyduYW1lJ11dID0gJGFbJ3ZhbCddOwoJCX0KCgkJcmV0dXJuIGxB
dHRzKGFycmF5KAoJCQknc291cmNlbGluaycJPT4gJycsCgkJCSd0dW1ibGVsb2dzZWN0aW9u
JyA9PiAnJywKCQkJJ3NpbXBsZXBpZScgPT4gJycsCgkJCSdwb3N0Zm9ybScJPT4gJycsCgkJ
CSdxdW90ZWZvcm0nCT0+ICcnLAoJCQkncGhvdG9mb3JtJwk9PiAnJywKCQkJJ2xpbmtmb3Jt
JyAJPT4gJycsCgkJCSdyc3NmZWVkcGFnZScgPT4gJycsCgkJCSksJG91dCk7CgoJfQoJcmV0
dXJuIGZhbHNlOwp9Ci8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gYXN2X3R1bWJsZWxvZ19saXN0X211
bHRpZWRpdF9mb3JtKCkKewoJJG1ldGhvZHMgPSBhcnJheSgKCQknZGVsZXRlJyAgICAgICAg
ICA9PiBnVHh0KCdkZWxldGUnKSwKCSk7CgoJcmV0dXJuIGV2ZW50X211bHRpZWRpdF9mb3Jt
KCdsaXN0JywgJG1ldGhvZHMsICcnLCcnLCcnLCcnLCcnKTsKfQovLy0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0
aW9uIGFzdl90dW1ibGVsb2dfdmVyaWZ5RmVlZCgkZmVlZCwgJHNpbXBsZXBpZSkKewoJLy9H
ZXQgU2ltcGxlUGllCglyZXF1aXJlX29uY2UoJHNpbXBsZXBpZSk7CgoJLy9DcmVhdGUgYW5k
IHNldHVwIFNpbXBsZVBpZSBJbnN0YW5jZQoJJHRoZWZlZWQgPSBuZXcgU2ltcGxlUGllKCk7
CgkkdGhlZmVlZC0+c2V0X2ZlZWRfdXJsKCRmZWVkKTsKCSR0aGVmZWVkLT5lbmFibGVfY2Fj
aGUoZmFsc2UpOwoJJHRoZWZlZWQtPmhhbmRsZV9jb250ZW50X3R5cGUoKTsKCgkvL0dldCB0
aGUgZmVlZAoJJHN1Y2Nlc3MgPSAkdGhlZmVlZC0+aW5pdCgpOwoKCXJldHVybiAoJHN1Y2Nl
c3MpPyAkdGhlZmVlZC0+Z2V0X3RpdGxlKCk6ICBmYWxzZTsKCn0KCi8vLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVu
Y3Rpb24gYXN2X3R1bWJsZWxvZ192ZXJpZnlUYWJsZSgpCnsKCWlmKHNhZmVfcXVlcnkoIlNI
T1cgVEFCTEVTIExJS0UgJyIuc2FmZV9wZngoJ2Fzdl90dW1ibGVsb2dfZmVlZHMnKS4iJyIp
KQoJewoJCSR2ZXJzaW9uID0gbXlzcWxfZ2V0X3NlcnZlcl9pbmZvKCk7CgkJLy9Vc2UgIkVO
R0lORSIgaWYgdmVyc2lvbiBvZiBNeVNRTCA+ICg0LjAuMTggb3IgNC4xLjIpCgkJJHRhYmxl
dHlwZSA9ICggaW50dmFsKCR2ZXJzaW9uWzBdKSA+PSA1IHx8IHByZWdfbWF0Y2goJyNeNFwu
KDBcLlsyLTldfCgxWzg5XSkpfCgxXC5bMi05XSkjJywkdmVyc2lvbikpCgkJCQkJCT8gIiBF
TkdJTkU9TXlJU0FNICIKCQkJCQkJOiAiIFRZUEU9TXlJU0FNICI7CgkJJHJlc3VsdCA9IHNh
ZmVfcXVlcnkoIkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGAiLlBGWC4iYXN2X3R1bWJs
ZWxvZ19mZWVkc2AoCgkJCWBJRGAgaW50KDExKSBOT1QgTlVMTCBhdXRvX2luY3JlbWVudCwK
CQkJYFRpdGxlYCB2YXJjaGFyKDI1NSkgTk9UIE5VTEwgZGVmYXVsdCAnJywKCQkJYEZlZWRg
IHZhcmNoYXIoMjU1KSBOT1QgTlVMTCBkZWZhdWx0ICcnLAoJCQlgQW5ub3RhdGVgIGludCgy
KSBOT1QgTlVMTCBkZWZhdWx0ICcwJywKCQkJYFR5cGVgIHZhcmNoYXIoMTI4KSBOT1QgTlVM
TCBkZWZhdWx0ICcnLAoJCQlgQ2F0ZWdvcnkxYCB2YXJjaGFyKDEyOCkgTk9UIE5VTEwgZGVm
YXVsdCAnJywKCQkJYENhdGVnb3J5MmAgdmFyY2hhcigxMjgpIE5PVCBOVUxMIGRlZmF1bHQg
JycsCgkJCWBLZXl3b3Jkc2AgdmFyY2hhcigyNTUpIE5PVCBOVUxMIGRlZmF1bHQgJycsCgkJ
CSBQUklNQVJZIEtFWSAgKGBJRGApCgkJCSApICR0YWJsZXR5cGUgUEFDS19LRVlTPTEgQVVU
T19JTkNSRU1FTlQ9MiAiKTsKCX0KfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl90dW1ibGVs
b2dfdHJpbXR3aXR0ZXIoJGlucHV0LCAkc291cmNlKQp7CglpZihzdHJzdHIoJHNvdXJjZSwg
InR3aXR0ZXIuY29tIikpCgl7CgkJcmV0dXJuIHByZWdfcmVwbGFjZSgnKFx3KzogKShcLiop
JywgJyQyJyk7Cgl9Cn0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZnVuY3Rpb24gYXN2X3R1bWJsZWxvZ19mZWVk
c19saXN0KCRhdHRzLCR0aGluZykKewp9CgpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nKCRldmVu
dCwgJHN0ZXApCnsKCSRzdGVwPSgkc3RlcD09JycpPydTZXR0aW5ncyc6JHN0ZXA7CgoJc3dp
dGNoKCRzdGVwKQoJewoJCWNhc2UgJ1NldHRpbmdzJzoKCQkJYXN2X3R1bWJsZWxvZ19zZXR0
aW5ncygkc3RlcCk7CgkJCWJyZWFrOwoJCWNhc2UgJ0ZlZWRzJzoKCQkJYXN2X3R1bWJsZWxv
Z19mZWVkcygkc3RlcCk7CgkJCWJyZWFrOwoJCWNhc2UgJ0Rlc2lnbic6CgkJCWFzdl90dW1i
bGVsb2dfZGVzaWduKCRzdGVwKTsKCQkJYnJlYWs7CgkJY2FzZSAncGFnZS1kZXNpZ24nOgoJ
CQlhc3ZfdHVtYmxlbG9nX3BhZ2VkZXNpZ24oJHN0ZXApOwoJCQlicmVhazsKCQljYXNlICdw
YWdlLXN0eWxlJzoKCQkJYXN2X3R1bWJsZWxvZ19wYWdlc3R5bGUoJHN0ZXApOwoJCQlicmVh
azsKCX0KfQoKZnVuY3Rpb24gYXN2X3R1bWJsZWxvZ19wYWdlc3R5bGUoJHN0ZXApCnsKCgll
eHRyYWN0KGRvU2xhc2goZ2V0X2Fzdl90dW1ibGVsb2dfcHJlZnMoKSkpOwoKCSRtZXNzYWdl
ID0gJyc7CglpZihncHMoJ2FjdGlvbicpPT0nc2F2ZScgJiYgZ3BzKCdzdHlsZS1uYW1lJykp
Cgl7CgkJJGZvcm0gPSBkb1NsYXNoKGJhc2U2NF9lbmNvZGUoZ3BzKCdmb3JtJykpKTsKCQkk
cnMgPSBzYWZlX3VwZGF0ZSgidHhwX2NzcyIsICJjc3M9JyIuJGZvcm0gLiInIiwgIm5hbWUg
PSAnIi5kb1NsYXNoKGdwcygnc3R5bGUtbmFtZScpKS4iJyIpOwoJCSRtZXNzYWdlID0gJ1N0
eWxlIHNhdmVkJzsKCX0KCglwYWdldG9wKCdUdW1ibGVsb2cnLCAkbWVzc2FnZSk7CgoJZWNo
byBhc3ZfdHVtYmxlbG9nX3RpdGxlKCRzdGVwKTsKCgkkcnMgPSBzYWZlX3JvdygiY3NzIiwg
J3R4cF9zZWN0aW9uJywgIm5hbWUgPSAnJHR1bWJsZWxvZ3NlY3Rpb24nIik7CglpZigkcnMp
Cgl7CgkJJHBhZ2VfcnMgPSBzYWZlX3JvdygnKicsICd0eHBfY3NzJywgIm5hbWU9JyIuJHJz
Wydjc3MnXS4iJyIpOwoJCWlmKCRwYWdlX3JzKQoJCXsKCQkJZXh0cmFjdCgkcGFnZV9ycyk7
CgkJCSR0aGVjc3MgPSBiYXNlNjRfZGVjb2RlKCRjc3MpOwoJCX0KCX0KCgoJZWNobyBuLnN0
YXJ0VGFibGUoJ2xpc3QnLCAnJywgJycsICcnLCAnJykuCgkJbi4nPGZvcm0gbmFtZT0icG9z
dC1mb3JtIiBtZXRob2Q9InBvc3QiIGFjdGlvbj0iaW5kZXgucGhwIj4nLgoJCW4uaElucHV0
KCdldmVudCcsICdhc3ZfdHVtYmxlbG9nJykuCgkJbi5oSW5wdXQoJ3N0ZXAnLCAncGFnZS1z
dHlsZScpLgoJCW4uaElucHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4uaElucHV0KCdzdHls
ZS1uYW1lJywgJG5hbWUpLgoJCXRyKHRkYSgiRWRpdCB0aGUgc3R5bGUgdGhhdCBoYW5kbGVz
IHRoZSB0dW1ibGVsb2cgc2VjdGlvbiA8Yj4iLiRuYW1lLiI8L2I+LiIsICcgc3R5bGU9InRl
eHQtYWxpZ246Y2VudGVyIicpKS4KCQl0cih0ZCh0ZXh0X2FyZWEoJ2Zvcm0nLCAnODAwJywg
JzYwMCcsICgkdGhlY3NzKT8kdGhlY3NzOicnKSkpLgoJCXRyKHRkYShmSW5wdXQoJ3N1Ym1p
dCcsJ3NhdmVfc2V0dGluZ3MnLCdzYXZlJywicHVibGlzaCIsICcnLCAnJywgJycsIDQpLCAn
IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0IicpKS4nPC9mb3JtPicuCgllbmRUYWJsZSgpOwp9
CgpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX3BhZ2VkZXNpZ24oJHN0ZXApCnsKCglleHRyYWN0
KGRvU2xhc2goZ2V0X2Fzdl90dW1ibGVsb2dfcHJlZnMoKSkpOwoKCSRtZXNzYWdlID0gJyc7
CglpZihncHMoJ2FjdGlvbicpPT0nc2F2ZScgJiYgZ3BzKCdwYWdlLW5hbWUnKSkKCXsKCQkk
cnMgPSBzYWZlX3VwZGF0ZSgidHhwX3BhZ2UiLCAidXNlcl9odG1sPSciLmRvU2xhc2goZ3Bz
KCdmb3JtJykpLiInIiwgIm5hbWUgPSAnIi5kb1NsYXNoKGdwcygncGFnZS1uYW1lJykpLiIn
Iik7CgkJJG1lc3NhZ2UgPSAnUGFnZSBzYXZlZCc7Cgl9CgoJcGFnZXRvcCgnVHVtYmxlbG9n
JywgJG1lc3NhZ2UpOwoKCWVjaG8gYXN2X3R1bWJsZWxvZ190aXRsZSgkc3RlcCk7CgoJJHJz
ID0gc2FmZV9yb3coInBhZ2UiLCAndHhwX3NlY3Rpb24nLCAibmFtZSA9ICckdHVtYmxlbG9n
c2VjdGlvbiciKTsKCWlmKCRycykKCXsKCQkkcGFnZV9ycyA9IHNhZmVfcm93KCcqJywgJ3R4
cF9wYWdlJywgIm5hbWU9JyIuJHJzWydwYWdlJ10uIiciKTsKCQlpZigkcGFnZV9ycykKCQl7
CgkJCWV4dHJhY3QoJHBhZ2VfcnMpOwoJCX0KCX0KCgoJZWNobyBuLnN0YXJ0VGFibGUoJ2xp
c3QnLCAnJywgJycsICcnLCAnJykuCgkJbi4nPGZvcm0gbmFtZT0icG9zdC1mb3JtIiBtZXRo
b2Q9InBvc3QiIGFjdGlvbj0iaW5kZXgucGhwIj4nLgoJCW4uaElucHV0KCdldmVudCcsICdh
c3ZfdHVtYmxlbG9nJykuCgkJbi5oSW5wdXQoJ3N0ZXAnLCAncGFnZS1kZXNpZ24nKS4KCQlu
LmhJbnB1dCgnYWN0aW9uJywgJ3NhdmUnKS4KCQluLmhJbnB1dCgncGFnZS1uYW1lJywgJG5h
bWUpLgoJCXRyKHRkYSgiRWRpdCB0aGUgcGFnZSB0aGF0IGhhbmRsZXMgdGhlIHR1bWJsZWxv
ZyBzZWN0aW9uIDxiPiIuJG5hbWUuIjwvYj4uIiwgJyBzdHlsZT0idGV4dC1hbGlnbjpjZW50
ZXIiJykpLgoJCXRyKHRkKHRleHRfYXJlYSgnZm9ybScsICc4MDAnLCAnNjAwJywgKCR1c2Vy
X2h0bWwpPyR1c2VyX2h0bWw6JycpKSkuCgkJdHIodGRhKGZJbnB1dCgnc3VibWl0Jywnc2F2
ZV9zZXR0aW5ncycsJ3NhdmUnLCJwdWJsaXNoIiwgJycsICcnLCAnJywgNCksICcgc3R5bGU9
InRleHQtYWxpZ246cmlnaHQiJykpLic8L2Zvcm0+Jy4KCWVuZFRhYmxlKCk7Cn0KZnVuY3Rp
b24gYXN2X3R1bWJsZWxvZ19kZXNpZ24oJHN0ZXApCnsKCglleHRyYWN0KGRvU2xhc2goZ2V0
X2Fzdl90dW1ibGVsb2dfcHJlZnMoKSkpOwoKCglpZihncHMoJ2FjdGlvbicpPT0nc2F2ZScp
Cgl7CgkJc3dpdGNoKGdwcygnbWV0aG9kJykpCgkJewoJCQljYXNlICJwb3N0IjoKCQkJCSRy
cyA9IHNhZmVfdXBkYXRlKCJ0eHBfZm9ybSIsICJGb3JtPSciLmdwcygnZm9ybScpLiInIiwg
Im5hbWUgPSAnJHBvc3Rmb3JtJyBBTkQgdHlwZT0nYXJ0aWNsZSciKTsKCQkJCWJyZWFrOwoJ
CQljYXNlICJxdW90ZSI6CgkJCQkkcnMgPSBzYWZlX3VwZGF0ZSgidHhwX2Zvcm0iLCAiRm9y
bT0nIi5ncHMoJ2Zvcm0nKS4iJyIsICJuYW1lID0gJyRxdW90ZWZvcm0nIEFORCB0eXBlPSdh
cnRpY2xlJyIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgImxpbmsiOgoJCQkJJHJzID0gc2FmZV91
cGRhdGUoInR4cF9mb3JtIiwgIkZvcm09JyIuZ3BzKCdmb3JtJykuIiciLCAibmFtZSA9ICck
bGlua2Zvcm0nIEFORCB0eXBlPSdhcnRpY2xlJyIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgInBo
b3RvIjoKCQkJCSRycyA9IHNhZmVfdXBkYXRlKCJ0eHBfZm9ybSIsICJGb3JtPSciLmdwcygn
Zm9ybScpLiInIiwgIm5hbWUgPSAnJHBob3RvZm9ybScgQU5EIHR5cGU9J2FydGljbGUnIik7
CgkJCQlicmVhazsKCQl9CgoJfQoKCXBhZ2V0b3AoJ1R1bWJsZWxvZycsIChncHMoJ3NhdmUn
KSk/ICdGb3JtIHNhdmVkJzonJyk7CgoJZWNobyBhc3ZfdHVtYmxlbG9nX3RpdGxlKCRzdGVw
KTsKCgkkZm9ybXMgPSBhcnJheSgncG9zdCc9PiRwb3N0Zm9ybSwgJ3F1b3RlJz0+JHF1b3Rl
Zm9ybSwgJ2xpbmsnPT4kbGlua2Zvcm0sICdwaG90byc9PiRwaG90b2Zvcm0pOwoJJGVkaXRm
b3JtcyA9IGFycmF5KCk7CgkkZm9ybW5hbWVzID0gYXJyYXkoKTsKCglmb3JlYWNoKCRmb3Jt
cyBhcyAkdHlwZT0+JGZvcm0pCgl7CgkJJHJzID0gc2FmZV9yb3coIioiLCAndHhwX2Zvcm0n
LCAibmFtZSA9ICckZm9ybScgQU5EIHR5cGU9J2FydGljbGUnIik7CgoJCWlmKCRycykKCQl7
CgkJCSRlZGl0Zm9ybXNbJHR5cGVdID0gJHJzWydGb3JtJ107CgkJCSRmb3JtbmFtZXNbJHR5
cGVdID0gJHJzWyduYW1lJ107CgkJfQoJfQoKCWVjaG8gbi5zdGFydFRhYmxlKCdsaXN0Jywg
JycsICcnLCAnJywgJycpLgoKCQluLic8Zm9ybSBuYW1lPSJwb3N0LWZvcm0iIG1ldGhvZD0i
cG9zdCIgYWN0aW9uPSJpbmRleC5waHAiPicuCgkJbi5oSW5wdXQoJ2V2ZW50JywgJ2Fzdl90
dW1ibGVsb2cnKS4KCQluLmhJbnB1dCgnc3RlcCcsICdEZXNpZ24nKS4KCQluLmhJbnB1dCgn
YWN0aW9uJywgJ3NhdmUnKS4KCQluLmhJbnB1dCgnbWV0aG9kJywgJ3Bvc3QnKS4KCQl0cih0
ZGEoIkVkaXQgdGhlIGZvcm0gdGhhdCBoYW5kbGVzIDxiPnBvc3RzICgiLiRmb3JtbmFtZXNb
J3Bvc3QnXS4iKTwvYj4uIiwgJyBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXIiJykpLgoJCXRy
KHRkKHRleHRfYXJlYSgnZm9ybScsICcxNTAnLCAnNTAwJywgJGVkaXRmb3Jtc1sncG9zdCdd
KSkpLgoJCXRyKHRkYShmSW5wdXQoJ3N1Ym1pdCcsJ3NhdmVfc2V0dGluZ3MnLCdzYXZlJywi
cHVibGlzaCIsICcnLCAnJywgJycsIDQpLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0Iicp
KS4nPC9mb3JtPicuCgoJCW4uJzxmb3JtIG5hbWU9InF1b3RlLWZvcm0iIG1ldGhvZD0icG9z
dCIgYWN0aW9uPSJpbmRleC5waHAiPicuCgkJbi5oSW5wdXQoJ2V2ZW50JywgJ2Fzdl90dW1i
bGVsb2cnKS4KCQluLmhJbnB1dCgnc3RlcCcsICdEZXNpZ24nKS4KCQluLmhJbnB1dCgnYWN0
aW9uJywgJ3NhdmUnKS4KCQluLmhJbnB1dCgnbWV0aG9kJywgJ3F1b3RlJykuCgkJdHIodGRh
KCdFZGl0IHRoZSBmb3JtIHRoYXQgaGFuZGxlcyA8Yj5xdW90ZXMgKCcuJGZvcm1uYW1lc1sn
cXVvdGUnXS4nKTwvYj4uJywgJyBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXIiJykpLgoJCXRy
KHRkKHRleHRfYXJlYSgnZm9ybScsICcxNTAnLCAnNTAwJywgJGVkaXRmb3Jtc1sncXVvdGUn
XSkpKS4KCQl0cih0ZGEoZklucHV0KCdzdWJtaXQnLCdzYXZlX3NldHRpbmdzJywnc2F2ZScs
InB1Ymxpc2giLCAnJywgJycsICcnLCA0KSwgJyBzdHlsZT0idGV4dC1hbGlnbjpyaWdodCIn
KSkuJzwvZm9ybT4nLgoKCQluLic8Zm9ybSBuYW1lPSJsaW5rLWZvcm0iIG1ldGhvZD0icG9z
dCIgYWN0aW9uPSJpbmRleC5waHAiPicuCgkJbi5oSW5wdXQoJ2V2ZW50JywgJ2Fzdl90dW1i
bGVsb2cnKS4KCQluLmhJbnB1dCgnc3RlcCcsICdEZXNpZ24nKS4KCQluLmhJbnB1dCgnYWN0
aW9uJywgJ3NhdmUnKS4KCQluLmhJbnB1dCgnbWV0aG9kJywgJ2xpbmsnKS4KCQl0cih0ZGEo
J0VkaXQgdGhlIGZvcm0gdGhhdCBoYW5kbGVzIDxiPmxpbmtzICgnLiRmb3JtbmFtZXNbJ2xp
bmsnXS4nKTwvYj4uJywgJyBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXIiJykpLgoJCXRyKHRk
KHRleHRfYXJlYSgnZm9ybScsICcxNTAnLCAnNTAwJywgJGVkaXRmb3Jtc1snbGluayddKSkp
LgoJCXRyKHRkYShmSW5wdXQoJ3N1Ym1pdCcsJ3NhdmVfc2V0dGluZ3MnLCdzYXZlJywicHVi
bGlzaCIsICcnLCAnJywgJycsIDQpLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0IicpKS4n
PC9mb3JtPicuCgoJCW4uJzxmb3JtIG5hbWU9InBob3RvLWZvcm0iIG1ldGhvZD0icG9zdCIg
YWN0aW9uPSJpbmRleC5waHAiPicuCgkJbi5oSW5wdXQoJ2V2ZW50JywgJ2Fzdl90dW1ibGVs
b2cnKS4KCQluLmhJbnB1dCgnc3RlcCcsICdEZXNpZ24nKS4KCQluLmhJbnB1dCgnYWN0aW9u
JywgJ3NhdmUnKS4KCQluLmhJbnB1dCgnbWV0aG9kJywgJ3Bob3RvJykuCgkJdHIodGRhKCdF
ZGl0IHRoZSBmb3JtIHRoYXQgaGFuZGxlcyA8Yj5waG90b3MgKCcuJGZvcm1uYW1lc1sncGhv
dG8nXS4nKTwvYj4uJywgJyBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXIiJykpLgoJCXRyKHRk
KHRleHRfYXJlYSgnZm9ybScsICcxNTAnLCAnNTAwJywgJGVkaXRmb3Jtc1sncGhvdG8nXSkp
KS4KCQl0cih0ZGEoZklucHV0KCdzdWJtaXQnLCdzYXZlX3NldHRpbmdzJywnc2F2ZScsInB1
Ymxpc2giLCAnJywgJycsICcnLCA0KSwgJyBzdHlsZT0idGV4dC1hbGlnbjpyaWdodCInKSku
JzwvZm9ybT4nLgoKCWVuZFRhYmxlKCk7Cn0KCmZ1bmN0aW9uIGFzdl90dW1ibGVsb2dfZmVl
ZHMoJHN0ZXApCnsKCWFzdl90dW1ibGVsb2dfdmVyaWZ5VGFibGUoKTsKCgkkdHlwZXMgPSBh
cnJheSgncG9zdCc9Pidwb3N0JywgJ3F1b3RlJz0+J3F1b3RlJywgJ3Bob3RvJz0+J3Bob3Rv
JywgJ2xpbmsnPT4nbGluaycpOwoKCSRtZXNzYWdlID0gJyc7CgoJZXh0cmFjdChkb1NsYXNo
KGxBdHRzKGFycmF5KAoJCSdyc3NwYXRoJyA9PiAnJywKCQkndHlwZScJPT4gJycsCgkJJ2Nv
bW1lbnRzJyA9PiAnJywKCQknY2F0ZWdvcnkxJyA9PicnLAoJCSdjYXRlZ29yeTInID0+ICcn
LAoJCSdrZXl3b3JkcycJPT4nJywKCQknSUQnID0+JycsCgkJKSwKCQlncHNhKGFycmF5KAoJ
CQkncnNzcGF0aCcsCgkJCSd0eXBlJywKCQkJJ2NvbW1lbnRzJywKCQkJJ2NhdGVnb3J5MScs
CgkJCSdjYXRlZ29yeTInLAoJCQkna2V5d29yZHMnLAoJCQknSUQnCgkJCSkpKSkpOwoKCWV4
dHJhY3QoZ2V0X2Fzdl90dW1ibGVsb2dfcHJlZnMoKSk7CgoJaWYoZ3BzKCdzYXZlX2ZlZWRz
JykpCgl7CgkJaWYoaW5fYXJyYXkoJHR5cGUsJHR5cGVzKSkKCQl7CgkJCWlmKCR0aXRsZSA9
IGFzdl90dW1ibGVsb2dfdmVyaWZ5RmVlZCgkcnNzcGF0aCwgJHNpbXBsZXBpZSkpCgkJCXsK
CQkJCSR0aXRsZSA9IGRvU2xhc2goJHRpdGxlKTsKCQkJCWlmKCRJRCkKCQkJCXsKCQkJCQlz
YWZlX3VwZGF0ZSgnYXN2X3R1bWJsZWxvZ19mZWVkcycsCgkJCQkJCSJGZWVkID0gJyRyc3Nw
YXRoJywKCQkJCQkJVGl0bGUgPSAnJHRpdGxlJywKCQkJCQkJVHlwZSA9ICckdHlwZScsCgkJ
CQkJCUNhdGVnb3J5MSA9ICckY2F0ZWdvcnkxJywKCQkJCQkJQ2F0ZWdvcnkyID0gJyRjYXRl
Z29yeTInLAoJCQkJCQlLZXl3b3JkcyA9ICcka2V5d29yZHMnLAoJCQkJCQlBbm5vdGF0ZSA9
ICckY29tbWVudHMnIiwKCQkJCQkJIklEID0gJElEIgoJCQkJCQkpOwoJCQkJfQoJCQkJZWxz
ZQoJCQkJewoJCQkJCXNhZmVfaW5zZXJ0KCdhc3ZfdHVtYmxlbG9nX2ZlZWRzJywKCQkJCQkJ
IkZlZWQgPSAnJHJzc3BhdGgnLAoJCQkJCQlUaXRsZSA9ICckdGl0bGUnLAoJCQkJCQlUeXBl
ID0gJyR0eXBlJywKCQkJCQkJQ2F0ZWdvcnkxID0gJyRjYXRlZ29yeTEnLAoJCQkJCQlDYXRl
Z29yeTIgPSAnJGNhdGVnb3J5MicsCgkJCQkJCUtleXdvcmRzID0gJyRrZXl3b3JkcycsCgkJ
CQkJCUFubm90YXRlID0gJyRjb21tZW50cyciCgkJCQkJCSk7CgkJCQl9CgkJCX0KCQkJZWxz
ZQoJCQl7CgkJCQkkbWVzc2FnZSA9ICJOb3QgYSB2YWxpZCBmZWVkLiI7CgkJCX0KCQl9CgkJ
ZWxzZQoJCXsKCQkJJG1lc3NhZ2UgPSAiVHlwZSBpcyByZXF1aXJlZC4gIC0gJHR5cGUgLSI7
CgkJfQoJfQoJaWYoZ3BzKCdhY3Rpb24nKT09J2RlbGV0ZScpCgl7CgkJJHNlbGVjdGVkID0g
cHMoJ3NlbGVjdGVkJyk7CgkJaWYgKCRzZWxlY3RlZCkKCQl7CgkJCSRpZHMgPSBhcnJheSgp
OwoJCQlmb3JlYWNoICgkc2VsZWN0ZWQgYXMgJGlkKQoJCQl7CgkJCQkkaWQgPSBhc3NlcnRf
aW50KCRpZCk7CgkJCQlpZiAoc2FmZV9kZWxldGUoJ2Fzdl90dW1ibGVsb2dfZmVlZHMnLCAi
SUQgPSAkaWQiKSkKCQkJCXsKCQkJCQkkaWRzW10gPSAkaWQ7CgkJCQl9CgkJCX0KCQkJJGNo
YW5nZWQgPSBqb2luKCcsICcsICRpZHMpOwoJCQkkbWVzc2FnZSA9ICJSZW1vdmVkICRjaGFu
Z2VkIjsKCQl9Cgl9CgoJcGFnZXRvcCgnVHVtYmxlbG9nJywgJG1lc3NhZ2UpOwoKCWVjaG8g
bi5uLic8Zm9ybSBuYW1lPSJ0dW1ibGVsb2ctYWRtaW4iIG1ldGhvZD0icG9zdCIgYWN0aW9u
PSJpbmRleC5waHA/ZXZlbnQ9YXN2X3R1bWJsZWxvZyZzdGVwPUZlZWRzIj4nLgoJaElucHV0
KCdzdGVwJywgJ0ZlZWRzJykuCgloSW5wdXQoJ0lEJywgJElEKTsKCgllY2hvIGFzdl90dW1i
bGVsb2dfdGl0bGUoJHN0ZXApLgoKCQl0YWcoJzxhIGhyZWY9ImluZGV4LnBocD9ldmVudD1h
c3ZfdHVtYmxlbG9nJnN0ZXA9RmVlZHMiPkFkZCBOZXcgRmVlZDwvYT4nICwnaDMnLCAnIHN0
eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IicpLgoKCQlzdGFydFRhYmxlKCdsaXN0JykuCgoJ
CQl0cih0ZCgnQXRvbS9SU1MgUGF0aCcpLnRkKGZJbnB1dCgndGV4dCcsICdyc3NwYXRoJywg
JHJzc3BhdGgpKSkuCgoJCQl0cih0ZCgnVHlwZScpLnRkKHNlbGVjdElucHV0KCd0eXBlJywg
JHR5cGVzLCAkdHlwZSwgMCkpKS4KCgkJCXRyKHRkKCdDb21tZW50cycpLnRkKG9ub2ZmUmFk
aW8oJ2NvbW1lbnRzJywgKCRjb21tZW50cyk/JGNvbW1lbnRzOiIxIikpKS4KCgkJCXRyKHRk
KCdDYXRlZ29yeTEnKS50ZChhc3ZfY2F0X3BvcHVwKCRjYXRlZ29yeTEsICdjYXRlZ29yeTEn
KSkpLgoKCQkJdHIodGQoJ0NhdGVnb3J5MicpLnRkKGFzdl9jYXRfcG9wdXAoJGNhdGVnb3J5
MiwgJ2NhdGVnb3J5MicpKSkuCgoJCQl0cih0ZCgnS2V5d29yZHMnKS50ZChmSW5wdXQoJ3Rl
eHQnLCAna2V5d29yZHMnLCAka2V5d29yZHMpKSkuCgoJCQl0cih0ZGEoZklucHV0KCdzdWJt
aXQnLCdzYXZlX2ZlZWRzJywgKCRJRCk/J3NhdmUnOidhZGQnLCJwdWJsaXNoIiwgJycsICcn
LCAnJywgNCksICcgY29sc3Bhbj0yJykpLgoKCQllbmRUYWJsZSgpLic8L2Zvcm0+JzsKCWVj
aG8gdGFnKCJDdXJyZW50IEZlZWRzIiwgImgzIiwgJyBzdHlsZT0idGV4dC1hbGlnbjpjZW50
ZXIiJykuCgkJJzxmb3JtIG5hbWU9Imxvbmdmb3JtIiBtZXRob2Q9InBvc3QiIGFjdGlvbj0i
aW5kZXgucGhwP2V2ZW50PWFzdl90dW1ibGVsb2cmc3RlcD1GZWVkcyI+Jy4KCQloSW5wdXQo
J2V2ZW50JywgJ2Fzdl90dW1ibGVsb2cnKS4KCQloSW5wdXQoJ3N0ZXAnLCAnRmVlZHMnKS4K
CQloSW5wdXQoJ2FjdGlvbicsICdkZWxldGUnKS4KCgkJbi5zdGFydFRhYmxlKCdsaXN0Jywg
JycsICcnLCAnJywgJzkwJScpLgoJCW4udHIoCgkJCW4uY29sdW1uX2hlYWQoJ0lEJywgJ2lk
JywgJ2xpc3QnLCB0cnVlLCAnJywgJycsICcnKS4KCQkJbi5jb2x1bW5faGVhZCgnVGl0bGUn
LCAndGl0bGUnLCAnbGlzdCcsIHRydWUsICcnLCAnJywgJycpLgoJCQluLmNvbHVtbl9oZWFk
KCdGZWVkJywgJ2ZlZWQnLCAnbGlzdCcsIHRydWUsICcnLCAnJywgJycpLgoJCQluLmNvbHVt
bl9oZWFkKCdUeXBlJywgJ3R5cGUnLCAnbGlzdCcsIHRydWUsICcnLCAnJywgJycpLgoJCQlu
LmNvbHVtbl9oZWFkKCdDb21tZW50cycsICdjb21tZW50cycsICdsaXN0JywgdHJ1ZSwgJycs
ICcnLCAnJykuCgkJCW4uY29sdW1uX2hlYWQoJ0NhdGVnb3J5MScsICdjYXRlZ29yeTEnLCAn
bGlzdCcsIHRydWUsICcnLCAnJywgJycpLgoJCQluLmNvbHVtbl9oZWFkKCdDYXRlZ29yeTIn
LCAnY2F0ZWdvcnkxJywgJ2xpc3QnLCB0cnVlLCAnJywgJycsICcnKS4KCQkJbi5jb2x1bW5f
aGVhZCgnS2V5d29yZHMnLCAnS2V5d29yZHMnLCAnbGlzdCcsIHRydWUsICcnLCAnJywgJycp
LgoJCQloQ2VsbCgpCgkJKTsKCSRycyA9IHNhZmVfcm93c19zdGFydCgiKiIsICJhc3ZfdHVt
YmxlbG9nX2ZlZWRzIiwgIjE9MSIpOwoJaWYoJHJzKQoJewoJCXdoaWxlKCRhID0gbmV4dFJv
dygkcnMpKQoJCXsKCQkJZXh0cmFjdCgkYSk7CgkJCSRsaW5rID0gIjxhIGhyZWY9XCJpbmRl
eC5waHA/ZXZlbnQ9YXN2X3R1bWJsZWxvZyZzdGVwPUZlZWRzJnJzc3BhdGg9JEZlZWQmdHlw
ZT0kVHlwZSRjb21tZW50cz0kQW5ub3RhdGUmY2F0ZWdvcnkxPSRDYXRlZ29yeTEmY2F0ZWdv
cnkyPSRDYXRlZ29yeTIma2V5d29yZHM9JEtleXdvcmRzJklEPSRJRFwiPiRUaXRsZTwvYT4i
OwoKCQkJZWNobyBuLnRyKAkJCXRkKCRJRCkudGQoJGxpbmspLnRkKHN1YnN0cigkRmVlZCww
LDEwKS4nLi4uJykudGQoJFR5cGUpLnRkKCgkQW5ub3RhdGUpPyJvbiI6Im9mZiIpLnRkKCRD
YXRlZ29yeTEpLnRkKCRDYXRlZ29yeTIpLnRkKCRLZXl3b3JkcykudGQoZklucHV0KCdjaGVj
a2JveCcsICdzZWxlY3RlZFtdJywgJElEKSkpOwoKCQl9CgkJZWNobyBuLnRyKAoJCQkJdGRh
KCBzZWxlY3RfYnV0dG9ucygpLgogYXN2X3R1bWJsZWxvZ19saXN0X211bHRpZWRpdF9mb3Jt
KCksJyBjb2xzcGFuPSI5IiBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7IGJvcmRlcjogbm9u
ZTsiJykpOwoJfQoJCWVjaG8gbi5lbmRUYWJsZSgpLic8L2Zvcm0+JzsKfQoKZnVuY3Rpb24g
YXN2X3R1bWJsZWxvZ19zZXR0aW5ncygkc3RlcCkKewoJZ2xvYmFsICRwcmVmczsKCglpZihn
cHMoJ3NhdmVfc2V0dGluZ3MnKSkKCXsKCQlleHRyYWN0KGdwc2EoYXJyYXkoJ3NvdXJjZWxp
bmsnLCAndHVtYmxlbG9nc2VjdGlvbicsICdzaW1wbGVwaWUnLCAnbGlua2Zvcm0nLCAncG9z
dGZvcm0nLCAncXVvdGVmb3JtJywgJ3Bob3RvZm9ybScpKSk7CgoJCSgkc291cmNlbGluayk/
IHNldF9wcmVmKCdzb3VyY2VsaW5rJywgJHNvdXJjZWxpbmssICdhc3ZfdHVtYmxlbG9nJywg
JycpOicnOwoKCQkoJHR1bWJsZWxvZ3NlY3Rpb24pPyBzZXRfcHJlZigndHVtYmxlbG9nc2Vj
dGlvbicsICR0dW1ibGVsb2dzZWN0aW9uLCAnYXN2X3R1bWJsZWxvZycsICcnKTonJzsKCgkJ
KCRzaW1wbGVwaWUpPyBzZXRfcHJlZignc2ltcGxlcGllJywgJHNpbXBsZXBpZSwgJ2Fzdl90
dW1ibGVsb2cnLCAnJyk6Jyc7CgoJCSgkcG9zdGZvcm0pPyBzZXRfcHJlZigncG9zdGZvcm0n
LCAkcG9zdGZvcm0sICdhc3ZfdHVtYmxlbG9nJywgJycpOicnOwoKCQkoJHF1b3RlZm9ybSk/
IHNldF9wcmVmKCdxdW90ZWZvcm0nLCAkcXVvdGVmb3JtLCAnYXN2X3R1bWJsZWxvZycsICcn
KTonJzsKCgkJKCRwaG90b2Zvcm0pPyBzZXRfcHJlZigncGhvdG9mb3JtJywgJHBob3RvZm9y
bSwgJ2Fzdl90dW1ibGVsb2cnLCAnJyk6Jyc7CgoJCSgkbGlua2Zvcm0pPyBzZXRfcHJlZign
bGlua2Zvcm0nLCAkbGlua2Zvcm0sICdhc3ZfdHVtYmxlbG9nJywgJycpOicnOwoKCX0KCglw
YWdldG9wKCdUdW1ibGVsb2cnLCAoZ3BzKCdzYXZlJykpPyAnU2V0dGluZ3Mgc2F2ZWQnOicn
KTsKCglleHRyYWN0KGdldF9hc3ZfdHVtYmxlbG9nX3ByZWZzKCkpOwoKCWVjaG8gbi5uLic8
Zm9ybSBuYW1lPSJ0dW1ibGVsb2ctYWRtaW4iIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJpbmRl
eC5waHA/ZXZlbnQ9YXN2X3R1bWJsZWxvZyI+JzsKCgllY2hvIGFzdl90dW1ibGVsb2dfdGl0
bGUoJHN0ZXApLgoKCQl0YWcoJ0dlbmVyYWwgU2V0dGluZ3MnICwnaDMnLCAnIHN0eWxlPSJ0
ZXh0LWFsaWduOiBjZW50ZXI7IicpLgoKCQlzdGFydFRhYmxlKCdsaXN0JykuCgoJCQl0cih0
ZCgnU291cmNlIExpbmsgRmllbGQnKS50ZChhc3ZfY3VzdG9tX3BvcHVwKCRzb3VyY2VsaW5r
LCAnc291cmNlbGluaycpKSkuCgoJCQl0cih0ZCgnVHVtYmxlbG9nIFNlY3Rpb24nKS50ZChh
c3Zfc2VjdGlvbl9wb3B1cCgkdHVtYmxlbG9nc2VjdGlvbiwKCQkJJ3R1bWJsZWxvZ3NlY3Rp
b24nKSkpLgoKCQkJdHIodGQoJ1NpbXBsZVBpZSBQYXRoJykudGQoZklucHV0KCd0ZXh0Jywg
J3NpbXBsZXBpZScsICRzaW1wbGVwaWUpKSkuCgoJCWVuZFRhYmxlKCkuCgoJCXRhZygnICcs
ICdwJykuCgoJCXRhZygnRm9ybXMnICwnaDMnLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50
ZXI7IicpLgoKCQlzdGFydFRhYmxlKCdsaXN0JykuCgoJCQl0cih0ZCgnUG9zdCBGb3JtJyku
dGQoYXN2X2Zvcm1fcG9wdXAoJHBvc3Rmb3JtLCAncG9zdGZvcm0nKSkpLgoKCQkJdHIodGQo
J1F1b3RlIEZvcm0nKS50ZChhc3ZfZm9ybV9wb3B1cCgkcXVvdGVmb3JtLCAncXVvdGVmb3Jt
JykpKS4KCgkJCXRyKHRkKCdQaG90byBGb3JtJykudGQoYXN2X2Zvcm1fcG9wdXAoJHBob3Rv
Zm9ybSwgJ3Bob3RvZm9ybScpKSkuCgoJCQl0cih0ZCgnTGluayBGb3JtJykudGQoYXN2X2Zv
cm1fcG9wdXAoJGxpbmtmb3JtLCAnbGlua2Zvcm0nKSkpLgoKCQkJdHIodGRhKGZJbnB1dCgn
c3VibWl0Jywnc2F2ZV9zZXR0aW5ncycsJ3NhdmUnLCJwdWJsaXNoIiwgJycsICcnLCAnJywg
NCksICcgY29sc3Bhbj0yJykpLgoKCQllbmRUYWJsZSgpOwoKCWVjaG8gbi5uLic8L2Zvcm0+
Jy4KCSc8aDMgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyIj48YSBocmVmPSJodHRwOi8vJy4k
cHJlZnNbJ3NpdGV1cmwnXS4nLz9hc3ZfdHVtYmxlbG9nX3VwZGF0ZWZlZWRzPTEiPm1hbnVh
bGx5IHVwZGF0ZSBmZWVkczwvYT48L2gzPic7Cn0KCmlmKGdwcygnYXN2X3R1bWJsZWxvZ191
cGRhdGVmZWVkcycpPT0xKQp7CgoJZXh0cmFjdChnZXRfYXN2X3R1bWJsZWxvZ19wcmVmcygp
KTsKCSRycyA9IHNhZmVfcm93c19zdGFydCgiKiIsICJhc3ZfdHVtYmxlbG9nX2ZlZWRzIiwg
IjE9MSIpOwoJZWNobyAnPHByZT4nOwoJaWYoJHJzKQoJewoJCXdoaWxlKCRhID0gbmV4dFJv
dygkcnMpKQoJCXsKCQkJZXh0cmFjdCgkYSk7CgkJCXN3aXRjaCgkVHlwZSkKCQkJewoJCQkJ
Y2FzZSAicG9zdCI6CgkJCQkJJGZvcm0gPSAkcG9zdGZvcm07CgkJCQkJYnJlYWs7CgkJCQlj
YXNlICJxdW90ZSI6CgkJCQkJJGZvcm0gPSAkcXVvdGVmb3JtOwoJCQkJCWJyZWFrOwoJCQkJ
Y2FzZSAicGhvdG8iOgoJCQkJCSRmb3JtID0gJHBob3RvZm9ybTsKCQkJCQlicmVhazsKCQkJ
CWNhc2UgImxpbmsiOgoJCQkJCSRmb3JtID0gJGxpbmtmb3JtOwoJCQkJCWJyZWFrOwoJCQl9
CgkJCWVjaG8gYXN2X3Jzc2dyYWIoYXJyYXkoCgkJCQknZmVlZCcJPT4gJEZlZWQsCgkJCQkn
c2ltcGxlcGllJyA9PiAkc2ltcGxlcGllLAoJCQkJJ3R5cGUnCT0+ICRUeXBlLAoJCQkJJ2Nh
dGVnb3J5MScJPT4gJENhdGVnb3J5MSwKCQkJCSdjYXRlZ29yeTInID0+ICRDYXRlZ29yeTIs
CgkJCQknc2VjdGlvbicJPT4gJHR1bWJsZWxvZ3NlY3Rpb24sCgkJCQknZm9ybScJCT0+ICRm
b3JtLAoJCQkJJ2xpbmtmaWVsZCcJPT4gJHNvdXJjZWxpbmssCgkJCQkncHViZGF0ZScgPT4g
JycsCgkJCQknY29tbWVudHMnCT0+ICRBbm5vdGF0ZSwKCQkJCSdrZXl3b3JkcycJPT4gJEtl
eXdvcmRzLAoJCQkJKSk7CgkJfQoJfQoJZWNobyAnPC9wcmU+JzsKCWV4aXQoKTsKCn0KCmZ1
bmN0aW9uIGFzdl9yc3NncmFiKCRhdHRzKQp7CglnbG9iYWwgJHByZWZzLCAkdHhwY2ZnOwoJ
ZXh0cmFjdCgkcHJlZnMpOwoKCWV4dHJhY3QobEF0dHMoYXJyYXkoCgkJCSdmZWVkJyAgICAg
ICA9PiAnJywKCQkJJ3NpbXBsZXBpZScgID0+ICR0eHBjZmdbJ3R4cGF0aCddLicvbGliL3Np
bXBsZXBpZS5pbmMnLAoJCQkndHlwZScJCT0+ICdzaW1wbGUnLAoJCQknY2F0ZWdvcnkxJwk9
PiAnJywKCQkJJ2NhdGVnb3J5MicgPT4gJycsCgkJCSdzZWN0aW9uJwk9PiAnZGVmYXVsdCcs
CgkJCSdmb3JtJwkJPT4gJycsCgkJCSdsaW5rZmllbGQnCT0+ICdjdXN0b21fMScsCgkJCSdw
dWJkYXRlJyA9PiAnJywKCQkJJ2NvbW1lbnRzJwk9PiAnb24nLAoJCQkna2V5d29yZHMnCT0+
ICcnLAoJCQkpLCRhdHRzKSk7CgoJJG1lc3NhZ2UgPSAnJzsKCgkvL0dldCBTaW1wbGVQaWUK
CXJlcXVpcmVfb25jZSgkc2ltcGxlcGllKTsKCgkvL0NyZWF0ZSBhbmQgc2V0dXAgU2ltcGxl
UGllIEluc3RhbmNlCgkkdGhlZmVlZCA9IG5ldyBTaW1wbGVQaWUoKTsKCSR0aGVmZWVkLT5z
ZXRfZmVlZF91cmwoJGZlZWQpOwoJJHRoZWZlZWQtPnNldF9mYXZpY29uX2hhbmRsZXIoJy4v
cGx1Z2lucy9hc3ZfcnNzZ3JhYi5waHAnLCAnZmF2aWNvbicpOwoJJHRoZWZlZWQtPmVuYWJs
ZV9jYWNoZShmYWxzZSk7CgkkdGhlZmVlZC0+aGFuZGxlX2NvbnRlbnRfdHlwZSgpOwoKCSRt
ZXNzYWdlIC49ICJHZXR0aW5nICRmZWVkXHJcbiI7CgkvL0dldCB0aGUgZmVlZAoJJHN1Y2Nl
c3MgPSAkdGhlZmVlZC0+aW5pdCgpOwoKCWlmKCRzdWNjZXNzKSB7CgkJJG1lc3NhZ2UgLj0g
Ilx0U3VjY2VzcyFcclxuIjsKCQkkZmVlZGl0ZW1zID0gJHRoZWZlZWQtPmdldF9pdGVtcygp
OwoJCSRmYXZpY29uID0gJHRoZWZlZWQtPmdldF9mYXZpY29uKCk7CgkJJG1lc3NhZ2UgLj0g
Ilx0RmF2aWNvbiAtICIuJGZhdmljb24uIlxyXG4iOwoJCWZvcmVhY2goJGZlZWRpdGVtcyBh
cyAkZmVlZGl0ZW0pIHsKCQkJLy8gR2V0IGl0ZW0gdGl0bGUKCQkJJG91dFsndGl0bGUnXSA9
IGFkZHNsYXNoZXMoJGZlZWRpdGVtLT5nZXRfdGl0bGUoKSk7CgkJCSRmZWVkaXRlbXMgPSAk
dGhlZmVlZC0+Z2V0X2l0ZW1zKCk7CgoJCQkvL0dldCB0aGUgcGVybWFsaW5rCgkJCSRvdXRb
J3Blcm1hbGluayddID0gJGZlZWRpdGVtLT5nZXRfbGluaygpOwoKCQkJLy9HZXQgdGhlIGlt
YWdlCgkJCSRvdXRbJ2ltYWdlJ10gPSAkZmF2aWNvbjsKCgkJCS8vIENoZWNrIGFuZCByZXRy
aWV2ZSBkYXRlCgkJCWlmKCRwdWJkYXRlIT0nJykKCQkJewoJCQkJJGRhdGVUYWtlbiA9ICRm
ZWVkaXRlbS0+Z2V0X2l0ZW1fdGFncygnaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEu
MS8nLCAnZGF0ZS5UYWtlbicpOwoJCQkJcHJpbnRfcigkZGF0ZVRha2VuWzBdWydkYXRhJ10p
OwoJCQkJZGllKCJub3QgeWV0IGltcGxlbWVudGVkIik7CgkJCX0KCQkJZWxzZWlmKCRmZWVk
aXRlbS0+Z2V0X2RhdGUoKSkgewoJCQkJJG91dFsicG9zdGVkIl0gPSAkZmVlZGl0ZW0tPmdl
dF9kYXRlKCdVJyk7CgkJCQkkd2hlbiA9ICJmcm9tX3VuaXh0aW1lKCIuJG91dFsncG9zdGVk
J10uIikiOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHdoZW4gPSAnbm93KCknOwoJCQl9CgoJ
CQkvL0dldCB0aGUgYm9keQoJCQlpZigkdHlwZT09Im1lZGlhIikKCQkJewoJCQkJJGVuY3Mg
PSAkZmVlZGl0ZW0tPmdldF9lbmNsb3N1cmVzKCk7CgkJCQlmb3JlYWNoKCRlbmNzIGFzICRl
bmNsb3N1cmUpCgkJCQl7CgkJCQkJcHJpbnRfcigkZW5jbG9zdXJlKTsKCQkJCQlpZighaXNf
bnVsbCgkZW5jbG9zdXJlLT5nZXRfbGluaygpKSl7CgkJCQkJCSRlbmNfbGluayA9ICRlbmNs
b3N1cmUtPmdldF9saW5rKCk7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCSRlbmNf
bGluayA9ICRlbmNfbGluazsKCQkJCQl9CgkJCQkJJGVuY19saW5rID0gc3RyX3JlcGxhY2Uo
JyZhbXA7JywgJyYnLCAkZW5jX2xpbmspOwoJCQkJCSRvdXRbJ2JvZHknXSA9ICc8b2JqZWN0
IHR5cGU9ImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoIiB3aWR0aD0iNTA2IiBoZWln
aHQ9IjQxNCIgZGF0YT0iJy4kZW5jX2xpbmsuJyI+CgkgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICA8cGFyYW0gbmFtZT0icXVhbGl0eSIgdmFsdWU9ImhpZ2giIC8+Cgkg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGFyYW0gbmFtZT0iYWxsb3dm
dWxsc2NyZWVuIiB2YWx1ZT0idHJ1ZSIgLz4KCSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIDxwYXJhbSBuYW1lPSJzY2FsZSIgdmFsdWU9InNob3dBbGwiIC8+CgkgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGFyYW0gbmFtZT0ibW92aWUiIHZh
bHVlPSInLiRlbmNfbGluay4nIiAvPgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICA8L29iamVjdD4nOwoJCQkJfQoJCQl9CgkJCWVsc2VpZigkdHlwZT09InBob3RvIikKCQkJ
ewoJCQkJaWYoIWRlZmluZWQoIklNUEFUSCIpKSBkZWZpbmUoIklNUEFUSCIsJHBhdGhfdG9f
c2l0ZS4nLycuJGltZ19kaXIuJy8nKTsKCQkJCSRmZWVkRGVzY3JpcHRpb24gPSAkZmVlZGl0
ZW0tPmdldF9jb250ZW50KCk7CgkJCQkkaW1hZ2UgPSByZXR1cm5JbWFnZSgkZmVlZERlc2Ny
aXB0aW9uKTsKCQkJCSRpbWFnZSA9IHVybGRlY29kZShzY3JhcGVJbWFnZSgkaW1hZ2UpKTsK
CQkJCS8vQ2hlY2sgdG8gc2VlIGlmIGl0IG5lZWRzIHRvIGJlIGltcG9ydGVkIGludG8gVFhQ
IEltYWdlCgkJCQlpZigkaW1hZ2UpCgkJCQl7CgkJCQkJLy9nZXQgZXh0ZW5zaW9uCgkJCQkJ
JGV4dCA9IHN0cnJjaHIoJGltYWdlLCAnLicpOwoJCQkJCSRjaGVjayA9IHNhZmVfZmllbGQo
J0lEJywgJ3R4cF9pbWFnZScsICJOQU1FID0gJyIuJG91dFsndGl0bGUnXS4iJyBBTkQgREFU
RSA9ICR3aGVuIik7CgkJCQkJaWYoJGNoZWNrKQoJCQkJCXsKCQkJCQkJJGltYWdlSUQgPSAk
Y2hlY2s7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCXNhZmVfaW5zZXJ0KCd0eHBf
aW1hZ2UnLAoJCQkJCQkJIm5hbWUgPSAnIi4kb3V0Wyd0aXRsZSddLiInLAoJCQkJCQkJZXh0
ID0gJyRleHQnLAoJCQkJCQkJZGF0ZSA9ICR3aGVuIgoJCQkJCQkpOwoJCQkJCQkkaW1hZ2VJ
RCA9IG15c3FsX2luc2VydF9pZCgpOwoJCQkJCQkvLyBjcmVhdGUgYSBuZXcgY3VybCByZXNv
dXJjZQoJCQkJCQkkY2ggPSBjdXJsX2luaXQoKTsKCQkJCQkJLy8gc2V0IFVSTCBhbmQgb3Ro
ZXIgYXBwcm9wcmlhdGUgb3B0aW9ucwoJCQkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRf
VVJMLCAiJGltYWdlIik7CgkJCQkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5U
UkFOU0ZFUiwgdHJ1ZSk7CgkJCQkJCS8vIGdyYWIgVVJMLCBhbmQgcmV0dXJuIG91dHB1dAoJ
CQkJCQkkb3V0cHV0ID0gY3VybF9leGVjKCRjaCk7CgkJCQkJCS8vIGNsb3NlIGN1cmwgcmVz
b3VyY2UsIGFuZCBmcmVlIHVwIHN5c3RlbSByZXNvdXJjZXMKCQkJCQkJY3VybF9jbG9zZSgk
Y2gpOwoJCQkJCQkvL3dyaXRlIHRvIGZpbGUKCQkJCQkJJGZpbGVuYW1lID0gSU1QQVRILmJh
c2VuYW1lKCRpbWFnZSk7CgkJCQkJCSRmaCA9IGZvcGVuKElNUEFUSC4kaW1hZ2VJRC4kZXh0
LCAndycpOwoJCQkJCQlmd3JpdGUoJGZoLCAkb3V0cHV0KTsKCQkJCQkJZmNsb3NlKCRmaCk7
CgkJCQkJCSRzaG9ydHBhdGggPSBiYXNlbmFtZSgkaW1hZ2UpOwoJCQkJCQkkbWVzc2FnZSAu
PSAiXHRJbXBvcnRlZCAkZmlsZW5hbWVcclxuIjsKCQkJCQl9CgkJCQl9CgkJCQkkb3V0Wydi
b2R5J10gPSAnPGEgaHJlZj0iJy4kb3V0WydwZXJtYWxpbmsnXS4nIj48aW1nIHNyYz0iJy5o
dS4kaW1nX2Rpci4iLyIuJGltYWdlSUQuJGV4dC4nIiAvPjwvYT4nOwoJCQl9CgkJCWVsc2UK
CQkJewoJCQkJaWYoIWJlZ2luc1dpdGgoJGZlZWRpdGVtLT5nZXRfZGVzY3JpcHRpb24oKSwg
IjxwIikpCgkJCQl7CgkJCQkJJG91dFsnYm9keSddID0gZG90YWcoYWRkc2xhc2hlcygkZmVl
ZGl0ZW0tPmdldF9kZXNjcmlwdGlvbigpKSwgJ3AnKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsK
CQkJCQkkb3V0Wydib2R5J10gPSBhZGRzbGFzaGVzKCRmZWVkaXRlbS0+Z2V0X2Rlc2NyaXB0
aW9uKCkpOwoJCQkJfQoJCQl9CgoJCQkvL0NoZWNrIHRvIHNlZSBpZiB0aGUgYXJ0aWNsZSBo
YXMgYWxyZWFkeSBiZWVuIGltcG9ydGVkCgkJCSRleGlzdHMgPSBzYWZlX2NvdW50KCd0ZXh0
cGF0dGVybicsICJUaXRsZSA9ICciLiRvdXRbJ3RpdGxlJ10uIicgQU5EIFBvc3RlZD0kd2hl
biBBTkQgU2VjdGlvbj0nJHNlY3Rpb24nIik7CgoJCQkvL0lmIGl0IGhhc24ndCB0aGVuIGxl
dCdzIGFkZCBpdAoJCQlpZigkZXhpc3RzPT0wKXsKCQkJCS8vQ2hlY2sgdG8gc2VlIGlmIGNh
dGVnb3J5MSBleGlzdHMKCQkJCWlmKCRjYXRlZ29yeTEgJiYgIWZldGNoX2NhdGVnb3J5X3Rp
dGxlKCRjYXRlZ29yeTEpKQoJCQkJewoJCQkJCS8vQ3JlYXRlIG5ldyBjYXRlZ29yeQoJCQkJ
CSRuYW1lID0gc2FuaXRpemVGb3JVcmwoJGNhdGVnb3J5MSk7CgkJCQkJJGV4aXN0cyA9IHNh
ZmVfZmllbGQoJ25hbWUnLCAndHhwX2NhdGVnb3J5JywgIm5hbWUgPSAnIi5kb1NsYXNoKCRu
YW1lKS4iJyBhbmQgdHlwZSA9ICdhcnRpY2xlJyIpOwoJCQkJCWlmICghJGV4aXN0cykKCQkJ
CQl7CgkJCQkJCSRxID0gc2FmZV9pbnNlcnQoJ3R4cF9jYXRlZ29yeScsICJuYW1lID0gJyIu
ZG9TbGFzaCgkbmFtZSkuIicsIHRpdGxlID0gJyIuZG9TbGFzaCgkY2F0ZWdvcnkxKS4iJywg
dHlwZSA9ICdhcnRpY2xlJywgcGFyZW50ID0gJ3Jvb3QnIik7CgkJCQkJCXJlYnVpbGRfdHJl
ZSgncm9vdCcsIDEsICdhcnRpY2xlJyk7CgkJCQkJfQoJCQkJfQoJCQkJLy9DaGVjayB0byBz
ZWUgaWYgY2F0ZWdvcnkyIGV4aXN0cwoJCQkJaWYoJGNhdGVnb3J5MiAmJiAhZmV0Y2hfY2F0
ZWdvcnlfdGl0bGUoJGNhdGVnb3J5MikpCgkJCQl7CgkJCQkJLy9DcmVhdGUgbmV3IGNhdGVn
b3J5CgkJCQkJJG5hbWUgPSBzYW5pdGl6ZUZvclVybCgkY2F0ZWdvcnkyKTsKCQkJCQkkZXhp
c3RzID0gc2FmZV9maWVsZCgnbmFtZScsICd0eHBfY2F0ZWdvcnknLCAibmFtZSA9ICciLmRv
U2xhc2goJG5hbWUpLiInIGFuZCB0eXBlID0gJ2FydGljbGUnIik7CgkJCQkJaWYgKCEkZXhp
c3RzKQoJCQkJCXsKCQkJCQkJJHEgPSBzYWZlX2luc2VydCgndHhwX2NhdGVnb3J5JywgIm5h
bWUgPSAnIi5kb1NsYXNoKCRuYW1lKS4iJywgdGl0bGUgPSAnIi5kb1NsYXNoKCRjYXRlZ29y
eTIpLiInLCB0eXBlID0gJ2FydGljbGUnLCBwYXJlbnQgPSAncm9vdCciKTsKCQkJCQkJcmVi
dWlsZF90cmVlKCdyb290JywgMSwgJ2FydGljbGUnKTsKCQkJCQl9CgkJCQl9CgoJCQkJLy9H
ZXQgY3VzdG9tIGZpZWxkCgkJCQkkbWVzc2FnZSAuPSAiXHRcdCRsaW5rZmllbGQgLSBjdXN0
b21cclxuIjsKCQkJCSRjdXN0b21fcm93ID0gc2FmZV9yb3coIioiLCAndHhwX3ByZWZzJywg
InZhbD0nJGxpbmtmaWVsZCciKTsKCQkJCWlmKCRjdXN0b21fcm93KQoJCQkJewoJCQkJCSRs
aW5rZmllbGRfc2V0ID0gJ2N1c3RvbV8nLiRjdXN0b21fcm93Wydwb3NpdGlvbiddOwoJCQkJ
fQoJCQkJZWxzZQoJCQkJewoJCQkJCSRsaW5rZmllbGRfc2V0ID0gImN1c3RvbV8xIjsKCQkJ
CX0KCQkJCSRyZXN1bHQgPSBzYWZlX2luc2VydCgidGV4dHBhdHRlcm4iLAoJCQkJCSJUaXRs
ZSAgICAgICAgICAgPSAnIi4kb3V0Wyd0aXRsZSddLiInLAoJCQkJCUJvZHkgICAgICAgICAg
ICA9ICciLiRvdXRbJ2JvZHknXS4iJywKCQkJCQlCb2R5X2h0bWwgICAgICAgPSAnIi4kb3V0
Wydib2R5J10uIicsCgkJCQkJRXhjZXJwdCAgICAgICAgID0gJycsCgkJCQkJRXhjZXJwdF9o
dG1sICAgID0gJycsCgkJCQkJSW1hZ2UgICAgICAgICAgID0gJyIuJGZhdmljb24uIicsCgkJ
CQkJS2V5d29yZHMgICAgICAgID0gJyRrZXl3b3JkcycsCgkJCQkJU3RhdHVzICAgICAgICAg
ID0gIDQsCgkJCQkJUG9zdGVkICAgICAgICAgID0gICR3aGVuLAoJCQkJCUxhc3RNb2QgICAg
ICAgICA9ICBub3coKSwKCQkJCQlBdXRob3JJRCAgICAgICAgPSAnJywKCQkJCQlTZWN0aW9u
ICAgICAgICAgPSAnJHNlY3Rpb24nLAoJCQkJCUNhdGVnb3J5MSAgICAgICA9ICckY2F0ZWdv
cnkxJywKCQkJCQlDYXRlZ29yeTIgICAgICAgPSAnJGNhdGVnb3J5MicsCgkJCQkJdGV4dGls
ZV9ib2R5ICAgID0gIDAsCgkJCQkJdGV4dGlsZV9leGNlcnB0ID0gIDAsCgkJCQkJQW5ub3Rh
dGUgICAgICAgID0gIDEsCgkJCQkJb3ZlcnJpZGVfZm9ybSAgID0gJyRmb3JtJywKCQkJCQl1
cmxfdGl0bGUgICAgICAgPSAnJywKCQkJCQkkbGlua2ZpZWxkX3NldCAJCT0gJyIuJG91dFsn
cGVybWFsaW5rJ10uIicsCgkJCQkJQW5ub3RhdGVJbnZpdGUgID0gJ2NvbW1lbnRzJywKCQkJ
CQl1aWQgICAgICAgICAgICAgPSAnIi5tZDUodW5pcWlkKHJhbmQoKSx0cnVlKSkuIicsCgkJ
CQkJZmVlZF90aW1lICAgICAgID0gJHdoZW4iCgkJCQkpOwoKCQkJCWlmKCRyZXN1bHQpCgkJ
CQl7CgkJCQkJLy9kb19waW5ncygpOwoJCQkJCXVwZGF0ZV9sYXN0bW9kKCk7CgkJCQkJJG1l
c3NhZ2UgLj0gIlx0QWRkZWQgLSAiLiRvdXRbJ3RpdGxlJ10uIlxyXG4iOwoJCQkJfQoJCQl9
CgkJCWVsc2UKCQkJewoJCQkJJG1lc3NhZ2UgLj0gIlx0RXhpc3RzIC0gIi4kb3V0Wyd0aXRs
ZSddLiJcclxuIjsKCQkJfQoJCX0KCX0KCWVsc2UgewoJCSRtZXNzYWdlIC49ICJcdCIuJHRo
ZWZlZWQtPmVycm9yOwoJfQoJcmV0dXJuICRtZXNzYWdlOwp9CgovL2hlbHBlciBmdW5jdGlv
bnMKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLwovL0dldCBhbiBpbWFnZQpmdW5jdGlvbiByZXR1cm5JbWFnZSAoJHRl
eHQpIHsKICAgICR0ZXh0ID0gaHRtbF9lbnRpdHlfZGVjb2RlKCR0ZXh0KTsKICAgIC8vZWNo
byAkdGV4dDsKICAgICRwYXR0ZXJuID0gIi88aW1nW14+XStcPi9pIjsKICAgIHByZWdfbWF0
Y2goJHBhdHRlcm4sICR0ZXh0LCAkbWF0Y2hlcyk7CiAgICAkdGV4dCA9ICRtYXRjaGVzWzBd
OwogICAgcmV0dXJuICR0ZXh0Owp9CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vRmlsdGVyIG91dCBpbWFnZSB1
cmwgb25seQpmdW5jdGlvbiBzY3JhcGVJbWFnZSgkdGV4dCkgewoKICAgICRwYXR0ZXJuID0g
Jy9zcmM9W1wnIl0/KFteXCciID5dKylbXCciID5dLyc7CgpwcmVnX21hdGNoKCRwYXR0ZXJu
LCAkdGV4dCwgJGxpbmspOwoKJGxpbmsgPSAkbGlua1sxXTsKJGxpbmsgPSB1cmxlbmNvZGUo
JGxpbmspOwpyZXR1cm4gJGxpbms7Cgp9CgpmdW5jdGlvbiBiZWdpbnNXaXRoKCRzdHIsICRz
dWIpIHsKICAgIHJldHVybiAoc3RybmNtcCgkc3RyLCAkc3ViLCBzdHJsZW4oJHN1YikpID09
IDApOwoJfSI7czozOiJtZDUiO3M6MzI6ImRmMjRlOGI0NDBiYzMxZTdkNWNjOGZmOTEwYTVm
ODg5Ijt9
