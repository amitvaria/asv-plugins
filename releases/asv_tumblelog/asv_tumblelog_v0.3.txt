# asv_tumblelog v0.3
# Implementing the greatness of tumblelogs
# Amit Varia
# http://www.amitvaria.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjQ6Im5hbWUiO3M6MTM6ImFzdl90dW1ibGVsb2ciO3M6NzoidmVyc2lvbiI7czoz
OiIwLjMiO3M6NjoiYXV0aG9yIjtzOjEwOiJBbWl0IFZhcmlhIjtzOjEwOiJhdXRob3JfdXJp
IjtzOjI1OiJodHRwOi8vd3d3LmFtaXR2YXJpYS5jb20vIjtzOjExOiJkZXNjcmlwdGlvbiI7
czo0MDoiSW1wbGVtZW50aW5nIHRoZSBncmVhdG5lc3Mgb2YgdHVtYmxlbG9ncyI7czo0OiJ0
eXBlIjtpOjE7czo0OiJoZWxwIjtzOjMyMDM6Igk8aDE+YXN2X3R1bWJsZWxvZzwvaDE+CgoJ
PGgyPnRoZSBiZWdpbm5pbmcgb2YgYSBsaWZlc3RyZWFtPC9oMj4KCgk8aDM+U3VtbWFyeTwv
aDM+CgoJPHA+SSB1c2VkIHRvIGJlIGFuIGF2aWQgdXNlciBvZiBzZXJ2aWNlcyBsaWtlIDxh
IGhyZWY9Imh0dHA6Ly93d3cudHVtYmxyLmNvbSI+VHVtYmxyPC9hPiwgYnV0IGZvdW5kIG15
c2VsZiB3YW50aW5nIG1vcmUgZnJlZWRvbSBhbmQgY29udHJvbCBvdmVyIG15IHBvc3RzLiBQ
bGVhc2UgZm9sbG93IHRoZSBzZXR1cCBpbnN0cnVjdGlvbnMgYmVsb3cgdG8gZW5zdXJlIHRo
YXQgZXZlcnl0aGluZyBnZXRzIHNldHVwLiBhc3ZfdHVtYmxlbG9nIHdpbGwgaW1wb3J0IGZl
ZWRzIGZvciB5b3UgYXMgPHNwYW4gY2xhc3M9ImNhcHMiPlRYUDwvc3Bhbj4gYXJ0aWNsZXMu
PC9wPgoKCTxoMz5TZXR1cC9JbnN0YWxsYXRpb248L2gzPgoKCTxwPmFzdl90dW1ibGVsb2cg
cmVxdWlyZXMgPGEgaHJlZj0iaHR0cDovL3d3dy5zaW1wbGVwaWUub3JnIj5TaW1wbGVQaWU8
L2E+LCBzbyBwbGVhc2UgZ3JhYiB0aGUgbGF0ZXN0IHZlcnNpb24uIEFmdGVyIGFjdGl2YXRp
bmcgdGhlIHBsdWdpbiB5b3Ugd2lsbCBoYXZlIGEgbmV3IHRhYiB1bmRlciAmIzgyMjA7RXh0
ZW5zaW9ucyYjODIyMTsgY2FsbGVkICYjODIyMDtUdW1ibGVsb2cmIzgyMjE7LiBJbiB0aGlz
IHRhYiB5b3UgaGF2ZSBmb3VyIG9wdGlvbnMgJiM4MjExOyBTZXR0aW5ncywgRmVlZHMsIFBh
Z2UgRGVzaWduLCBGb3JtIERlc2lnbi48L3A+CgoJPHA+T25jZSBldmVyeXRoaW5nIGlzIHNl
dHVwIHlvdSYjODIxNztsbCBuZWVkIHRvIHNldHVwIGEgY3JvbiBqb2IgdG8gZ2V0IGEgc3Bl
Y2lmaWMgdXJsIHRvIHVwZGF0ZSB0aGUgZmVlZHMuIFRoZSBwYXRoIHdvdWxkIGJlOiBodHRw
Oi8vd2Vic2l0ZXVybC8/YXN2X3R1bWJsZWxvZ191cGRhdGVmZWVkcz0xIChub3RlOiB0aGlz
IGlzIG5vdCB0aGUgdGV4dHBhdHRlcm4gZm9sZGVyLCBidXQgdGhlIHVybCB0byB5b3VyIG1h
aW4gc2l0ZSkuPC9wPgoKCTxoMz5TZXR0aW5nczwvaDM+CgoJPHA+QmVmb3JlIHVzaW5nIGFz
dl90dW1ibGVsb2cgeW91JiM4MjE3O2xsIG5lZWQgdG8gc2V0dXAgYSBjb3VwbGUgdGhpbmdz
LgoJPHVsPgoJCTxsaT48c3Ryb25nPlNvdXJjZSBMaW5rIEZpZWxkPC9zdHJvbmc+ICYjODIx
MTsgc2VsZWN0IHRoZSBjdXN0b20gZmllbGQgeW91IHdvdWxkIGxpa2UgdG8gdXNlIHRvIHN0
b3JlIHRoZSBvcmlnaW5hbCBsaW5rIHRvIHRoZSBpbXBvcnRlZCBwb3N0PC9saT4KCQk8bGk+
PHN0cm9uZz5UdW1ibGVsb2cgU2VjdGlvbjwvc3Ryb25nPiAmIzgyMTE7IHRoZSBzZWN0aW9u
IHRvIGltcG9ydCB0aGUgZmVlZCBpbnRvPC9saT4KCQk8bGk+PHN0cm9uZz5TaW1wbGVQaWUg
UGF0aDwvc3Ryb25nPiAmIzgyMTE7IC90aGUvcGF0aC90by95b3VyL1NpbXBsZVBpZS9pbnN0
YWxsPC9saT4KCTwvdWw+PC9wPgoKCTx1bD4KCQk8bGk+PHN0cm9uZz5Qb3N0IEZvcm08L3N0
cm9uZz4gJiM4MjExOyB0aGUgZm9ybSB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIGZlZWRzIHR5
cGVkIGFzIHBvc3RzPC9saT4KCQk8bGk+PHN0cm9uZz5RdW90ZSBGb3JtPC9zdHJvbmc+ICYj
ODIxMTsgdGhlIGZvcm0gdGhhdCBzaG91bGQgYmUgdXNlZCB0byBmZWVkcyB0eXBlZCBhcyBx
dW90ZXM8L2xpPgoJCTxsaT48c3Ryb25nPkxpbmsgRm9ybTwvc3Ryb25nPiAmIzgyMTE7IHRo
ZSBmb3JtIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gZmVlZHMgdHlwZWQgYXMgbGlua3M8L2xp
PgoJCTxsaT48c3Ryb25nPlBob3RvIEZvcm08L3N0cm9uZz4gJiM4MjExOyB0aGUgZm9ybSB0
aGF0IHNob3VsZCBiZSB1c2VkIHRvIGZlZWRzIHR5cGVkIGFzIHBob3RvczwvbGk+Cgk8L3Vs
PgoKCTxoMz5GZWVkczwvaDM+CgoJPHA+SW4gdGhlICYjODIxNjtGZWVkcyYjODIxNzsgc2Vj
dGlvbiB5b3UgYWRkL2VkaXQvdmlldyBhbGwgeW91ciBmZWVkcyB5b3UgYXJlIGltcG9ydGlu
Zy4gV2hlbiBhZGRpbmcgYSBmZWVkLCBmaWxsIGluIHRoZSBpbmZvcm1hdGlvbiBhbmQgY2hv
b3NlIHRoZSBhcHByb3ByaWF0ZSB0eXBlLiBZb3UgY2FuIGNyZWF0ZSB5b3VyIG93biBkZWZp
bml0aW9ucyBmb3IgZWFjaCB0eXBlIHNpbmNlIHlvdSBjYW4gZWRpdCB0aGUgZGVzaWduIGlu
IGxhdHRlciBzZWN0aW9ucy48L3A+CgoJPHA+PHN0cm9uZz5UaGUgb25lIGV4Y2VwdGlvbiBp
cyB0aGUgcGhvdG8gdHlwZS48L3N0cm9uZz4gSWYgYSBmZWVkIGlzIHR5cGVkIGFzIGEgcGhv
dG8gdGhlbiBhc3ZfdHVtYmxlbG9nIHdpbGwgcGFyc2UgdGhlIGJvZHkgb2YgYSBwb3N0IGFu
ZCBncmFiIHRoZSBmaXJzdCBpbWFnZSwgaW1wb3J0IGl0IGludG8gPHNwYW4gY2xhc3M9ImNh
cHMiPlRYUDwvc3Bhbj4sIGFuZCBtYWtlIHRoZSBib2R5IG9mIHRoZSBpbXBvcnRlZCBhcnRp
Y2xlIGEgcmVmZXJlbmNlIHRvIHRoZSBpbXBvcnRlZCBwaG90by48L3A+CgoJPGgzPlBhZ2Ug
RGVzaWduPC9oMz4KCgk8cD5IZXJlIHlvdSBjYW4gZWRpdCB0aGUgcGFnZSB0aGF0IGlzIGFz
c29jaWF0ZWQgdG8geW91ciB0dW1ibGVsb2cgc2VjdGlvbi48L3A+CgoJPGgzPlBhZ2UgU3R5
bGU8L2gzPgoKCTxwPkhlcmUgeW91IGNhbiBlZGl0IHRoZSBzdHlsZSB0aGF0IGlzIGFzc29j
aWF0ZWQgdG8geW91ciB0dW1ibGVsb2cgc2VjdGlvbi48L3A+CgoJPGgzPkZvcm0gRGVzaWdu
PC9oMz4KCgk8cD5IZXJlIHlvdSBjYW4gZWRpdCB0aGUgNCBmb3JtcyB1c2VkIGZvciB5b3Vy
IHR1bWJsZWxvZy48L3A+CgoJPGgzPkJvb2ttYXJrbGV0PC9oMz4KCgk8cD5BZGQgdGhpcyB0
byB5b3VyIGJvb2ttYXJrcyBhbmQgeW91IGNhbiBjcmVhdGUgcXVpY2sgcG9zdHMgZm9yIHNp
dGVzIHlvdSB2aXNpdC48L3A+CgoJPGgzPlJlY2NvbW1lbmRhdGlvbnM8L2gzPgoKCTxwPllv
dSYjODIxNztsbCBsZWFybiB0aGF0IHlvdSBoYXZlIGEgbG90IG9mIHJvb20gZm9yIGZsZXhp
YmlsaXR5IGFuZCBjdXN0b21pemF0aW9uIHdpdGggYXN2X3R1bWJsZWxvZy4gSSB3b3VsZCBy
ZWNvbW1lbmQgaW5zdGFsbGluZyBwbHVnaW5zIGxpa2UgcnNzX2F1dG9fZXhjZXJwdCBhbmQg
dHJ1X3RhZ3MuIFdpdGggcnNzX2F1dG9fZXhjZXJwdCB5b3UgY2FuIHRydW5jYXRlIHBvc3Rz
IGFuZCB0cnVfdGFncyB3aWxsIGxldCB5b3UgaW1wbGVtZW50IGEgdGFnZ2luZyBzb2x1dGlv
biB1c2luZyB0aGUgJiM4MjE2O0tleXdvcmRzJiM4MjE3OyBmaWVsZC48L3A+IjtzOjQ6ImNv
ZGUiO3M6MjU5NjI6IgppZiAoQHR4cGludGVyZmFjZSA9PSAnYWRtaW4nKQp7CglhZGRfcHJp
dnMoJ2Fzdl90dW1ibGVsb2cnLCcxLDIsMyw0Jyk7IC8vIEFsbG93IG9ubHkgdXNlcmxldmVs
cyAxLDIsMyw0IGFjZXNzIHRvIHRoaXMgcGx1Z2luLgoJcmVnaXN0ZXJfdGFiKCdleHRlbnNp
b25zJywgJ2Fzdl90dW1ibGVsb2cnLCAiVHVtYmxlbG9nIik7CglyZWdpc3Rlcl9jYWxsYmFj
aygiYXN2X3R1bWJsZWxvZyIsICJhc3ZfdHVtYmxlbG9nIik7Cn0KCi8vLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8g
VXRpbGl0eSBGdW5jdGlvbnMKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX3Rp
dGxlKCRhY3RpdmUpCnsKCgkkdGl0bGVzID0gYXJyYXkoJ1NldHRpbmdzJz0+J1NldHRpbmdz
JywgJ0ZlZWRzJz0+J0ZlZWRzJywgJ3BhZ2UtZGVzaWduJz0+J1BhZ2UgRGVzaWduJywgJ3Bh
Z2Utc3R5bGUnPT4nUGFnZSBTdHlsZScsICdEZXNpZ24nPT4nRm9ybSBEZXNpZ24nLCAnYm9v
a21hcmtsZXQnPT4nQm9va21hcmtsZXQnKTsKCSRuZXd0aXRsZXMgPSBhcnJheSgpOwoJZm9y
ZWFjaCgkdGl0bGVzIGFzICRrZXk9PiR0aXRsZSkKCXsKCQlpZigkdGl0bGUhPSRhY3RpdmUp
CgkJewoJCQkkdGl0bGU9JzxhIGhyZWY9ImluZGV4LnBocD9ldmVudD1hc3ZfdHVtYmxlbG9n
JnN0ZXA9Jy4ka2V5LiciPicuJHRpdGxlLic8L2E+JzsKCQl9CgkJYXJyYXlfcHVzaCgkbmV3
dGl0bGVzLCAkdGl0bGUpOwoJfQoKCXJldHVybiB0YWcoam9pbigkbmV3dGl0bGVzLCAiIHwg
IiksICdoMScsICcgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsiJyk7Cn0KLy8tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQpmdW5jdGlvbiBhc3Zfc2VjdGlvbl9wb3B1cCgkU2VjdGlvbiwgJGlkKQp7CgkkcnMgPSBz
YWZlX2NvbHVtbignbmFtZScsICd0eHBfc2VjdGlvbicsICJuYW1lICE9ICdkZWZhdWx0JyIp
OwoKCWlmICgkcnMpCgl7CgkJcmV0dXJuIHNlbGVjdElucHV0KCd0dW1ibGVsb2dzZWN0aW9u
JywgJHJzLCAkU2VjdGlvbiwgZmFsc2UsICcnLCAkaWQpOwoJfQoKCXJldHVybiBmYWxzZTsK
fQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl9jdXN0b21fcG9wdXAoJEN1c3RvbSwgJGlkKQp7
CgkkcnMgPSBzYWZlX2NvbHVtbigndmFsJywgJ3R4cF9wcmVmcycsICJuYW1lIExJS0UgJ2N1
c3RvbV8lX3NldCciKTsKCglpZiAoJHJzKQoJewoJCXJldHVybiBzZWxlY3RJbnB1dCgnc291
cmNlbGluaycsICRycywgJEN1c3RvbSwgZmFsc2UsICcnLCAkaWQpOwoJfQoKCXJldHVybiBm
YWxzZTsKfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl9mb3JtX3BvcHVwKCRDdXN0b20sICRp
ZCwgJG5hbWU9IiIpCnsKCSRycyA9IHNhZmVfY29sdW1uKCduYW1lJywgJ3R4cF9mb3JtJywg
InR5cGU9J2FydGljbGUnIik7CgoJaWYgKCRycykKCXsKCQlyZXR1cm4gc2VsZWN0SW5wdXQo
JGlkLCAkcnMsICRDdXN0b20sIGZhbHNlLCAnJywgJGlkKTsKCX0KCglyZXR1cm4gZmFsc2U7
Cn0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQpmdW5jdGlvbiBhc3ZfY2F0X3BvcHVwKCRDdXN0b20sICRpZCwgJG5h
bWU9IiIpCnsKCSRycyA9IGdldFRyZWUoJ3Jvb3QnLCAnYXJ0aWNsZScpOwoKCWlmICgkcnMp
Cgl7CgkJcmV0dXJuIHRyZWVTZWxlY3RJbnB1dCgkbmFtZSwkcnMsJEN1c3RvbSwgJGlkKTsK
CX0KCglyZXR1cm4gZmFsc2U7Cn0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGdldF9hc3ZfdHVtYmxl
bG9nX3ByZWZzKCkKewoJJG91dCA9IGFycmF5KCk7CgkkciA9IHNhZmVfcm93c19zdGFydCgn
bmFtZSwgdmFsJywgJ3R4cF9wcmVmcycsICJldmVudD0nYXN2X3R1bWJsZWxvJyIpOwoJaWYg
KCRyKSB7CgkJd2hpbGUgKCRhID0gbmV4dFJvdygkcikpIHsKCQkJJG91dFskYVsnbmFtZSdd
XSA9ICRhWyd2YWwnXTsKCQl9CgoJCXJldHVybiBsQXR0cyhhcnJheSgKCQkJJ3NvdXJjZWxp
bmsnCT0+ICcnLAoJCQkndHVtYmxlbG9nc2VjdGlvbicgPT4gJycsCgkJCSdzaW1wbGVwaWUn
ID0+ICcnLAoJCQkncG9zdGZvcm0nCT0+ICcnLAoJCQkncXVvdGVmb3JtJwk9PiAnJywKCQkJ
J3Bob3RvZm9ybScJPT4gJycsCgkJCSdsaW5rZm9ybScgCT0+ICcnLAoJCQkncnNzZmVlZHBh
Z2UnID0+ICcnLAoJCQkpLCRvdXQpOwoKCX0KCXJldHVybiBmYWxzZTsKfQovLyAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
CmZ1bmN0aW9uIGFzdl90dW1ibGVsb2dfbGlzdF9tdWx0aWVkaXRfZm9ybSgpCnsKCSRtZXRo
b2RzID0gYXJyYXkoCgkJJ2RlbGV0ZScgICAgICAgICAgPT4gZ1R4dCgnZGVsZXRlJyksCgkp
OwoKCXJldHVybiBldmVudF9tdWx0aWVkaXRfZm9ybSgnbGlzdCcsICRtZXRob2RzLCAnJywn
JywnJywnJywnJyk7Cn0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX3Zlcmlm
eUZlZWQoJGZlZWQsICRzaW1wbGVwaWUpCnsKCS8vR2V0IFNpbXBsZVBpZQoJcmVxdWlyZV9v
bmNlKCRzaW1wbGVwaWUpOwoKCS8vQ3JlYXRlIGFuZCBzZXR1cCBTaW1wbGVQaWUgSW5zdGFu
Y2UKCSR0aGVmZWVkID0gbmV3IFNpbXBsZVBpZSgpOwoJJHRoZWZlZWQtPnNldF9mZWVkX3Vy
bCgkZmVlZCk7CgkkdGhlZmVlZC0+ZW5hYmxlX2NhY2hlKGZhbHNlKTsKCSR0aGVmZWVkLT5o
YW5kbGVfY29udGVudF90eXBlKCk7CgoJLy9HZXQgdGhlIGZlZWQKCSRzdWNjZXNzID0gJHRo
ZWZlZWQtPmluaXQoKTsKCglyZXR1cm4gKCRzdWNjZXNzKT8gJHRoZWZlZWQtPmdldF90aXRs
ZSgpOiAgZmFsc2U7Cgp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl90dW1ibGVsb2dfdmVy
aWZ5VGFibGUoKQp7CglpZihzYWZlX3F1ZXJ5KCJTSE9XIFRBQkxFUyBMSUtFICciLnNhZmVf
cGZ4KCdhc3ZfdHVtYmxlbG9nX2ZlZWRzJykuIiciKSkKCXsKCQkkdmVyc2lvbiA9IG15c3Fs
X2dldF9zZXJ2ZXJfaW5mbygpOwoJCS8vVXNlICJFTkdJTkUiIGlmIHZlcnNpb24gb2YgTXlT
UUwgPiAoNC4wLjE4IG9yIDQuMS4yKQoJCSR0YWJsZXR5cGUgPSAoIGludHZhbCgkdmVyc2lv
blswXSkgPj0gNSB8fCBwcmVnX21hdGNoKCcjXjRcLigwXC5bMi05XXwoMVs4OV0pKXwoMVwu
WzItOV0pIycsJHZlcnNpb24pKQoJCQkJCQk/ICIgRU5HSU5FPU15SVNBTSAiCgkJCQkJCTog
IiBUWVBFPU15SVNBTSAiOwoJCSRyZXN1bHQgPSBzYWZlX3F1ZXJ5KCJDUkVBVEUgVEFCTEUg
SUYgTk9UIEVYSVNUUyBgIi5QRlguImFzdl90dW1ibGVsb2dfZmVlZHNgKAoJCQlgSURgIGlu
dCgxMSkgTk9UIE5VTEwgYXV0b19pbmNyZW1lbnQsCgkJCWBUaXRsZWAgdmFyY2hhcigyNTUp
IE5PVCBOVUxMIGRlZmF1bHQgJycsCgkJCWBGZWVkYCB2YXJjaGFyKDI1NSkgTk9UIE5VTEwg
ZGVmYXVsdCAnJywKCQkJYEFubm90YXRlYCBpbnQoMikgTk9UIE5VTEwgZGVmYXVsdCAnMCcs
CgkJCWBUeXBlYCB2YXJjaGFyKDEyOCkgTk9UIE5VTEwgZGVmYXVsdCAnJywKCQkJYENhdGVn
b3J5MWAgdmFyY2hhcigxMjgpIE5PVCBOVUxMIGRlZmF1bHQgJycsCgkJCWBDYXRlZ29yeTJg
IHZhcmNoYXIoMTI4KSBOT1QgTlVMTCBkZWZhdWx0ICcnLAoJCQlgS2V5d29yZHNgIHZhcmNo
YXIoMjU1KSBOT1QgTlVMTCBkZWZhdWx0ICcnLAoJCQkgUFJJTUFSWSBLRVkgIChgSURgKQoJ
CQkgKSAkdGFibGV0eXBlIFBBQ0tfS0VZUz0xIEFVVE9fSU5DUkVNRU5UPTIgIik7Cgl9Cn0K
Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX3RyaW10d2l0dGVyKCRpbnB1dCwg
JHNvdXJjZSkKewoJaWYoc3Ryc3RyKCRzb3VyY2UsICJ0d2l0dGVyLmNvbSIpKQoJewoJCXJl
dHVybiBwcmVnX3JlcGxhY2UoJy8oXHcrOikgKFwuKikvJywgJyQyJywgJGlucHV0KTsKCX0K
CXJldHVybiAkaW5wdXQ7Cn0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZnVuY3Rpb24gYXN2X3R1bWJsZWxvZ19m
ZWVkc19saXN0KCRhdHRzLCR0aGluZykKewp9CgpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nKCRl
dmVudCwgJHN0ZXApCnsKCSRzdGVwPSgkc3RlcD09JycpPydTZXR0aW5ncyc6JHN0ZXA7CgoJ
c3dpdGNoKCRzdGVwKQoJewoJCWNhc2UgJ1NldHRpbmdzJzoKCQkJYXN2X3R1bWJsZWxvZ19z
ZXR0aW5ncygkc3RlcCk7CgkJCWJyZWFrOwoJCWNhc2UgJ0ZlZWRzJzoKCQkJYXN2X3R1bWJs
ZWxvZ19mZWVkcygkc3RlcCk7CgkJCWJyZWFrOwoJCWNhc2UgJ0Rlc2lnbic6CgkJCWFzdl90
dW1ibGVsb2dfZGVzaWduKCRzdGVwKTsKCQkJYnJlYWs7CgkJY2FzZSAncGFnZS1kZXNpZ24n
OgoJCQlhc3ZfdHVtYmxlbG9nX3BhZ2VkZXNpZ24oJHN0ZXApOwoJCQlicmVhazsKCQljYXNl
ICdwYWdlLXN0eWxlJzoKCQkJYXN2X3R1bWJsZWxvZ19wYWdlc3R5bGUoJHN0ZXApOwoJCQli
cmVhazsKCQljYXNlICdib29rbWFya2xldCc6CgkJCWFzdl90dW1ibGVsb2dfYm9va21hcmts
ZXQoJHN0ZXApOwoJCQlicmVhazsKCX0KfQoKZnVuY3Rpb24gYXN2X3R1bWJsZWxvZ19ib29r
bWFya2xldCgkc3RlcCkKewoJZ2xvYmFsICRwcmVmczsKCglwYWdldG9wKCdUdW1ibGVsb2cg
PiBCb29rbWFya2xldCcsICcnKTsKCglleHRyYWN0KGdldF9hc3ZfdHVtYmxlbG9nX3ByZWZz
KCkpOwoKCWVjaG8gYXN2X3R1bWJsZWxvZ190aXRsZSgkc3RlcCk7CgoJLy9HZXQgY3VzdG9t
IGZpZWxkCgkkbGlua2ZpZWxkX3NldCA9ICcnOwoJJGN1c3RvbV9yb3cgPSBzYWZlX3Jvdygi
KiIsICd0eHBfcHJlZnMnLCAidmFsPSckc291cmNlbGluayciKTsKCWlmKCRjdXN0b21fcm93
KQoJewoJCSRsaW5rZmllbGRfc2V0ID0gJ2N1c3RvbV8nLiRjdXN0b21fcm93Wydwb3NpdGlv
biddOwoJfQoJZWxzZQoJewoJCSRsaW5rZmllbGRfc2V0ID0gImN1c3RvbV8xIjsKCX0KCgoJ
JGJvb2ttYXJrbGV0ID0gImphdmFzY3JpcHQ6dmFyIGQ9ZG9jdW1lbnQsdz13aW5kb3csZT13
LmdldFNlbGVjdGlvbixrPWQuZ2V0U2VsZWN0aW9uLHg9ZC5zZWxlY3Rpb24scz0oZT9lKCk6
KGspP2soKTooeD94LmNyZWF0ZVJhbmdlKCkudGV4dDowKSksZj0naHR0cDovLyIuJHByZWZz
WydzaXRldXJsJ10uIi90ZXh0cGF0dGVybi9pbmRleC5waHAnLGw9ZC5sb2NhdGlvbixlPWVu
Y29kZVVSSUNvbXBvbmVudCxwPSc/Ym09MSZvdmVycmlkZV9mb3JtPSIuJGxpbmtmb3JtLiIm
U2VjdGlvbj0iLiR0dW1ibGVsb2dzZWN0aW9uLiImZnJvbV92aWV3PTEmIi4kbGlua2ZpZWxk
X3NldC4iPScrZShsLmhyZWYpKycmVGl0bGU9JytlKGQudGl0bGUpKycmQm9keT0nK2Uocyks
dT1mK3A7YT1mdW5jdGlvbigpe2lmKCF3Lm9wZW4odSwndCcsJ3Rvb2xiYXI9MCxyZXNpemFi
bGU9MCxzdGF0dXM9MSx3aWR0aD04MDAsaGVpZ2h0PTgwMCcpKWwuaHJlZj11O307aWYoL0Zp
cmVmb3gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpc2V0VGltZW91dChhLDApO2Vsc2Ug
YSgpO3ZvaWQoMCkiOwoKCgoJZWNobyBzdGFydFRhYmxlKCdsaXN0JykuCgkJdHIodGRhKCdB
ZGQgdGhlIGZvbGxvd2luZyB0byB5b3VyIGJvb2ttYXJrcyB0byBtYWtlIGEgcXVpY2sgcG9z
dCcsICcgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyIicpKS4KCQl0cih0ZGEoIjxhIGhyZWY9
XCIkYm9va21hcmtsZXRcIiB0aXRsZT0nRHJhZyB0aGlzIGxpbmsgdG8geW91ciBCb29rbWFy
a3MgQmFyLiBDbGljayB0byBsZWFybiBtb3JlLic+U2hhcmUgb24gVFhQPC9hPiIsICcgc3R5
bGU9InRleHQtYWxpZ246Y2VudGVyIicpKS4KCQllbmRUYWJsZSgpOwp9CgpmdW5jdGlvbiBh
c3ZfdHVtYmxlbG9nX3BhZ2VzdHlsZSgkc3RlcCkKewoKCWV4dHJhY3QoZG9TbGFzaChnZXRf
YXN2X3R1bWJsZWxvZ19wcmVmcygpKSk7CgoJJG1lc3NhZ2UgPSAnJzsKCWlmKGdwcygnYWN0
aW9uJyk9PSdzYXZlJyAmJiBncHMoJ3N0eWxlLW5hbWUnKSkKCXsKCQkkZm9ybSA9IGRvU2xh
c2goYmFzZTY0X2VuY29kZShncHMoJ2Zvcm0nKSkpOwoJCSRycyA9IHNhZmVfdXBkYXRlKCJ0
eHBfY3NzIiwgImNzcz0nIi4kZm9ybSAuIiciLCAibmFtZSA9ICciLmRvU2xhc2goZ3BzKCdz
dHlsZS1uYW1lJykpLiInIik7CgkJJG1lc3NhZ2UgPSAnU3R5bGUgc2F2ZWQnOwoJfQoKCXBh
Z2V0b3AoJ1R1bWJsZWxvZycsICRtZXNzYWdlKTsKCgllY2hvIGFzdl90dW1ibGVsb2dfdGl0
bGUoJHN0ZXApOwoKCSRycyA9IHNhZmVfcm93KCJjc3MiLCAndHhwX3NlY3Rpb24nLCAibmFt
ZSA9ICckdHVtYmxlbG9nc2VjdGlvbiciKTsKCWlmKCRycykKCXsKCQkkcGFnZV9ycyA9IHNh
ZmVfcm93KCcqJywgJ3R4cF9jc3MnLCAibmFtZT0nIi4kcnNbJ2NzcyddLiInIik7CgkJaWYo
JHBhZ2VfcnMpCgkJewoJCQlleHRyYWN0KCRwYWdlX3JzKTsKCQkJJHRoZWNzcyA9IGJhc2U2
NF9kZWNvZGUoJGNzcyk7CgkJfQoJfQoKCgllY2hvIG4uc3RhcnRUYWJsZSgnbGlzdCcsICcn
LCAnJywgJycsICcnKS4KCQluLic8Zm9ybSBuYW1lPSJwb3N0LWZvcm0iIG1ldGhvZD0icG9z
dCIgYWN0aW9uPSJpbmRleC5waHAiPicuCgkJbi5oSW5wdXQoJ2V2ZW50JywgJ2Fzdl90dW1i
bGVsb2cnKS4KCQluLmhJbnB1dCgnc3RlcCcsICdwYWdlLXN0eWxlJykuCgkJbi5oSW5wdXQo
J2FjdGlvbicsICdzYXZlJykuCgkJbi5oSW5wdXQoJ3N0eWxlLW5hbWUnLCAkbmFtZSkuCgkJ
dHIodGRhKCJFZGl0IHRoZSBzdHlsZSB0aGF0IGhhbmRsZXMgdGhlIHR1bWJsZWxvZyBzZWN0
aW9uIDxiPiIuJG5hbWUuIjwvYj4uIiwgJyBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXIiJykp
LgoJCXRyKHRkKHRleHRfYXJlYSgnZm9ybScsICc4MDAnLCAnNjAwJywgKCR0aGVjc3MpPyR0
aGVjc3M6JycpKSkuCgkJdHIodGRhKGZJbnB1dCgnc3VibWl0Jywnc2F2ZV9zZXR0aW5ncycs
J3NhdmUnLCJwdWJsaXNoIiwgJycsICcnLCAnJywgNCksICcgc3R5bGU9InRleHQtYWxpZ246
cmlnaHQiJykpLic8L2Zvcm0+Jy4KCWVuZFRhYmxlKCk7Cn0KCmZ1bmN0aW9uIGFzdl90dW1i
bGVsb2dfcGFnZWRlc2lnbigkc3RlcCkKewoKCWV4dHJhY3QoZG9TbGFzaChnZXRfYXN2X3R1
bWJsZWxvZ19wcmVmcygpKSk7CgoJJG1lc3NhZ2UgPSAnJzsKCWlmKGdwcygnYWN0aW9uJyk9
PSdzYXZlJyAmJiBncHMoJ3BhZ2UtbmFtZScpKQoJewoJCSRycyA9IHNhZmVfdXBkYXRlKCJ0
eHBfcGFnZSIsICJ1c2VyX2h0bWw9JyIuZG9TbGFzaChncHMoJ2Zvcm0nKSkuIiciLCAibmFt
ZSA9ICciLmRvU2xhc2goZ3BzKCdwYWdlLW5hbWUnKSkuIiciKTsKCQkkbWVzc2FnZSA9ICdQ
YWdlIHNhdmVkJzsKCX0KCglwYWdldG9wKCdUdW1ibGVsb2cnLCAkbWVzc2FnZSk7CgoJZWNo
byBhc3ZfdHVtYmxlbG9nX3RpdGxlKCRzdGVwKTsKCgkkcnMgPSBzYWZlX3JvdygicGFnZSIs
ICd0eHBfc2VjdGlvbicsICJuYW1lID0gJyR0dW1ibGVsb2dzZWN0aW9uJyIpOwoJaWYoJHJz
KQoJewoJCSRwYWdlX3JzID0gc2FmZV9yb3coJyonLCAndHhwX3BhZ2UnLCAibmFtZT0nIi4k
cnNbJ3BhZ2UnXS4iJyIpOwoJCWlmKCRwYWdlX3JzKQoJCXsKCQkJZXh0cmFjdCgkcGFnZV9y
cyk7CgkJfQoJfQoKCgllY2hvIG4uc3RhcnRUYWJsZSgnbGlzdCcsICcnLCAnJywgJycsICcn
KS4KCQluLic8Zm9ybSBuYW1lPSJwb3N0LWZvcm0iIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJp
bmRleC5waHAiPicuCgkJbi5oSW5wdXQoJ2V2ZW50JywgJ2Fzdl90dW1ibGVsb2cnKS4KCQlu
LmhJbnB1dCgnc3RlcCcsICdwYWdlLWRlc2lnbicpLgoJCW4uaElucHV0KCdhY3Rpb24nLCAn
c2F2ZScpLgoJCW4uaElucHV0KCdwYWdlLW5hbWUnLCAkbmFtZSkuCgkJdHIodGRhKCJFZGl0
IHRoZSBwYWdlIHRoYXQgaGFuZGxlcyB0aGUgdHVtYmxlbG9nIHNlY3Rpb24gPGI+Ii4kbmFt
ZS4iPC9iPi4iLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciInKSkuCgkJdHIodGQodGV4
dF9hcmVhKCdmb3JtJywgJzgwMCcsICc2MDAnLCAoJHVzZXJfaHRtbCk/JHVzZXJfaHRtbDon
JykpKS4KCQl0cih0ZGEoZklucHV0KCdzdWJtaXQnLCdzYXZlX3NldHRpbmdzJywnc2F2ZScs
InB1Ymxpc2giLCAnJywgJycsICcnLCA0KSwgJyBzdHlsZT0idGV4dC1hbGlnbjpyaWdodCIn
KSkuJzwvZm9ybT4nLgoJZW5kVGFibGUoKTsKfQpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX2Rl
c2lnbigkc3RlcCkKewoKCWV4dHJhY3QoZG9TbGFzaChnZXRfYXN2X3R1bWJsZWxvZ19wcmVm
cygpKSk7CgoKCWlmKGdwcygnYWN0aW9uJyk9PSdzYXZlJykKCXsKCQlzd2l0Y2goZ3BzKCdt
ZXRob2QnKSkKCQl7CgkJCWNhc2UgInBvc3QiOgoJCQkJJHJzID0gc2FmZV91cGRhdGUoInR4
cF9mb3JtIiwgIkZvcm09JyIuZ3BzKCdmb3JtJykuIiciLCAibmFtZSA9ICckcG9zdGZvcm0n
IEFORCB0eXBlPSdhcnRpY2xlJyIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgInF1b3RlIjoKCQkJ
CSRycyA9IHNhZmVfdXBkYXRlKCJ0eHBfZm9ybSIsICJGb3JtPSciLmdwcygnZm9ybScpLiIn
IiwgIm5hbWUgPSAnJHF1b3RlZm9ybScgQU5EIHR5cGU9J2FydGljbGUnIik7CgkJCQlicmVh
azsKCQkJY2FzZSAibGluayI6CgkJCQkkcnMgPSBzYWZlX3VwZGF0ZSgidHhwX2Zvcm0iLCAi
Rm9ybT0nIi5ncHMoJ2Zvcm0nKS4iJyIsICJuYW1lID0gJyRsaW5rZm9ybScgQU5EIHR5cGU9
J2FydGljbGUnIik7CgkJCQlicmVhazsKCQkJY2FzZSAicGhvdG8iOgoJCQkJJHJzID0gc2Fm
ZV91cGRhdGUoInR4cF9mb3JtIiwgIkZvcm09JyIuZ3BzKCdmb3JtJykuIiciLCAibmFtZSA9
ICckcGhvdG9mb3JtJyBBTkQgdHlwZT0nYXJ0aWNsZSciKTsKCQkJCWJyZWFrOwoJCX0KCgl9
CgoJcGFnZXRvcCgnVHVtYmxlbG9nJywgKGdwcygnc2F2ZScpKT8gJ0Zvcm0gc2F2ZWQnOicn
KTsKCgllY2hvIGFzdl90dW1ibGVsb2dfdGl0bGUoJHN0ZXApOwoKCSRmb3JtcyA9IGFycmF5
KCdwb3N0Jz0+JHBvc3Rmb3JtLCAncXVvdGUnPT4kcXVvdGVmb3JtLCAnbGluayc9PiRsaW5r
Zm9ybSwgJ3Bob3RvJz0+JHBob3RvZm9ybSk7CgkkZWRpdGZvcm1zID0gYXJyYXkoKTsKCSRm
b3JtbmFtZXMgPSBhcnJheSgpOwoKCWZvcmVhY2goJGZvcm1zIGFzICR0eXBlPT4kZm9ybSkK
CXsKCQkkcnMgPSBzYWZlX3JvdygiKiIsICd0eHBfZm9ybScsICJuYW1lID0gJyRmb3JtJyBB
TkQgdHlwZT0nYXJ0aWNsZSciKTsKCgkJaWYoJHJzKQoJCXsKCQkJJGVkaXRmb3Jtc1skdHlw
ZV0gPSAkcnNbJ0Zvcm0nXTsKCQkJJGZvcm1uYW1lc1skdHlwZV0gPSAkcnNbJ25hbWUnXTsK
CQl9Cgl9CgoJZWNobyBuLnN0YXJ0VGFibGUoJ2xpc3QnLCAnJywgJycsICcnLCAnJykuCgoJ
CW4uJzxmb3JtIG5hbWU9InBvc3QtZm9ybSIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4
LnBocCI+Jy4KCQluLmhJbnB1dCgnZXZlbnQnLCAnYXN2X3R1bWJsZWxvZycpLgoJCW4uaElu
cHV0KCdzdGVwJywgJ0Rlc2lnbicpLgoJCW4uaElucHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJ
CW4uaElucHV0KCdtZXRob2QnLCAncG9zdCcpLgoJCXRyKHRkYSgiRWRpdCB0aGUgZm9ybSB0
aGF0IGhhbmRsZXMgPGI+cG9zdHMgKCIuJGZvcm1uYW1lc1sncG9zdCddLiIpPC9iPi4iLCAn
IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciInKSkuCgkJdHIodGQodGV4dF9hcmVhKCdmb3Jt
JywgJzE1MCcsICc1MDAnLCAkZWRpdGZvcm1zWydwb3N0J10pKSkuCgkJdHIodGRhKGZJbnB1
dCgnc3VibWl0Jywnc2F2ZV9zZXR0aW5ncycsJ3NhdmUnLCJwdWJsaXNoIiwgJycsICcnLCAn
JywgNCksICcgc3R5bGU9InRleHQtYWxpZ246cmlnaHQiJykpLic8L2Zvcm0+Jy4KCgkJbi4n
PGZvcm0gbmFtZT0icXVvdGUtZm9ybSIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBo
cCI+Jy4KCQluLmhJbnB1dCgnZXZlbnQnLCAnYXN2X3R1bWJsZWxvZycpLgoJCW4uaElucHV0
KCdzdGVwJywgJ0Rlc2lnbicpLgoJCW4uaElucHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4u
aElucHV0KCdtZXRob2QnLCAncXVvdGUnKS4KCQl0cih0ZGEoJ0VkaXQgdGhlIGZvcm0gdGhh
dCBoYW5kbGVzIDxiPnF1b3RlcyAoJy4kZm9ybW5hbWVzWydxdW90ZSddLicpPC9iPi4nLCAn
IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciInKSkuCgkJdHIodGQodGV4dF9hcmVhKCdmb3Jt
JywgJzE1MCcsICc1MDAnLCAkZWRpdGZvcm1zWydxdW90ZSddKSkpLgoJCXRyKHRkYShmSW5w
dXQoJ3N1Ym1pdCcsJ3NhdmVfc2V0dGluZ3MnLCdzYXZlJywicHVibGlzaCIsICcnLCAnJywg
JycsIDQpLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0IicpKS4nPC9mb3JtPicuCgoJCW4u
Jzxmb3JtIG5hbWU9ImxpbmstZm9ybSIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBo
cCI+Jy4KCQluLmhJbnB1dCgnZXZlbnQnLCAnYXN2X3R1bWJsZWxvZycpLgoJCW4uaElucHV0
KCdzdGVwJywgJ0Rlc2lnbicpLgoJCW4uaElucHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4u
aElucHV0KCdtZXRob2QnLCAnbGluaycpLgoJCXRyKHRkYSgnRWRpdCB0aGUgZm9ybSB0aGF0
IGhhbmRsZXMgPGI+bGlua3MgKCcuJGZvcm1uYW1lc1snbGluayddLicpPC9iPi4nLCAnIHN0
eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciInKSkuCgkJdHIodGQodGV4dF9hcmVhKCdmb3JtJywg
JzE1MCcsICc1MDAnLCAkZWRpdGZvcm1zWydsaW5rJ10pKSkuCgkJdHIodGRhKGZJbnB1dCgn
c3VibWl0Jywnc2F2ZV9zZXR0aW5ncycsJ3NhdmUnLCJwdWJsaXNoIiwgJycsICcnLCAnJywg
NCksICcgc3R5bGU9InRleHQtYWxpZ246cmlnaHQiJykpLic8L2Zvcm0+Jy4KCgkJbi4nPGZv
cm0gbmFtZT0icGhvdG8tZm9ybSIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBocCI+
Jy4KCQluLmhJbnB1dCgnZXZlbnQnLCAnYXN2X3R1bWJsZWxvZycpLgoJCW4uaElucHV0KCdz
dGVwJywgJ0Rlc2lnbicpLgoJCW4uaElucHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4uaElu
cHV0KCdtZXRob2QnLCAncGhvdG8nKS4KCQl0cih0ZGEoJ0VkaXQgdGhlIGZvcm0gdGhhdCBo
YW5kbGVzIDxiPnBob3RvcyAoJy4kZm9ybW5hbWVzWydwaG90byddLicpPC9iPi4nLCAnIHN0
eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciInKSkuCgkJdHIodGQodGV4dF9hcmVhKCdmb3JtJywg
JzE1MCcsICc1MDAnLCAkZWRpdGZvcm1zWydwaG90byddKSkpLgoJCXRyKHRkYShmSW5wdXQo
J3N1Ym1pdCcsJ3NhdmVfc2V0dGluZ3MnLCdzYXZlJywicHVibGlzaCIsICcnLCAnJywgJycs
IDQpLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0IicpKS4nPC9mb3JtPicuCgoJZW5kVGFi
bGUoKTsKfQoKZnVuY3Rpb24gYXN2X3R1bWJsZWxvZ19mZWVkcygkc3RlcCkKewoJYXN2X3R1
bWJsZWxvZ192ZXJpZnlUYWJsZSgpOwoKCSR0eXBlcyA9IGFycmF5KCdwb3N0Jz0+J3Bvc3Qn
LCAncXVvdGUnPT4ncXVvdGUnLCAncGhvdG8nPT4ncGhvdG8nLCAnbGluayc9PidsaW5rJyk7
CgoJJG1lc3NhZ2UgPSAnJzsKCglleHRyYWN0KGRvU2xhc2gobEF0dHMoYXJyYXkoCgkJJ3Jz
c3BhdGgnID0+ICcnLAoJCSd0eXBlJwk9PiAnJywKCQknY29tbWVudHMnID0+ICcnLAoJCSdj
YXRlZ29yeTEnID0+JycsCgkJJ2NhdGVnb3J5MicgPT4gJycsCgkJJ2tleXdvcmRzJwk9Picn
LAoJCSdJRCcgPT4nJywKCQkpLAoJCWdwc2EoYXJyYXkoCgkJCSdyc3NwYXRoJywKCQkJJ3R5
cGUnLAoJCQknY29tbWVudHMnLAoJCQknY2F0ZWdvcnkxJywKCQkJJ2NhdGVnb3J5MicsCgkJ
CSdrZXl3b3JkcycsCgkJCSdJRCcKCQkJKSkpKSk7CgoJZXh0cmFjdChnZXRfYXN2X3R1bWJs
ZWxvZ19wcmVmcygpKTsKCglpZihncHMoJ3NhdmVfZmVlZHMnKSkKCXsKCQlpZihpbl9hcnJh
eSgkdHlwZSwkdHlwZXMpKQoJCXsKCQkJaWYoJHRpdGxlID0gYXN2X3R1bWJsZWxvZ192ZXJp
ZnlGZWVkKCRyc3NwYXRoLCAkc2ltcGxlcGllKSkKCQkJewoJCQkJJHRpdGxlID0gZG9TbGFz
aCgkdGl0bGUpOwoJCQkJaWYoJElEKQoJCQkJewoJCQkJCXNhZmVfdXBkYXRlKCdhc3ZfdHVt
YmxlbG9nX2ZlZWRzJywKCQkJCQkJIkZlZWQgPSAnJHJzc3BhdGgnLAoJCQkJCQlUaXRsZSA9
ICckdGl0bGUnLAoJCQkJCQlUeXBlID0gJyR0eXBlJywKCQkJCQkJQ2F0ZWdvcnkxID0gJyRj
YXRlZ29yeTEnLAoJCQkJCQlDYXRlZ29yeTIgPSAnJGNhdGVnb3J5MicsCgkJCQkJCUtleXdv
cmRzID0gJyRrZXl3b3JkcycsCgkJCQkJCUFubm90YXRlID0gJyRjb21tZW50cyciLAoJCQkJ
CQkiSUQgPSAkSUQiCgkJCQkJCSk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJc2FmZV9p
bnNlcnQoJ2Fzdl90dW1ibGVsb2dfZmVlZHMnLAoJCQkJCQkiRmVlZCA9ICckcnNzcGF0aCcs
CgkJCQkJCVRpdGxlID0gJyR0aXRsZScsCgkJCQkJCVR5cGUgPSAnJHR5cGUnLAoJCQkJCQlD
YXRlZ29yeTEgPSAnJGNhdGVnb3J5MScsCgkJCQkJCUNhdGVnb3J5MiA9ICckY2F0ZWdvcnky
JywKCQkJCQkJS2V5d29yZHMgPSAnJGtleXdvcmRzJywKCQkJCQkJQW5ub3RhdGUgPSAnJGNv
bW1lbnRzJyIKCQkJCQkJKTsKCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRtZXNzYWdl
ID0gIk5vdCBhIHZhbGlkIGZlZWQuIjsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkbWVzc2Fn
ZSA9ICJUeXBlIGlzIHJlcXVpcmVkLiAgLSAkdHlwZSAtIjsKCQl9Cgl9CglpZihncHMoJ2Fj
dGlvbicpPT0nZGVsZXRlJykKCXsKCQkkc2VsZWN0ZWQgPSBwcygnc2VsZWN0ZWQnKTsKCQlp
ZiAoJHNlbGVjdGVkKQoJCXsKCQkJJGlkcyA9IGFycmF5KCk7CgkJCWZvcmVhY2ggKCRzZWxl
Y3RlZCBhcyAkaWQpCgkJCXsKCQkJCSRpZCA9IGFzc2VydF9pbnQoJGlkKTsKCQkJCWlmIChz
YWZlX2RlbGV0ZSgnYXN2X3R1bWJsZWxvZ19mZWVkcycsICJJRCA9ICRpZCIpKQoJCQkJewoJ
CQkJCSRpZHNbXSA9ICRpZDsKCQkJCX0KCQkJfQoJCQkkY2hhbmdlZCA9IGpvaW4oJywgJywg
JGlkcyk7CgkJCSRtZXNzYWdlID0gIlJlbW92ZWQgJGNoYW5nZWQiOwoJCX0KCX0KCglwYWdl
dG9wKCdUdW1ibGVsb2cnLCAkbWVzc2FnZSk7CgoJZWNobyBuLm4uJzxmb3JtIG5hbWU9InR1
bWJsZWxvZy1hZG1pbiIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBocD9ldmVudD1h
c3ZfdHVtYmxlbG9nJnN0ZXA9RmVlZHMiPicuCgloSW5wdXQoJ3N0ZXAnLCAnRmVlZHMnKS4K
CWhJbnB1dCgnSUQnLCAkSUQpOwoKCWVjaG8gYXN2X3R1bWJsZWxvZ190aXRsZSgkc3RlcCku
CgoJCXRhZygnPGEgaHJlZj0iaW5kZXgucGhwP2V2ZW50PWFzdl90dW1ibGVsb2cmc3RlcD1G
ZWVkcyI+QWRkIE5ldyBGZWVkPC9hPicgLCdoMycsICcgc3R5bGU9InRleHQtYWxpZ246IGNl
bnRlcjsiJykuCgoJCXN0YXJ0VGFibGUoJ2xpc3QnKS4KCgkJCXRyKHRkKCdBdG9tL1JTUyBQ
YXRoJykudGQoZklucHV0KCd0ZXh0JywgJ3Jzc3BhdGgnLCAkcnNzcGF0aCkpKS4KCgkJCXRy
KHRkKCdUeXBlJykudGQoc2VsZWN0SW5wdXQoJ3R5cGUnLCAkdHlwZXMsICR0eXBlLCAwKSkp
LgoKCQkJdHIodGQoJ0NvbW1lbnRzJykudGQob25vZmZSYWRpbygnY29tbWVudHMnLCAoJGNv
bW1lbnRzKT8kY29tbWVudHM6IjEiKSkpLgoKCQkJdHIodGQoJ0NhdGVnb3J5MScpLnRkKGFz
dl9jYXRfcG9wdXAoJGNhdGVnb3J5MSwgJ2NhdGVnb3J5MScpKSkuCgoJCQl0cih0ZCgnQ2F0
ZWdvcnkyJykudGQoYXN2X2NhdF9wb3B1cCgkY2F0ZWdvcnkyLCAnY2F0ZWdvcnkyJykpKS4K
CgkJCXRyKHRkKCdLZXl3b3JkcycpLnRkKGZJbnB1dCgndGV4dCcsICdrZXl3b3JkcycsICRr
ZXl3b3JkcykpKS4KCgkJCXRyKHRkYShmSW5wdXQoJ3N1Ym1pdCcsJ3NhdmVfZmVlZHMnLCAo
JElEKT8nc2F2ZSc6J2FkZCcsInB1Ymxpc2giLCAnJywgJycsICcnLCA0KSwgJyBjb2xzcGFu
PTInKSkuCgoJCWVuZFRhYmxlKCkuJzwvZm9ybT4nOwoJZWNobyB0YWcoIkN1cnJlbnQgRmVl
ZHMiLCAiaDMiLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciInKS4KCQknPGZvcm0gbmFt
ZT0ibG9uZ2Zvcm0iIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJpbmRleC5waHA/ZXZlbnQ9YXN2
X3R1bWJsZWxvZyZzdGVwPUZlZWRzIj4nLgoJCWhJbnB1dCgnZXZlbnQnLCAnYXN2X3R1bWJs
ZWxvZycpLgoJCWhJbnB1dCgnc3RlcCcsICdGZWVkcycpLgoJCWhJbnB1dCgnYWN0aW9uJywg
J2RlbGV0ZScpLgoKCQluLnN0YXJ0VGFibGUoJ2xpc3QnLCAnJywgJycsICcnLCAnOTAlJyku
CgkJbi50cigKCQkJbi5jb2x1bW5faGVhZCgnSUQnLCAnaWQnLCAnbGlzdCcsIHRydWUsICcn
LCAnJywgJycpLgoJCQluLmNvbHVtbl9oZWFkKCdUaXRsZScsICd0aXRsZScsICdsaXN0Jywg
dHJ1ZSwgJycsICcnLCAnJykuCgkJCW4uY29sdW1uX2hlYWQoJ0ZlZWQnLCAnZmVlZCcsICds
aXN0JywgdHJ1ZSwgJycsICcnLCAnJykuCgkJCW4uY29sdW1uX2hlYWQoJ1R5cGUnLCAndHlw
ZScsICdsaXN0JywgdHJ1ZSwgJycsICcnLCAnJykuCgkJCW4uY29sdW1uX2hlYWQoJ0NvbW1l
bnRzJywgJ2NvbW1lbnRzJywgJ2xpc3QnLCB0cnVlLCAnJywgJycsICcnKS4KCQkJbi5jb2x1
bW5faGVhZCgnQ2F0ZWdvcnkxJywgJ2NhdGVnb3J5MScsICdsaXN0JywgdHJ1ZSwgJycsICcn
LCAnJykuCgkJCW4uY29sdW1uX2hlYWQoJ0NhdGVnb3J5MicsICdjYXRlZ29yeTEnLCAnbGlz
dCcsIHRydWUsICcnLCAnJywgJycpLgoJCQluLmNvbHVtbl9oZWFkKCdLZXl3b3JkcycsICdL
ZXl3b3JkcycsICdsaXN0JywgdHJ1ZSwgJycsICcnLCAnJykuCgkJCWhDZWxsKCkKCQkpOwoJ
JHJzID0gc2FmZV9yb3dzX3N0YXJ0KCIqIiwgImFzdl90dW1ibGVsb2dfZmVlZHMiLCAiMT0x
Iik7CglpZigkcnMpCgl7CgkJd2hpbGUoJGEgPSBuZXh0Um93KCRycykpCgkJewoJCQlleHRy
YWN0KCRhKTsKCQkJJGxpbmsgPSAiPGEgaHJlZj1cImluZGV4LnBocD9ldmVudD1hc3ZfdHVt
YmxlbG9nJnN0ZXA9RmVlZHMmcnNzcGF0aD0kRmVlZCZ0eXBlPSRUeXBlJGNvbW1lbnRzPSRB
bm5vdGF0ZSZjYXRlZ29yeTE9JENhdGVnb3J5MSZjYXRlZ29yeTI9JENhdGVnb3J5MiZrZXl3
b3Jkcz0kS2V5d29yZHMmSUQ9JElEXCI+JFRpdGxlPC9hPiI7CgoJCQllY2hvIG4udHIoCQkJ
dGQoJElEKS50ZCgkbGluaykudGQoc3Vic3RyKCRGZWVkLDAsMTApLicuLi4nKS50ZCgkVHlw
ZSkudGQoKCRBbm5vdGF0ZSk/Im9uIjoib2ZmIikudGQoJENhdGVnb3J5MSkudGQoJENhdGVn
b3J5MikudGQoJEtleXdvcmRzKS50ZChmSW5wdXQoJ2NoZWNrYm94JywgJ3NlbGVjdGVkW10n
LCAkSUQpKSk7CgoJCX0KCQllY2hvIG4udHIoCgkJCQl0ZGEoIHNlbGVjdF9idXR0b25zKCku
CiBhc3ZfdHVtYmxlbG9nX2xpc3RfbXVsdGllZGl0X2Zvcm0oKSwnIGNvbHNwYW49IjkiIHN0
eWxlPSJ0ZXh0LWFsaWduOiByaWdodDsgYm9yZGVyOiBub25lOyInKSk7Cgl9CgkJZWNobyBu
LmVuZFRhYmxlKCkuJzwvZm9ybT4nOwp9CgpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX3NldHRp
bmdzKCRzdGVwKQp7CglnbG9iYWwgJHByZWZzOwoKCWlmKGdwcygnc2F2ZV9zZXR0aW5ncycp
KQoJewoJCWV4dHJhY3QoZ3BzYShhcnJheSgnc291cmNlbGluaycsICd0dW1ibGVsb2dzZWN0
aW9uJywgJ3NpbXBsZXBpZScsICdsaW5rZm9ybScsICdwb3N0Zm9ybScsICdxdW90ZWZvcm0n
LCAncGhvdG9mb3JtJykpKTsKCgkJKCRzb3VyY2VsaW5rKT8gc2V0X3ByZWYoJ3NvdXJjZWxp
bmsnLCAkc291cmNlbGluaywgJ2Fzdl90dW1ibGVsb2cnLCAnJyk6Jyc7CgoJCSgkdHVtYmxl
bG9nc2VjdGlvbik/IHNldF9wcmVmKCd0dW1ibGVsb2dzZWN0aW9uJywgJHR1bWJsZWxvZ3Nl
Y3Rpb24sICdhc3ZfdHVtYmxlbG9nJywgJycpOicnOwoKCQkoJHNpbXBsZXBpZSk/IHNldF9w
cmVmKCdzaW1wbGVwaWUnLCAkc2ltcGxlcGllLCAnYXN2X3R1bWJsZWxvZycsICcnKTonJzsK
CgkJKCRwb3N0Zm9ybSk/IHNldF9wcmVmKCdwb3N0Zm9ybScsICRwb3N0Zm9ybSwgJ2Fzdl90
dW1ibGVsb2cnLCAnJyk6Jyc7CgoJCSgkcXVvdGVmb3JtKT8gc2V0X3ByZWYoJ3F1b3RlZm9y
bScsICRxdW90ZWZvcm0sICdhc3ZfdHVtYmxlbG9nJywgJycpOicnOwoKCQkoJHBob3RvZm9y
bSk/IHNldF9wcmVmKCdwaG90b2Zvcm0nLCAkcGhvdG9mb3JtLCAnYXN2X3R1bWJsZWxvZycs
ICcnKTonJzsKCgkJKCRsaW5rZm9ybSk/IHNldF9wcmVmKCdsaW5rZm9ybScsICRsaW5rZm9y
bSwgJ2Fzdl90dW1ibGVsb2cnLCAnJyk6Jyc7CgoJfQoKCXBhZ2V0b3AoJ1R1bWJsZWxvZycs
IChncHMoJ3NhdmUnKSk/ICdTZXR0aW5ncyBzYXZlZCc6JycpOwoKCWV4dHJhY3QoZ2V0X2Fz
dl90dW1ibGVsb2dfcHJlZnMoKSk7CgoJZWNobyBuLm4uJzxmb3JtIG5hbWU9InR1bWJsZWxv
Zy1hZG1pbiIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBocD9ldmVudD1hc3ZfdHVt
YmxlbG9nIj4nOwoKCWVjaG8gYXN2X3R1bWJsZWxvZ190aXRsZSgkc3RlcCkuCgoJCXRhZygn
R2VuZXJhbCBTZXR0aW5ncycgLCdoMycsICcgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsi
JykuCgoJCXN0YXJ0VGFibGUoJ2xpc3QnKS4KCgkJCXRyKHRkKCdTb3VyY2UgTGluayBGaWVs
ZCcpLnRkKGFzdl9jdXN0b21fcG9wdXAoJHNvdXJjZWxpbmssICdzb3VyY2VsaW5rJykpKS4K
CgkJCXRyKHRkKCdUdW1ibGVsb2cgU2VjdGlvbicpLnRkKGFzdl9zZWN0aW9uX3BvcHVwKCR0
dW1ibGVsb2dzZWN0aW9uLAoJCQkndHVtYmxlbG9nc2VjdGlvbicpKSkuCgoJCQl0cih0ZCgn
U2ltcGxlUGllIFBhdGgnKS50ZChmSW5wdXQoJ3RleHQnLCAnc2ltcGxlcGllJywgJHNpbXBs
ZXBpZSkpKS4KCgkJZW5kVGFibGUoKS4KCgkJdGFnKCcgJywgJ3AnKS4KCgkJdGFnKCdGb3Jt
cycgLCdoMycsICcgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsiJykuCgoJCXN0YXJ0VGFi
bGUoJ2xpc3QnKS4KCgkJCXRyKHRkKCdQb3N0IEZvcm0nKS50ZChhc3ZfZm9ybV9wb3B1cCgk
cG9zdGZvcm0sICdwb3N0Zm9ybScpKSkuCgoJCQl0cih0ZCgnUXVvdGUgRm9ybScpLnRkKGFz
dl9mb3JtX3BvcHVwKCRxdW90ZWZvcm0sICdxdW90ZWZvcm0nKSkpLgoKCQkJdHIodGQoJ1Bo
b3RvIEZvcm0nKS50ZChhc3ZfZm9ybV9wb3B1cCgkcGhvdG9mb3JtLCAncGhvdG9mb3JtJykp
KS4KCgkJCXRyKHRkKCdMaW5rIEZvcm0nKS50ZChhc3ZfZm9ybV9wb3B1cCgkbGlua2Zvcm0s
ICdsaW5rZm9ybScpKSkuCgoJCQl0cih0ZGEoZklucHV0KCdzdWJtaXQnLCdzYXZlX3NldHRp
bmdzJywnc2F2ZScsInB1Ymxpc2giLCAnJywgJycsICcnLCA0KSwgJyBjb2xzcGFuPTInKSku
CgoJCWVuZFRhYmxlKCk7CgoJZWNobyBuLm4uJzwvZm9ybT4nLgoJJzxoMyBzdHlsZT0idGV4
dC1hbGlnbjpjZW50ZXIiPjxhIGhyZWY9Imh0dHA6Ly8nLiRwcmVmc1snc2l0ZXVybCddLicv
P2Fzdl90dW1ibGVsb2dfdXBkYXRlZmVlZHM9MSI+bWFudWFsbHkgdXBkYXRlIGZlZWRzPC9h
PjwvaDM+JzsKfQoKaWYoZ3BzKCdhc3ZfdHVtYmxlbG9nX3VwZGF0ZWZlZWRzJyk9PTEpCnsK
CglleHRyYWN0KGdldF9hc3ZfdHVtYmxlbG9nX3ByZWZzKCkpOwoJJHJzID0gc2FmZV9yb3dz
X3N0YXJ0KCIqIiwgImFzdl90dW1ibGVsb2dfZmVlZHMiLCAiMT0xIik7CgllY2hvICc8cHJl
Pic7CglpZigkcnMpCgl7CgkJd2hpbGUoJGEgPSBuZXh0Um93KCRycykpCgkJewoJCQlleHRy
YWN0KCRhKTsKCQkJc3dpdGNoKCRUeXBlKQoJCQl7CgkJCQljYXNlICJwb3N0IjoKCQkJCQkk
Zm9ybSA9ICRwb3N0Zm9ybTsKCQkJCQlicmVhazsKCQkJCWNhc2UgInF1b3RlIjoKCQkJCQkk
Zm9ybSA9ICRxdW90ZWZvcm07CgkJCQkJYnJlYWs7CgkJCQljYXNlICJwaG90byI6CgkJCQkJ
JGZvcm0gPSAkcGhvdG9mb3JtOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAibGluayI6CgkJCQkJ
JGZvcm0gPSAkbGlua2Zvcm07CgkJCQkJYnJlYWs7CgkJCX0KCQkJZWNobyBhc3ZfcnNzZ3Jh
YihhcnJheSgKCQkJCSdmZWVkJwk9PiAkRmVlZCwKCQkJCSdzaW1wbGVwaWUnID0+ICRzaW1w
bGVwaWUsCgkJCQkndHlwZScJPT4gJFR5cGUsCgkJCQknY2F0ZWdvcnkxJwk9PiAkQ2F0ZWdv
cnkxLAoJCQkJJ2NhdGVnb3J5MicgPT4gJENhdGVnb3J5MiwKCQkJCSdzZWN0aW9uJwk9PiAk
dHVtYmxlbG9nc2VjdGlvbiwKCQkJCSdmb3JtJwkJPT4gJGZvcm0sCgkJCQknbGlua2ZpZWxk
Jwk9PiAkc291cmNlbGluaywKCQkJCSdwdWJkYXRlJyA9PiAnJywKCQkJCSdjb21tZW50cycJ
PT4gJEFubm90YXRlLAoJCQkJJ2tleXdvcmRzJwk9PiAkS2V5d29yZHMsCgkJCQkpKTsKCQl9
Cgl9CgllY2hvICc8L3ByZT4nOwoJZXhpdCgpOwoKfQoKZnVuY3Rpb24gYXN2X3Jzc2dyYWIo
JGF0dHMpCnsKCWdsb2JhbCAkcHJlZnMsICR0eHBjZmc7CglleHRyYWN0KCRwcmVmcyk7CgoJ
ZXh0cmFjdChsQXR0cyhhcnJheSgKCQkJJ2ZlZWQnICAgICAgID0+ICcnLAoJCQknc2ltcGxl
cGllJyAgPT4gJHR4cGNmZ1sndHhwYXRoJ10uJy9saWIvc2ltcGxlcGllLmluYycsCgkJCSd0
eXBlJwkJPT4gJ3NpbXBsZScsCgkJCSdjYXRlZ29yeTEnCT0+ICcnLAoJCQknY2F0ZWdvcnky
JyA9PiAnJywKCQkJJ3NlY3Rpb24nCT0+ICdkZWZhdWx0JywKCQkJJ2Zvcm0nCQk9PiAnJywK
CQkJJ2xpbmtmaWVsZCcJPT4gJ2N1c3RvbV8xJywKCQkJJ3B1YmRhdGUnID0+ICcnLAoJCQkn
Y29tbWVudHMnCT0+ICdvbicsCgkJCSdrZXl3b3JkcycJPT4gJycsCgkJCSksJGF0dHMpKTsK
CgkkbWVzc2FnZSA9ICcnOwoKCS8vR2V0IFNpbXBsZVBpZQoJcmVxdWlyZV9vbmNlKCRzaW1w
bGVwaWUpOwoKCS8vQ3JlYXRlIGFuZCBzZXR1cCBTaW1wbGVQaWUgSW5zdGFuY2UKCSR0aGVm
ZWVkID0gbmV3IFNpbXBsZVBpZSgpOwoJJHRoZWZlZWQtPnNldF9mZWVkX3VybCgkZmVlZCk7
CgkkdGhlZmVlZC0+c2V0X2Zhdmljb25faGFuZGxlcignLi9wbHVnaW5zL2Fzdl9yc3NncmFi
LnBocCcsICdmYXZpY29uJyk7CgkkdGhlZmVlZC0+ZW5hYmxlX2NhY2hlKGZhbHNlKTsKCSR0
aGVmZWVkLT5oYW5kbGVfY29udGVudF90eXBlKCk7CgoJJG1lc3NhZ2UgLj0gIkdldHRpbmcg
JGZlZWRcclxuIjsKCS8vR2V0IHRoZSBmZWVkCgkkc3VjY2VzcyA9ICR0aGVmZWVkLT5pbml0
KCk7CgoJaWYoJHN1Y2Nlc3MpIHsKCQkkbWVzc2FnZSAuPSAiXHRTdWNjZXNzIVxyXG4iOwoJ
CSRmZWVkaXRlbXMgPSAkdGhlZmVlZC0+Z2V0X2l0ZW1zKCk7CgkJJGZhdmljb24gPSAkdGhl
ZmVlZC0+Z2V0X2Zhdmljb24oKTsKCQkkbWVzc2FnZSAuPSAiXHRGYXZpY29uIC0gIi4kZmF2
aWNvbi4iXHJcbiI7CgkJZm9yZWFjaCgkZmVlZGl0ZW1zIGFzICRmZWVkaXRlbSkgewoJCQkv
L0dldCB0aGUgcGVybWFsaW5rCgkJCSRvdXRbJ3Blcm1hbGluayddID0gJGZlZWRpdGVtLT5n
ZXRfbGluaygpOwoKCQkJLy8gR2V0IGl0ZW0gdGl0bGUKCQkJJG91dFsndGl0bGUnXSA9IGFk
ZHNsYXNoZXMoYXN2X3R1bWJsZWxvZ190cmltdHdpdHRlcigkZmVlZGl0ZW0tPmdldF90aXRs
ZSgpLCAkb3V0WydwZXJtYWxpbmsnXSkpOwoKCgkJCS8vR2V0IHRoZSBpbWFnZQoJCQkkb3V0
WydpbWFnZSddID0gJGZhdmljb247CgoJCQkvLyBDaGVjayBhbmQgcmV0cmlldmUgZGF0ZQoJ
CQlpZigkcHViZGF0ZSE9JycpCgkJCXsKCQkJCSRkYXRlVGFrZW4gPSAkZmVlZGl0ZW0tPmdl
dF9pdGVtX3RhZ3MoJ2h0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvJywgJ2RhdGUu
VGFrZW4nKTsKCQkJCXByaW50X3IoJGRhdGVUYWtlblswXVsnZGF0YSddKTsKCQkJCWRpZSgi
bm90IHlldCBpbXBsZW1lbnRlZCIpOwoJCQl9CgkJCWVsc2VpZigkZmVlZGl0ZW0tPmdldF9k
YXRlKCkpIHsKCQkJCSRvdXRbInBvc3RlZCJdID0gJGZlZWRpdGVtLT5nZXRfZGF0ZSgnVScp
OwoJCQkJJHdoZW4gPSAiZnJvbV91bml4dGltZSgiLiRvdXRbJ3Bvc3RlZCddLiIpIjsKCQkJ
fQoJCQllbHNlCgkJCXsKCQkJCSR3aGVuID0gJ25vdygpJzsKCQkJfQoKCQkJLy9HZXQgdGhl
IGJvZHkKCQkJaWYoJHR5cGU9PSJtZWRpYSIpCgkJCXsKCQkJCSRlbmNzID0gJGZlZWRpdGVt
LT5nZXRfZW5jbG9zdXJlcygpOwoJCQkJZm9yZWFjaCgkZW5jcyBhcyAkZW5jbG9zdXJlKQoJ
CQkJewoJCQkJCXByaW50X3IoJGVuY2xvc3VyZSk7CgkJCQkJaWYoIWlzX251bGwoJGVuY2xv
c3VyZS0+Z2V0X2xpbmsoKSkpewoJCQkJCQkkZW5jX2xpbmsgPSAkZW5jbG9zdXJlLT5nZXRf
bGluaygpOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkZW5jX2xpbmsgPSAkZW5j
X2xpbms7CgkJCQkJfQoJCQkJCSRlbmNfbGluayA9IHN0cl9yZXBsYWNlKCcmYW1wOycsICcm
JywgJGVuY19saW5rKTsKCQkJCQkkb3V0Wydib2R5J10gPSAnPHA+PG9iamVjdCB0eXBlPSJh
cHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCIgd2lkdGg9IjUwNiIgaGVpZ2h0PSI0MTQi
IGRhdGE9IicuJGVuY19saW5rLiciPgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgPHBhcmFtIG5hbWU9InF1YWxpdHkiIHZhbHVlPSJoaWdoIiAvPgoJICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhcmFtIG5hbWU9ImFsbG93ZnVsbHNjcmVl
biIgdmFsdWU9InRydWUiIC8+CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICA8cGFyYW0gbmFtZT0ic2NhbGUiIHZhbHVlPSJzaG93QWxsIiAvPgoJICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgPHBhcmFtIG5hbWU9Im1vdmllIiB2YWx1ZT0iJy4k
ZW5jX2xpbmsuJyIgLz4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vYmpl
Y3Q+PHA+JzsKCQkJCX0KCQkJfQoJCQllbHNlaWYoJHR5cGU9PSJwaG90byIpCgkJCXsKCQkJ
CWlmKCFkZWZpbmVkKCJJTVBBVEgiKSkgZGVmaW5lKCJJTVBBVEgiLCRwYXRoX3RvX3NpdGUu
Jy8nLiRpbWdfZGlyLicvJyk7CgkJCQkkZmVlZERlc2NyaXB0aW9uID0gJGZlZWRpdGVtLT5n
ZXRfY29udGVudCgpOwoJCQkJJGltYWdlID0gcmV0dXJuSW1hZ2UoJGZlZWREZXNjcmlwdGlv
bik7CgkJCQkkaW1hZ2UgPSB1cmxkZWNvZGUoc2NyYXBlSW1hZ2UoJGltYWdlKSk7CgkJCQkv
L0NoZWNrIHRvIHNlZSBpZiBpdCBuZWVkcyB0byBiZSBpbXBvcnRlZCBpbnRvIFRYUCBJbWFn
ZQoJCQkJaWYoJGltYWdlKQoJCQkJewoJCQkJCS8vZ2V0IGV4dGVuc2lvbgoJCQkJCSRleHQg
PSBzdHJyY2hyKCRpbWFnZSwgJy4nKTsKCQkJCQkkY2hlY2sgPSBzYWZlX2ZpZWxkKCdJRCcs
ICd0eHBfaW1hZ2UnLCAiTkFNRSA9ICciLiRvdXRbJ3RpdGxlJ10uIicgQU5EIERBVEUgPSAk
d2hlbiIpOwoJCQkJCWlmKCRjaGVjaykKCQkJCQl7CgkJCQkJCSRpbWFnZUlEID0gJGNoZWNr
OwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQlzYWZlX2luc2VydCgndHhwX2ltYWdl
JywKCQkJCQkJCSJuYW1lID0gJyIuJG91dFsndGl0bGUnXS4iJywKCQkJCQkJCWV4dCA9ICck
ZXh0JywKCQkJCQkJCWRhdGUgPSAkd2hlbiIKCQkJCQkJKTsKCQkJCQkJJGltYWdlSUQgPSBt
eXNxbF9pbnNlcnRfaWQoKTsKCQkJCQkJLy8gY3JlYXRlIGEgbmV3IGN1cmwgcmVzb3VyY2UK
CQkJCQkJJGNoID0gY3VybF9pbml0KCk7CgkJCQkJCS8vIHNldCBVUkwgYW5kIG90aGVyIGFw
cHJvcHJpYXRlIG9wdGlvbnMKCQkJCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwg
IiRpbWFnZSIpOwoJCQkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNG
RVIsIHRydWUpOwoJCQkJCQkvLyBncmFiIFVSTCwgYW5kIHJldHVybiBvdXRwdXQKCQkJCQkJ
JG91dHB1dCA9IGN1cmxfZXhlYygkY2gpOwoJCQkJCQkvLyBjbG9zZSBjdXJsIHJlc291cmNl
LCBhbmQgZnJlZSB1cCBzeXN0ZW0gcmVzb3VyY2VzCgkJCQkJCWN1cmxfY2xvc2UoJGNoKTsK
CQkJCQkJLy93cml0ZSB0byBmaWxlCgkJCQkJCSRmaWxlbmFtZSA9IElNUEFUSC5iYXNlbmFt
ZSgkaW1hZ2UpOwoJCQkJCQkkZmggPSBmb3BlbihJTVBBVEguJGltYWdlSUQuJGV4dCwgJ3cn
KTsKCQkJCQkJZndyaXRlKCRmaCwgJG91dHB1dCk7CgkJCQkJCWZjbG9zZSgkZmgpOwoJCQkJ
CQkkc2hvcnRwYXRoID0gYmFzZW5hbWUoJGltYWdlKTsKCQkJCQkJJG1lc3NhZ2UgLj0gIlx0
SW1wb3J0ZWQgJGZpbGVuYW1lXHJcbiI7CgkJCQkJfQoJCQkJfQoJCQkJJG91dFsnYm9keSdd
ID0gJzxwPjxhIGhyZWY9IicuJG91dFsncGVybWFsaW5rJ10uJyI+PGltZyBzcmM9IicuaHUu
JGltZ19kaXIuIi8iLiRpbWFnZUlELiRleHQuJyIgLz48L2E+PC9wPic7CgkJCX0KCQkJZWxz
ZQoJCQl7CgkJCQlpZighYmVnaW5zV2l0aCgkZmVlZGl0ZW0tPmdldF9kZXNjcmlwdGlvbigp
LCAiPHAiKSkKCQkJCXsKCQkJCQkkb3V0Wydib2R5J10gPSBkb3RhZyhhZGRzbGFzaGVzKGFz
dl90dW1ibGVsb2dfdHJpbXR3aXR0ZXIoJGZlZWRpdGVtLT5nZXRfZGVzY3JpcHRpb24oKSwg
JG91dFsncGVybWFsaW5rJ10pKSwgJ3AnKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkk
b3V0Wydib2R5J10gPSBhZGRzbGFzaGVzKCRmZWVkaXRlbS0+Z2V0X2Rlc2NyaXB0aW9uKCkp
OwoJCQkJfQoJCQl9CgoJCQkvL0NoZWNrIHRvIHNlZSBpZiB0aGUgYXJ0aWNsZSBoYXMgYWxy
ZWFkeSBiZWVuIGltcG9ydGVkCgkJCSRleGlzdHMgPSBzYWZlX2NvdW50KCd0ZXh0cGF0dGVy
bicsICJUaXRsZSA9ICciLiRvdXRbJ3RpdGxlJ10uIicgQU5EIFBvc3RlZD0kd2hlbiBBTkQg
U2VjdGlvbj0nJHNlY3Rpb24nIik7CgoJCQkvL0lmIGl0IGhhc24ndCB0aGVuIGxldCdzIGFk
ZCBpdAoJCQlpZigkZXhpc3RzPT0wKXsKCQkJCS8vQ2hlY2sgdG8gc2VlIGlmIGNhdGVnb3J5
MSBleGlzdHMKCQkJCWlmKCRjYXRlZ29yeTEgJiYgIWZldGNoX2NhdGVnb3J5X3RpdGxlKCRj
YXRlZ29yeTEpKQoJCQkJewoJCQkJCS8vQ3JlYXRlIG5ldyBjYXRlZ29yeQoJCQkJCSRuYW1l
ID0gc2FuaXRpemVGb3JVcmwoJGNhdGVnb3J5MSk7CgkJCQkJJGV4aXN0cyA9IHNhZmVfZmll
bGQoJ25hbWUnLCAndHhwX2NhdGVnb3J5JywgIm5hbWUgPSAnIi5kb1NsYXNoKCRuYW1lKS4i
JyBhbmQgdHlwZSA9ICdhcnRpY2xlJyIpOwoJCQkJCWlmICghJGV4aXN0cykKCQkJCQl7CgkJ
CQkJCSRxID0gc2FmZV9pbnNlcnQoJ3R4cF9jYXRlZ29yeScsICJuYW1lID0gJyIuZG9TbGFz
aCgkbmFtZSkuIicsIHRpdGxlID0gJyIuZG9TbGFzaCgkY2F0ZWdvcnkxKS4iJywgdHlwZSA9
ICdhcnRpY2xlJywgcGFyZW50ID0gJ3Jvb3QnIik7CgkJCQkJCXJlYnVpbGRfdHJlZSgncm9v
dCcsIDEsICdhcnRpY2xlJyk7CgkJCQkJfQoJCQkJfQoJCQkJLy9DaGVjayB0byBzZWUgaWYg
Y2F0ZWdvcnkyIGV4aXN0cwoJCQkJaWYoJGNhdGVnb3J5MiAmJiAhZmV0Y2hfY2F0ZWdvcnlf
dGl0bGUoJGNhdGVnb3J5MikpCgkJCQl7CgkJCQkJLy9DcmVhdGUgbmV3IGNhdGVnb3J5CgkJ
CQkJJG5hbWUgPSBzYW5pdGl6ZUZvclVybCgkY2F0ZWdvcnkyKTsKCQkJCQkkZXhpc3RzID0g
c2FmZV9maWVsZCgnbmFtZScsICd0eHBfY2F0ZWdvcnknLCAibmFtZSA9ICciLmRvU2xhc2go
JG5hbWUpLiInIGFuZCB0eXBlID0gJ2FydGljbGUnIik7CgkJCQkJaWYgKCEkZXhpc3RzKQoJ
CQkJCXsKCQkJCQkJJHEgPSBzYWZlX2luc2VydCgndHhwX2NhdGVnb3J5JywgIm5hbWUgPSAn
Ii5kb1NsYXNoKCRuYW1lKS4iJywgdGl0bGUgPSAnIi5kb1NsYXNoKCRjYXRlZ29yeTIpLiIn
LCB0eXBlID0gJ2FydGljbGUnLCBwYXJlbnQgPSAncm9vdCciKTsKCQkJCQkJcmVidWlsZF90
cmVlKCdyb290JywgMSwgJ2FydGljbGUnKTsKCQkJCQl9CgkJCQl9CgoJCQkJLy9HZXQgY3Vz
dG9tIGZpZWxkCgkJCQkkbWVzc2FnZSAuPSAiXHRcdCRsaW5rZmllbGQgLSBjdXN0b21cclxu
IjsKCQkJCSRjdXN0b21fcm93ID0gc2FmZV9yb3coIioiLCAndHhwX3ByZWZzJywgInZhbD0n
JGxpbmtmaWVsZCciKTsKCQkJCWlmKCRjdXN0b21fcm93KQoJCQkJewoJCQkJCSRsaW5rZmll
bGRfc2V0ID0gJ2N1c3RvbV8nLiRjdXN0b21fcm93Wydwb3NpdGlvbiddOwoJCQkJfQoJCQkJ
ZWxzZQoJCQkJewoJCQkJCSRsaW5rZmllbGRfc2V0ID0gImN1c3RvbV8xIjsKCQkJCX0KCQkJ
CSRyZXN1bHQgPSBzYWZlX2luc2VydCgidGV4dHBhdHRlcm4iLAoJCQkJCSJUaXRsZSAgICAg
ICAgICAgPSAnIi4kb3V0Wyd0aXRsZSddLiInLAoJCQkJCUJvZHkgICAgICAgICAgICA9ICci
LiRvdXRbJ2JvZHknXS4iJywKCQkJCQlCb2R5X2h0bWwgICAgICAgPSAnIi4kb3V0Wydib2R5
J10uIicsCgkJCQkJRXhjZXJwdCAgICAgICAgID0gJycsCgkJCQkJRXhjZXJwdF9odG1sICAg
ID0gJycsCgkJCQkJSW1hZ2UgICAgICAgICAgID0gJyIuJGZhdmljb24uIicsCgkJCQkJS2V5
d29yZHMgICAgICAgID0gJyRrZXl3b3JkcycsCgkJCQkJU3RhdHVzICAgICAgICAgID0gIDQs
CgkJCQkJUG9zdGVkICAgICAgICAgID0gICR3aGVuLAoJCQkJCUxhc3RNb2QgICAgICAgICA9
ICBub3coKSwKCQkJCQlBdXRob3JJRCAgICAgICAgPSAnJywKCQkJCQlTZWN0aW9uICAgICAg
ICAgPSAnJHNlY3Rpb24nLAoJCQkJCUNhdGVnb3J5MSAgICAgICA9ICckY2F0ZWdvcnkxJywK
CQkJCQlDYXRlZ29yeTIgICAgICAgPSAnJGNhdGVnb3J5MicsCgkJCQkJdGV4dGlsZV9ib2R5
ICAgID0gIDAsCgkJCQkJdGV4dGlsZV9leGNlcnB0ID0gIDAsCgkJCQkJQW5ub3RhdGUgICAg
ICAgID0gIDEsCgkJCQkJb3ZlcnJpZGVfZm9ybSAgID0gJyRmb3JtJywKCQkJCQl1cmxfdGl0
bGUgICAgICAgPSAnJywKCQkJCQkkbGlua2ZpZWxkX3NldCAJCT0gJyIuJG91dFsncGVybWFs
aW5rJ10uIicsCgkJCQkJQW5ub3RhdGVJbnZpdGUgID0gJ2NvbW1lbnRzJywKCQkJCQl1aWQg
ICAgICAgICAgICAgPSAnIi5tZDUodW5pcWlkKHJhbmQoKSx0cnVlKSkuIicsCgkJCQkJZmVl
ZF90aW1lICAgICAgID0gJHdoZW4iCgkJCQkpOwoKCQkJCWlmKCRyZXN1bHQpCgkJCQl7CgkJ
CQkJLy9kb19waW5ncygpOwoJCQkJCXVwZGF0ZV9sYXN0bW9kKCk7CgkJCQkJJG1lc3NhZ2Ug
Lj0gIlx0QWRkZWQgLSAiLiRvdXRbJ3RpdGxlJ10uIlxyXG4iOwoJCQkJfQoJCQl9CgkJCWVs
c2UKCQkJewoJCQkJJG1lc3NhZ2UgLj0gIlx0RXhpc3RzIC0gIi4kb3V0Wyd0aXRsZSddLiJc
clxuIjsKCQkJfQoJCX0KCX0KCWVsc2UgewoJCSRtZXNzYWdlIC49ICJcdCIuJHRoZWZlZWQt
PmVycm9yOwoJfQoJcmV0dXJuICRtZXNzYWdlOwp9CgovL2hlbHBlciBmdW5jdGlvbnMKLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLwovL0dldCBhbiBpbWFnZQpmdW5jdGlvbiByZXR1cm5JbWFnZSAoJHRleHQpIHsK
ICAgICR0ZXh0ID0gaHRtbF9lbnRpdHlfZGVjb2RlKCR0ZXh0KTsKICAgIC8vZWNobyAkdGV4
dDsKICAgICRwYXR0ZXJuID0gIi88aW1nW14+XStcPi9pIjsKICAgIHByZWdfbWF0Y2goJHBh
dHRlcm4sICR0ZXh0LCAkbWF0Y2hlcyk7CiAgICAkdGV4dCA9ICRtYXRjaGVzWzBdOwogICAg
cmV0dXJuICR0ZXh0Owp9CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vRmlsdGVyIG91dCBpbWFnZSB1cmwgb25s
eQpmdW5jdGlvbiBzY3JhcGVJbWFnZSgkdGV4dCkgewoKICAgICRwYXR0ZXJuID0gJy9zcmM9
W1wnIl0/KFteXCciID5dKylbXCciID5dLyc7CgpwcmVnX21hdGNoKCRwYXR0ZXJuLCAkdGV4
dCwgJGxpbmspOwoKJGxpbmsgPSAkbGlua1sxXTsKJGxpbmsgPSB1cmxlbmNvZGUoJGxpbmsp
OwpyZXR1cm4gJGxpbms7Cgp9CgpmdW5jdGlvbiBiZWdpbnNXaXRoKCRzdHIsICRzdWIpIHsK
ICAgIHJldHVybiAoc3RybmNtcCgkc3RyLCAkc3ViLCBzdHJsZW4oJHN1YikpID09IDApOwoJ
fSI7czozOiJtZDUiO3M6MzI6ImI3YjA1OGU3YzVhNThlZTA5NGE5MTZlOWU3Mjg0YWUxIjt9
