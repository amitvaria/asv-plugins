# asv_tumblelog v0.2
# Implementing the greatness of tumblelogs
# Amit Varia
# http://www.amitvaria.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjQ6Im5hbWUiO3M6MTM6ImFzdl90dW1ibGVsb2ciO3M6NzoidmVyc2lvbiI7czoz
OiIwLjIiO3M6NjoiYXV0aG9yIjtzOjEwOiJBbWl0IFZhcmlhIjtzOjEwOiJhdXRob3JfdXJp
IjtzOjI1OiJodHRwOi8vd3d3LmFtaXR2YXJpYS5jb20vIjtzOjExOiJkZXNjcmlwdGlvbiI7
czo0MDoiSW1wbGVtZW50aW5nIHRoZSBncmVhdG5lc3Mgb2YgdHVtYmxlbG9ncyI7czo0OiJ0
eXBlIjtpOjE7czo0OiJoZWxwIjtzOjMwOTI6Igk8aDE+YXN2X3R1bWJsZWxvZzwvaDE+CgoJ
PGgyPnRoZSBiZWdpbm5pbmcgb2YgYSBsaWZlc3RyZWFtPC9oMj4KCgk8aDM+U3VtbWFyeTwv
aDM+CgoJPHA+SSB1c2VkIHRvIGJlIGFuIGF2aWQgdXNlciBvZiBzZXJ2aWNlcyBsaWtlIDxh
IGhyZWY9Imh0dHA6Ly93d3cudHVtYmxyLmNvbSI+VHVtYmxyPC9hPiwgYnV0IGZvdW5kIG15
c2VsZiB3YW50aW5nIG1vcmUgZnJlZWRvbSBhbmQgY29udHJvbCBvdmVyIG15IHBvc3RzLiBQ
bGVhc2UgZm9sbG93IHRoZSBzZXR1cCBpbnN0cnVjdGlvbnMgYmVsb3cgdG8gZW5zdXJlIHRo
YXQgZXZlcnl0aGluZyBnZXRzIHNldHVwLiBhc3ZfdHVtYmxlbG9nIHdpbGwgaW1wb3J0IGZl
ZWRzIGZvciB5b3UgYXMgPHNwYW4gY2xhc3M9ImNhcHMiPlRYUDwvc3Bhbj4gYXJ0aWNsZXMu
PC9wPgoKCTxoMz5TZXR1cC9JbnN0YWxsYXRpb248L2gzPgoKCTxwPmFzdl90dW1ibGVsb2cg
cmVxdWlyZXMgPGEgaHJlZj0iaHR0cDovL3d3dy5zaW1wbGVwaWUub3JnIj5TaW1wbGVQaWU8
L2E+LCBzbyBwbGVhc2UgZ3JhYiB0aGUgbGF0ZXN0IHZlcnNpb24uIEFmdGVyIGFjdGl2YXRp
bmcgdGhlIHBsdWdpbiB5b3Ugd2lsbCBoYXZlIGEgbmV3IHRhYiB1bmRlciAmIzgyMjA7RXh0
ZW5zaW9ucyYjODIyMTsgY2FsbGVkICYjODIyMDtUdW1ibGVsb2cmIzgyMjE7LiBJbiB0aGlz
IHRhYiB5b3UgaGF2ZSBmb3VyIG9wdGlvbnMgJiM4MjExOyBTZXR0aW5ncywgRmVlZHMsIFBh
Z2UgRGVzaWduLCBGb3JtIERlc2lnbi48L3A+CgoJPHA+T25jZSBldmVyeXRoaW5nIGlzIHNl
dHVwIHlvdSYjODIxNztsbCBuZWVkIHRvIHNldHVwIGEgY3JvbiBqb2IgdG8gZ2V0IGEgc3Bl
Y2lmaWMgdXJsIHRvIHVwZGF0ZSB0aGUgZmVlZHMuIFRoZSBwYXRoIHdvdWxkIGJlOiBodHRw
Oi8vd2Vic2l0ZXVybC8/YXN2X3R1bWJsZWxvZ191cGRhdGVmZWVkcz0xIChub3RlOiB0aGlz
IGlzIG5vdCB0aGUgdGV4dHBhdHRlcm4gZm9sZGVyLCBidXQgdGhlIHVybCB0byB5b3VyIG1h
aW4gc2l0ZSkuPC9wPgoKCTxoMz5TZXR0aW5nczwvaDM+CgoJPHA+QmVmb3JlIHVzaW5nIGFz
dl90dW1ibGVsb2cgeW91JiM4MjE3O2xsIG5lZWQgdG8gc2V0dXAgYSBjb3VwbGUgdGhpbmdz
LgoJPHVsPgoJCTxsaT48c3Ryb25nPlNvdXJjZSBMaW5rIEZpZWxkPC9zdHJvbmc+ICYjODIx
MTsgc2VsZWN0IHRoZSBjdXN0b20gZmllbGQgeW91IHdvdWxkIGxpa2UgdG8gdXNlIHRvIHN0
b3JlIHRoZSBvcmlnaW5hbCBsaW5rIHRvIHRoZSBpbXBvcnRlZCBwb3N0PC9saT4KCQk8bGk+
PHN0cm9uZz5UdW1ibGVsb2cgU2VjdGlvbjwvc3Ryb25nPiAmIzgyMTE7IHRoZSBzZWN0aW9u
IHRvIGltcG9ydCB0aGUgZmVlZCBpbnRvPC9saT4KCQk8bGk+PHN0cm9uZz5TaW1wbGVQaWUg
UGF0aDwvc3Ryb25nPiAmIzgyMTE7IC90aGUvcGF0aC90by95b3VyL1NpbXBsZVBpZS9pbnN0
YWxsPC9saT4KCTwvdWw+PC9wPgoKCTx1bD4KCQk8bGk+PHN0cm9uZz5Qb3N0IEZvcm08L3N0
cm9uZz4gJiM4MjExOyB0aGUgZm9ybSB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIGZlZWRzIHR5
cGVkIGFzIHBvc3RzPC9saT4KCQk8bGk+PHN0cm9uZz5RdW90ZSBGb3JtPC9zdHJvbmc+ICYj
ODIxMTsgdGhlIGZvcm0gdGhhdCBzaG91bGQgYmUgdXNlZCB0byBmZWVkcyB0eXBlZCBhcyBx
dW90ZXM8L2xpPgoJCTxsaT48c3Ryb25nPkxpbmsgRm9ybTwvc3Ryb25nPiAmIzgyMTE7IHRo
ZSBmb3JtIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gZmVlZHMgdHlwZWQgYXMgbGlua3M8L2xp
PgoJCTxsaT48c3Ryb25nPlBob3RvIEZvcm08L3N0cm9uZz4gJiM4MjExOyB0aGUgZm9ybSB0
aGF0IHNob3VsZCBiZSB1c2VkIHRvIGZlZWRzIHR5cGVkIGFzIHBob3RvczwvbGk+Cgk8L3Vs
PgoKCTxoMz5GZWVkczwvaDM+CgoJPHA+SW4gdGhlICYjODIxNjtGZWVkcyYjODIxNzsgc2Vj
dGlvbiB5b3UgYWRkL2VkaXQvdmlldyBhbGwgeW91ciBmZWVkcyB5b3UgYXJlIGltcG9ydGlu
Zy4gV2hlbiBhZGRpbmcgYSBmZWVkLCBmaWxsIGluIHRoZSBpbmZvcm1hdGlvbiBhbmQgY2hv
b3NlIHRoZSBhcHByb3ByaWF0ZSB0eXBlLiBZb3UgY2FuIGNyZWF0ZSB5b3VyIG93biBkZWZp
bml0aW9ucyBmb3IgZWFjaCB0eXBlIHNpbmNlIHlvdSBjYW4gZWRpdCB0aGUgZGVzaWduIGlu
IGxhdHRlciBzZWN0aW9ucy48L3A+CgoJPHA+PHN0cm9uZz5UaGUgb25lIGV4Y2VwdGlvbiBp
cyB0aGUgcGhvdG8gdHlwZS48L3N0cm9uZz4gSWYgYSBmZWVkIGlzIHR5cGVkIGFzIGEgcGhv
dG8gdGhlbiBhc3ZfdHVtYmxlbG9nIHdpbGwgcGFyc2UgdGhlIGJvZHkgb2YgYSBwb3N0IGFu
ZCBncmFiIHRoZSBmaXJzdCBpbWFnZSwgaW1wb3J0IGl0IGludG8gPHNwYW4gY2xhc3M9ImNh
cHMiPlRYUDwvc3Bhbj4sIGFuZCBtYWtlIHRoZSBib2R5IG9mIHRoZSBpbXBvcnRlZCBhcnRp
Y2xlIGEgcmVmZXJlbmNlIHRvIHRoZSBpbXBvcnRlZCBwaG90by48L3A+CgoJPGgzPlBhZ2Ug
RGVzaWduPC9oMz4KCgk8cD5IZXJlIHlvdSBjYW4gZWRpdCB0aGUgcGFnZSB0aGF0IGlzIGFz
c29jaWF0ZWQgdG8geW91ciB0dW1ibGVsb2cgc2VjdGlvbi48L3A+CgoJPGgzPlBhZ2UgU3R5
bGU8L2gzPgoKCTxwPkhlcmUgeW91IGNhbiBlZGl0IHRoZSBzdHlsZSB0aGF0IGlzIGFzc29j
aWF0ZWQgdG8geW91ciB0dW1ibGVsb2cgc2VjdGlvbi48L3A+CgoJPGgzPkZvcm0gRGVzaWdu
PC9oMz4KCgk8cD5IZXJlIHlvdSBjYW4gZWRpdCB0aGUgNCBmb3JtcyB1c2VkIGZvciB5b3Vy
IHR1bWJsZWxvZy48L3A+CgoJPGgzPlJlY2NvbW1lbmRhdGlvbnM8L2gzPgoKCTxwPllvdSYj
ODIxNztsbCBsZWFybiB0aGF0IHlvdSBoYXZlIGEgbG90IG9mIHJvb20gZm9yIGZsZXhpYmls
aXR5IGFuZCBjdXN0b21pemF0aW9uIHdpdGggYXN2X3R1bWJsZWxvZy4gSSB3b3VsZCByZWNv
bW1lbmQgaW5zdGFsbGluZyBwbHVnaW5zIGxpa2UgcnNzX2F1dG9fZXhjZXJwdCBhbmQgdHJ1
X3RhZ3MuIFdpdGggcnNzX2F1dG9fZXhjZXJwdCB5b3UgY2FuIHRydW5jYXRlIHBvc3RzIGFu
ZCB0cnVfdGFncyB3aWxsIGxldCB5b3UgaW1wbGVtZW50IGEgdGFnZ2luZyBzb2x1dGlvbiB1
c2luZyB0aGUgJiM4MjE2O0tleXdvcmRzJiM4MjE3OyBmaWVsZC48L3A+IjtzOjQ6ImNvZGUi
O3M6MjQxNjk6IgppZiAoQHR4cGludGVyZmFjZSA9PSAnYWRtaW4nKQp7CglhZGRfcHJpdnMo
J2Fzdl90dW1ibGVsb2cnLCcxLDIsMyw0Jyk7IC8vIEFsbG93IG9ubHkgdXNlcmxldmVscyAx
LDIsMyw0IGFjZXNzIHRvIHRoaXMgcGx1Z2luLgoJcmVnaXN0ZXJfdGFiKCdleHRlbnNpb25z
JywgJ2Fzdl90dW1ibGVsb2cnLCAiVHVtYmxlbG9nIik7CglyZWdpc3Rlcl9jYWxsYmFjaygi
YXN2X3R1bWJsZWxvZyIsICJhc3ZfdHVtYmxlbG9nIik7Cn0KCi8vLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gVXRp
bGl0eSBGdW5jdGlvbnMKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX3RpdGxl
KCRhY3RpdmUpCnsKCgkkdGl0bGVzID0gYXJyYXkoJ1NldHRpbmdzJz0+J1NldHRpbmdzJywg
J0ZlZWRzJz0+J0ZlZWRzJywgJ3BhZ2UtZGVzaWduJz0+J1BhZ2UgRGVzaWduJywgJ3BhZ2Ut
c3R5bGUnPT4nUGFnZSBTdHlsZScsICdEZXNpZ24nPT4nRm9ybSBEZXNpZ24nKTsKCSRuZXd0
aXRsZXMgPSBhcnJheSgpOwoJZm9yZWFjaCgkdGl0bGVzIGFzICRrZXk9PiR0aXRsZSkKCXsK
CQlpZigkdGl0bGUhPSRhY3RpdmUpCgkJewoJCQkkdGl0bGU9JzxhIGhyZWY9ImluZGV4LnBo
cD9ldmVudD1hc3ZfdHVtYmxlbG9nJnN0ZXA9Jy4ka2V5LiciPicuJHRpdGxlLic8L2E+JzsK
CQl9CgkJYXJyYXlfcHVzaCgkbmV3dGl0bGVzLCAkdGl0bGUpOwoJfQoKCXJldHVybiB0YWco
am9pbigkbmV3dGl0bGVzLCAiIHwgIiksICdoMScsICcgc3R5bGU9InRleHQtYWxpZ246IGNl
bnRlcjsiJyk7Cn0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpmdW5jdGlvbiBhc3Zfc2VjdGlvbl9wb3B1cCgkU2Vj
dGlvbiwgJGlkKQp7CgkkcnMgPSBzYWZlX2NvbHVtbignbmFtZScsICd0eHBfc2VjdGlvbics
ICJuYW1lICE9ICdkZWZhdWx0JyIpOwoKCWlmICgkcnMpCgl7CgkJcmV0dXJuIHNlbGVjdElu
cHV0KCd0dW1ibGVsb2dzZWN0aW9uJywgJHJzLCAkU2VjdGlvbiwgZmFsc2UsICcnLCAkaWQp
OwoJfQoKCXJldHVybiBmYWxzZTsKfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl9jdXN0b21f
cG9wdXAoJEN1c3RvbSwgJGlkKQp7CgkkcnMgPSBzYWZlX2NvbHVtbigndmFsJywgJ3R4cF9w
cmVmcycsICJuYW1lIExJS0UgJ2N1c3RvbV8lX3NldCciKTsKCglpZiAoJHJzKQoJewoJCXJl
dHVybiBzZWxlY3RJbnB1dCgnc291cmNlbGluaycsICRycywgJEN1c3RvbSwgZmFsc2UsICcn
LCAkaWQpOwoJfQoKCXJldHVybiBmYWxzZTsKfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl9m
b3JtX3BvcHVwKCRDdXN0b20sICRpZCwgJG5hbWU9IiIpCnsKCSRycyA9IHNhZmVfY29sdW1u
KCduYW1lJywgJ3R4cF9mb3JtJywgIjE9MSIpOwoKCWlmICgkcnMpCgl7CgkJcmV0dXJuIHNl
bGVjdElucHV0KCRpZCwgJHJzLCAkQ3VzdG9tLCBmYWxzZSwgJycsICRpZCk7Cgl9CgoJcmV0
dXJuIGZhbHNlOwp9Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gYXN2X2NhdF9wb3B1cCgkQ3VzdG9t
LCAkaWQsICRuYW1lPSIiKQp7CgkkcnMgPSBnZXRUcmVlKCdyb290JywgJ2FydGljbGUnKTsK
CglpZiAoJHJzKQoJewoJCXJldHVybiB0cmVlU2VsZWN0SW5wdXQoJG5hbWUsJHJzLCRDdXN0
b20sICRpZCk7Cgl9CgoJcmV0dXJuIGZhbHNlOwp9Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpmdW5jdGlvbiBnZXRf
YXN2X3R1bWJsZWxvZ19wcmVmcygpCnsKCSRvdXQgPSBhcnJheSgpOwoJJHIgPSBzYWZlX3Jv
d3Nfc3RhcnQoJ25hbWUsIHZhbCcsICd0eHBfcHJlZnMnLCAiZXZlbnQ9J2Fzdl90dW1ibGVs
byciKTsKCWlmICgkcikgewoJCXdoaWxlICgkYSA9IG5leHRSb3coJHIpKSB7CgkJCSRvdXRb
JGFbJ25hbWUnXV0gPSAkYVsndmFsJ107CgkJfQoKCQlyZXR1cm4gbEF0dHMoYXJyYXkoCgkJ
CSdzb3VyY2VsaW5rJwk9PiAnJywKCQkJJ3R1bWJsZWxvZ3NlY3Rpb24nID0+ICcnLAoJCQkn
c2ltcGxlcGllJyA9PiAnJywKCQkJJ3Bvc3Rmb3JtJwk9PiAnJywKCQkJJ3F1b3RlZm9ybScJ
PT4gJycsCgkJCSdwaG90b2Zvcm0nCT0+ICcnLAoJCQknbGlua2Zvcm0nIAk9PiAnJywKCQkJ
J3Jzc2ZlZWRwYWdlJyA9PiAnJywKCQkJKSwkb3V0KTsKCgl9CglyZXR1cm4gZmFsc2U7Cn0K
Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX2xpc3RfbXVsdGllZGl0X2Zvcm0o
KQp7CgkkbWV0aG9kcyA9IGFycmF5KAoJCSdkZWxldGUnICAgICAgICAgID0+IGdUeHQoJ2Rl
bGV0ZScpLAoJKTsKCglyZXR1cm4gZXZlbnRfbXVsdGllZGl0X2Zvcm0oJ2xpc3QnLCAkbWV0
aG9kcywgJycsJycsJycsJycsJycpOwp9Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gYXN2X3R1bWJs
ZWxvZ192ZXJpZnlGZWVkKCRmZWVkLCAkc2ltcGxlcGllKQp7CgkvL0dldCBTaW1wbGVQaWUK
CXJlcXVpcmVfb25jZSgkc2ltcGxlcGllKTsKCgkvL0NyZWF0ZSBhbmQgc2V0dXAgU2ltcGxl
UGllIEluc3RhbmNlCgkkdGhlZmVlZCA9IG5ldyBTaW1wbGVQaWUoKTsKCSR0aGVmZWVkLT5z
ZXRfZmVlZF91cmwoJGZlZWQpOwoJJHRoZWZlZWQtPmVuYWJsZV9jYWNoZShmYWxzZSk7Cgkk
dGhlZmVlZC0+aGFuZGxlX2NvbnRlbnRfdHlwZSgpOwoKCS8vR2V0IHRoZSBmZWVkCgkkc3Vj
Y2VzcyA9ICR0aGVmZWVkLT5pbml0KCk7CgoJcmV0dXJuICgkc3VjY2Vzcyk/ICR0aGVmZWVk
LT5nZXRfdGl0bGUoKTogIGZhbHNlOwoKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpmdW5jdGlvbiBhc3ZfdHVt
YmxlbG9nX3ZlcmlmeVRhYmxlKCkKewoJaWYoc2FmZV9xdWVyeSgiU0hPVyBUQUJMRVMgTElL
RSAnIi5zYWZlX3BmeCgnYXN2X3R1bWJsZWxvZ19mZWVkcycpLiInIikpCgl7CgkJJHZlcnNp
b24gPSBteXNxbF9nZXRfc2VydmVyX2luZm8oKTsKCQkvL1VzZSAiRU5HSU5FIiBpZiB2ZXJz
aW9uIG9mIE15U1FMID4gKDQuMC4xOCBvciA0LjEuMikKCQkkdGFibGV0eXBlID0gKCBpbnR2
YWwoJHZlcnNpb25bMF0pID49IDUgfHwgcHJlZ19tYXRjaCgnI140XC4oMFwuWzItOV18KDFb
ODldKSl8KDFcLlsyLTldKSMnLCR2ZXJzaW9uKSkKCQkJCQkJPyAiIEVOR0lORT1NeUlTQU0g
IgoJCQkJCQk6ICIgVFlQRT1NeUlTQU0gIjsKCQkkcmVzdWx0ID0gc2FmZV9xdWVyeSgiQ1JF
QVRFIFRBQkxFIElGIE5PVCBFWElTVFMgYCIuUEZYLiJhc3ZfdHVtYmxlbG9nX2ZlZWRzYCgK
CQkJYElEYCBpbnQoMTEpIE5PVCBOVUxMIGF1dG9faW5jcmVtZW50LAoJCQlgVGl0bGVgIHZh
cmNoYXIoMjU1KSBOT1QgTlVMTCBkZWZhdWx0ICcnLAoJCQlgRmVlZGAgdmFyY2hhcigyNTUp
IE5PVCBOVUxMIGRlZmF1bHQgJycsCgkJCWBBbm5vdGF0ZWAgaW50KDIpIE5PVCBOVUxMIGRl
ZmF1bHQgJzAnLAoJCQlgVHlwZWAgdmFyY2hhcigxMjgpIE5PVCBOVUxMIGRlZmF1bHQgJycs
CgkJCWBDYXRlZ29yeTFgIHZhcmNoYXIoMTI4KSBOT1QgTlVMTCBkZWZhdWx0ICcnLAoJCQlg
Q2F0ZWdvcnkyYCB2YXJjaGFyKDEyOCkgTk9UIE5VTEwgZGVmYXVsdCAnJywKCQkJYEtleXdv
cmRzYCB2YXJjaGFyKDI1NSkgTk9UIE5VTEwgZGVmYXVsdCAnJywKCQkJIFBSSU1BUlkgS0VZ
ICAoYElEYCkKCQkJICkgJHRhYmxldHlwZSBQQUNLX0tFWVM9MSBBVVRPX0lOQ1JFTUVOVD0y
ICIpOwoJfQp9Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0KCmZ1bmN0aW9uIGFzdl90dW1ibGVsb2dfZmVlZHNfbGlz
dCgkYXR0cywkdGhpbmcpCnsKfQoKZnVuY3Rpb24gYXN2X3R1bWJsZWxvZygkZXZlbnQsICRz
dGVwKQp7Cgkkc3RlcD0oJHN0ZXA9PScnKT8nU2V0dGluZ3MnOiRzdGVwOwoKCXN3aXRjaCgk
c3RlcCkKCXsKCQljYXNlICdTZXR0aW5ncyc6CgkJCWFzdl90dW1ibGVsb2dfc2V0dGluZ3Mo
JHN0ZXApOwoJCQlicmVhazsKCQljYXNlICdGZWVkcyc6CgkJCWFzdl90dW1ibGVsb2dfZmVl
ZHMoJHN0ZXApOwoJCQlicmVhazsKCQljYXNlICdEZXNpZ24nOgoJCQlhc3ZfdHVtYmxlbG9n
X2Rlc2lnbigkc3RlcCk7CgkJCWJyZWFrOwoJCWNhc2UgJ3BhZ2UtZGVzaWduJzoKCQkJYXN2
X3R1bWJsZWxvZ19wYWdlZGVzaWduKCRzdGVwKTsKCQljYXNlICdwYWdlLXN0eWxlJzoKCQkJ
YXN2X3R1bWJsZWxvZ19wYWdlc3R5bGUoJHN0ZXApOwoJfQp9CgpmdW5jdGlvbiBhc3ZfdHVt
YmxlbG9nX3BhZ2VzdHlsZSgkc3RlcCkKewoKCWV4dHJhY3QoZG9TbGFzaChnZXRfYXN2X3R1
bWJsZWxvZ19wcmVmcygpKSk7CgoJJG1lc3NhZ2UgPSAnJzsKCWlmKGdwcygnYWN0aW9uJyk9
PSdzYXZlJyAmJiBncHMoJ3N0eWxlLW5hbWUnKSkKCXsKCQkkZm9ybSA9IGRvU2xhc2goYmFz
ZTY0X2VuY29kZShncHMoJ2Zvcm0nKSkpOwoJCSRycyA9IHNhZmVfdXBkYXRlKCJ0eHBfY3Nz
IiwgImNzcz0nIi4kZm9ybSAuIiciLCAibmFtZSA9ICciLmRvU2xhc2goZ3BzKCdzdHlsZS1u
YW1lJykpLiInIik7CgkJJG1lc3NhZ2UgPSAnU3R5bGUgc2F2ZWQnOwoJfQoKCXBhZ2V0b3Ao
J1R1bWJsZWxvZycsICRtZXNzYWdlKTsKCgllY2hvIGFzdl90dW1ibGVsb2dfdGl0bGUoJHN0
ZXApOwoKCSRycyA9IHNhZmVfcm93KCJjc3MiLCAndHhwX3NlY3Rpb24nLCAibmFtZSA9ICck
dHVtYmxlbG9nc2VjdGlvbiciKTsKCWlmKCRycykKCXsKCQkkcGFnZV9ycyA9IHNhZmVfcm93
KCcqJywgJ3R4cF9jc3MnLCAibmFtZT0nIi4kcnNbJ2NzcyddLiInIik7CgkJaWYoJHBhZ2Vf
cnMpCgkJewoJCQlleHRyYWN0KCRwYWdlX3JzKTsKCQkJJHRoZWNzcyA9IGJhc2U2NF9kZWNv
ZGUoJGNzcyk7CgkJfQoJfQoKCgllY2hvIG4uc3RhcnRUYWJsZSgnbGlzdCcsICcnLCAnJywg
JycsICcnKS4KCQluLic8Zm9ybSBuYW1lPSJwb3N0LWZvcm0iIG1ldGhvZD0icG9zdCIgYWN0
aW9uPSJpbmRleC5waHAiPicuCgkJbi5oSW5wdXQoJ2V2ZW50JywgJ2Fzdl90dW1ibGVsb2cn
KS4KCQluLmhJbnB1dCgnc3RlcCcsICdwYWdlLXN0eWxlJykuCgkJbi5oSW5wdXQoJ2FjdGlv
bicsICdzYXZlJykuCgkJbi5oSW5wdXQoJ3N0eWxlLW5hbWUnLCAkbmFtZSkuCgkJdHIodGRh
KCJFZGl0IHRoZSBzdHlsZSB0aGF0IGhhbmRsZXMgdGhlIHR1bWJsZWxvZyBzZWN0aW9uIDxi
PiIuJG5hbWUuIjwvYj4uIiwgJyBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXIiJykpLgoJCXRy
KHRkKHRleHRfYXJlYSgnZm9ybScsICc4MDAnLCAnNjAwJywgKCR0aGVjc3MpPyR0aGVjc3M6
JycpKSkuCgkJdHIodGRhKGZJbnB1dCgnc3VibWl0Jywnc2F2ZV9zZXR0aW5ncycsJ3NhdmUn
LCJwdWJsaXNoIiwgJycsICcnLCAnJywgNCksICcgc3R5bGU9InRleHQtYWxpZ246cmlnaHQi
JykpLic8L2Zvcm0+Jy4KCWVuZFRhYmxlKCk7Cn0KCmZ1bmN0aW9uIGFzdl90dW1ibGVsb2df
cGFnZWRlc2lnbigkc3RlcCkKewoKCWV4dHJhY3QoZG9TbGFzaChnZXRfYXN2X3R1bWJsZWxv
Z19wcmVmcygpKSk7CgoJJG1lc3NhZ2UgPSAnJzsKCWlmKGdwcygnYWN0aW9uJyk9PSdzYXZl
JyAmJiBncHMoJ3BhZ2UtbmFtZScpKQoJewoJCSRycyA9IHNhZmVfdXBkYXRlKCJ0eHBfcGFn
ZSIsICJ1c2VyX2h0bWw9JyIuZG9TbGFzaChncHMoJ2Zvcm0nKSkuIiciLCAibmFtZSA9ICci
LmRvU2xhc2goZ3BzKCdwYWdlLW5hbWUnKSkuIiciKTsKCQkkbWVzc2FnZSA9ICdQYWdlIHNh
dmVkJzsKCX0KCglwYWdldG9wKCdUdW1ibGVsb2cnLCAkbWVzc2FnZSk7CgoJZWNobyBhc3Zf
dHVtYmxlbG9nX3RpdGxlKCRzdGVwKTsKCgkkcnMgPSBzYWZlX3JvdygicGFnZSIsICd0eHBf
c2VjdGlvbicsICJuYW1lID0gJyR0dW1ibGVsb2dzZWN0aW9uJyIpOwoJaWYoJHJzKQoJewoJ
CSRwYWdlX3JzID0gc2FmZV9yb3coJyonLCAndHhwX3BhZ2UnLCAibmFtZT0nIi4kcnNbJ3Bh
Z2UnXS4iJyIpOwoJCWlmKCRwYWdlX3JzKQoJCXsKCQkJZXh0cmFjdCgkcGFnZV9ycyk7CgkJ
fQoJfQoKCgllY2hvIG4uc3RhcnRUYWJsZSgnbGlzdCcsICcnLCAnJywgJycsICcnKS4KCQlu
Lic8Zm9ybSBuYW1lPSJwb3N0LWZvcm0iIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJpbmRleC5w
aHAiPicuCgkJbi5oSW5wdXQoJ2V2ZW50JywgJ2Fzdl90dW1ibGVsb2cnKS4KCQluLmhJbnB1
dCgnc3RlcCcsICdwYWdlLWRlc2lnbicpLgoJCW4uaElucHV0KCdhY3Rpb24nLCAnc2F2ZScp
LgoJCW4uaElucHV0KCdwYWdlLW5hbWUnLCAkbmFtZSkuCgkJdHIodGRhKCJFZGl0IHRoZSBw
YWdlIHRoYXQgaGFuZGxlcyB0aGUgdHVtYmxlbG9nIHNlY3Rpb24gPGI+Ii4kbmFtZS4iPC9i
Pi4iLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciInKSkuCgkJdHIodGQodGV4dF9hcmVh
KCdmb3JtJywgJzgwMCcsICc2MDAnLCAoJHVzZXJfaHRtbCk/JHVzZXJfaHRtbDonJykpKS4K
CQl0cih0ZGEoZklucHV0KCdzdWJtaXQnLCdzYXZlX3NldHRpbmdzJywnc2F2ZScsInB1Ymxp
c2giLCAnJywgJycsICcnLCA0KSwgJyBzdHlsZT0idGV4dC1hbGlnbjpyaWdodCInKSkuJzwv
Zm9ybT4nLgoJZW5kVGFibGUoKTsKfQpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX2Rlc2lnbigk
c3RlcCkKewoKCWV4dHJhY3QoZG9TbGFzaChnZXRfYXN2X3R1bWJsZWxvZ19wcmVmcygpKSk7
CgoKCWlmKGdwcygnYWN0aW9uJyk9PSdzYXZlJykKCXsKCQlzd2l0Y2goZ3BzKCdtZXRob2Qn
KSkKCQl7CgkJCWNhc2UgInBvc3QiOgoJCQkJJHJzID0gc2FmZV91cGRhdGUoInR4cF9mb3Jt
IiwgIkZvcm09JyIuZ3BzKCdmb3JtJykuIiciLCAibmFtZSA9ICckcG9zdGZvcm0nIEFORCB0
eXBlPSdhcnRpY2xlJyIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgInF1b3RlIjoKCQkJCSRycyA9
IHNhZmVfdXBkYXRlKCJ0eHBfZm9ybSIsICJGb3JtPSciLmdwcygnZm9ybScpLiInIiwgIm5h
bWUgPSAnJHF1b3RlZm9ybScgQU5EIHR5cGU9J2FydGljbGUnIik7CgkJCQlicmVhazsKCQkJ
Y2FzZSAibGluayI6CgkJCQkkcnMgPSBzYWZlX3VwZGF0ZSgidHhwX2Zvcm0iLCAiRm9ybT0n
Ii5ncHMoJ2Zvcm0nKS4iJyIsICJuYW1lID0gJyRsaW5rZm9ybScgQU5EIHR5cGU9J2FydGlj
bGUnIik7CgkJCQlicmVhazsKCQkJY2FzZSAicGhvdG8iOgoJCQkJJHJzID0gc2FmZV91cGRh
dGUoInR4cF9mb3JtIiwgIkZvcm09JyIuZ3BzKCdmb3JtJykuIiciLCAibmFtZSA9ICckcGhv
dG9mb3JtJyBBTkQgdHlwZT0nYXJ0aWNsZSciKTsKCQkJCWJyZWFrOwoJCX0KCgl9CgoJcGFn
ZXRvcCgnVHVtYmxlbG9nJywgKGdwcygnc2F2ZScpKT8gJ0Zvcm0gc2F2ZWQnOicnKTsKCgll
Y2hvIGFzdl90dW1ibGVsb2dfdGl0bGUoJHN0ZXApOwoKCSRmb3JtcyA9IGFycmF5KCdwb3N0
Jz0+JHBvc3Rmb3JtLCAncXVvdGUnPT4kcXVvdGVmb3JtLCAnbGluayc9PiRsaW5rZm9ybSwg
J3Bob3RvJz0+JHBob3RvZm9ybSk7CgkkZWRpdGZvcm1zID0gYXJyYXkoKTsKCSRmb3JtbmFt
ZXMgPSBhcnJheSgpOwoKCWZvcmVhY2goJGZvcm1zIGFzICR0eXBlPT4kZm9ybSkKCXsKCQkk
cnMgPSBzYWZlX3JvdygiKiIsICd0eHBfZm9ybScsICJuYW1lID0gJyRmb3JtJyBBTkQgdHlw
ZT0nYXJ0aWNsZSciKTsKCgkJaWYoJHJzKQoJCXsKCQkJJGVkaXRmb3Jtc1skdHlwZV0gPSAk
cnNbJ0Zvcm0nXTsKCQkJJGZvcm1uYW1lc1skdHlwZV0gPSAkcnNbJ25hbWUnXTsKCQl9Cgl9
CgoJZWNobyBuLnN0YXJ0VGFibGUoJ2xpc3QnLCAnJywgJycsICcnLCAnJykuCgoJCW4uJzxm
b3JtIG5hbWU9InBvc3QtZm9ybSIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBocCI+
Jy4KCQluLmhJbnB1dCgnZXZlbnQnLCAnYXN2X3R1bWJsZWxvZycpLgoJCW4uaElucHV0KCdz
dGVwJywgJ0Rlc2lnbicpLgoJCW4uaElucHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4uaElu
cHV0KCdtZXRob2QnLCAncG9zdCcpLgoJCXRyKHRkYSgiRWRpdCB0aGUgZm9ybSB0aGF0IGhh
bmRsZXMgPGI+cG9zdHMgKCIuJGZvcm1uYW1lc1sncG9zdCddLiIpPC9iPi4iLCAnIHN0eWxl
PSJ0ZXh0LWFsaWduOmNlbnRlciInKSkuCgkJdHIodGQodGV4dF9hcmVhKCdmb3JtJywgJzE1
MCcsICc1MDAnLCAkZWRpdGZvcm1zWydwb3N0J10pKSkuCgkJdHIodGRhKGZJbnB1dCgnc3Vi
bWl0Jywnc2F2ZV9zZXR0aW5ncycsJ3NhdmUnLCJwdWJsaXNoIiwgJycsICcnLCAnJywgNCks
ICcgc3R5bGU9InRleHQtYWxpZ246cmlnaHQiJykpLic8L2Zvcm0+Jy4KCgkJbi4nPGZvcm0g
bmFtZT0icXVvdGUtZm9ybSIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBocCI+Jy4K
CQluLmhJbnB1dCgnZXZlbnQnLCAnYXN2X3R1bWJsZWxvZycpLgoJCW4uaElucHV0KCdzdGVw
JywgJ0Rlc2lnbicpLgoJCW4uaElucHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4uaElucHV0
KCdtZXRob2QnLCAncXVvdGUnKS4KCQl0cih0ZGEoJ0VkaXQgdGhlIGZvcm0gdGhhdCBoYW5k
bGVzIDxiPnF1b3RlcyAoJy4kZm9ybW5hbWVzWydxdW90ZSddLicpPC9iPi4nLCAnIHN0eWxl
PSJ0ZXh0LWFsaWduOmNlbnRlciInKSkuCgkJdHIodGQodGV4dF9hcmVhKCdmb3JtJywgJzE1
MCcsICc1MDAnLCAkZWRpdGZvcm1zWydxdW90ZSddKSkpLgoJCXRyKHRkYShmSW5wdXQoJ3N1
Ym1pdCcsJ3NhdmVfc2V0dGluZ3MnLCdzYXZlJywicHVibGlzaCIsICcnLCAnJywgJycsIDQp
LCAnIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0IicpKS4nPC9mb3JtPicuCgoJCW4uJzxmb3Jt
IG5hbWU9ImxpbmstZm9ybSIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBocCI+Jy4K
CQluLmhJbnB1dCgnZXZlbnQnLCAnYXN2X3R1bWJsZWxvZycpLgoJCW4uaElucHV0KCdzdGVw
JywgJ0Rlc2lnbicpLgoJCW4uaElucHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4uaElucHV0
KCdtZXRob2QnLCAnbGluaycpLgoJCXRyKHRkYSgnRWRpdCB0aGUgZm9ybSB0aGF0IGhhbmRs
ZXMgPGI+bGlua3MgKCcuJGZvcm1uYW1lc1snbGluayddLicpPC9iPi4nLCAnIHN0eWxlPSJ0
ZXh0LWFsaWduOmNlbnRlciInKSkuCgkJdHIodGQodGV4dF9hcmVhKCdmb3JtJywgJzE1MCcs
ICc1MDAnLCAkZWRpdGZvcm1zWydsaW5rJ10pKSkuCgkJdHIodGRhKGZJbnB1dCgnc3VibWl0
Jywnc2F2ZV9zZXR0aW5ncycsJ3NhdmUnLCJwdWJsaXNoIiwgJycsICcnLCAnJywgNCksICcg
c3R5bGU9InRleHQtYWxpZ246cmlnaHQiJykpLic8L2Zvcm0+Jy4KCgkJbi4nPGZvcm0gbmFt
ZT0icGhvdG8tZm9ybSIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBocCI+Jy4KCQlu
LmhJbnB1dCgnZXZlbnQnLCAnYXN2X3R1bWJsZWxvZycpLgoJCW4uaElucHV0KCdzdGVwJywg
J0Rlc2lnbicpLgoJCW4uaElucHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4uaElucHV0KCdt
ZXRob2QnLCAncGhvdG8nKS4KCQl0cih0ZGEoJ0VkaXQgdGhlIGZvcm0gdGhhdCBoYW5kbGVz
IDxiPnBob3RvcyAoJy4kZm9ybW5hbWVzWydwaG90byddLicpPC9iPi4nLCAnIHN0eWxlPSJ0
ZXh0LWFsaWduOmNlbnRlciInKSkuCgkJdHIodGQodGV4dF9hcmVhKCdmb3JtJywgJzE1MCcs
ICc1MDAnLCAkZWRpdGZvcm1zWydwaG90byddKSkpLgoJCXRyKHRkYShmSW5wdXQoJ3N1Ym1p
dCcsJ3NhdmVfc2V0dGluZ3MnLCdzYXZlJywicHVibGlzaCIsICcnLCAnJywgJycsIDQpLCAn
IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0IicpKS4nPC9mb3JtPicuCgoJZW5kVGFibGUoKTsK
fQoKZnVuY3Rpb24gYXN2X3R1bWJsZWxvZ19mZWVkcygkc3RlcCkKewoJYXN2X3R1bWJsZWxv
Z192ZXJpZnlUYWJsZSgpOwoKCSR0eXBlcyA9IGFycmF5KCdwb3N0Jz0+J3Bvc3QnLCAncXVv
dGUnPT4ncXVvdGUnLCAncGhvdG8nPT4ncGhvdG8nLCAnbGluayc9PidsaW5rJyk7CgoJJG1l
c3NhZ2UgPSAnJzsKCglleHRyYWN0KGRvU2xhc2gobEF0dHMoYXJyYXkoCgkJJ3Jzc3BhdGgn
ID0+ICcnLAoJCSd0eXBlJwk9PiAnJywKCQknY29tbWVudHMnID0+ICcnLAoJCSdjYXRlZ29y
eTEnID0+JycsCgkJJ2NhdGVnb3J5MicgPT4gJycsCgkJJ2tleXdvcmRzJwk9PicnLAoJCSdJ
RCcgPT4nJywKCQkpLAoJCWdwc2EoYXJyYXkoCgkJCSdyc3NwYXRoJywKCQkJJ3R5cGUnLAoJ
CQknY29tbWVudHMnLAoJCQknY2F0ZWdvcnkxJywKCQkJJ2NhdGVnb3J5MicsCgkJCSdrZXl3
b3JkcycsCgkJCSdJRCcKCQkJKSkpKSk7CgoJZXh0cmFjdChnZXRfYXN2X3R1bWJsZWxvZ19w
cmVmcygpKTsKCglpZihncHMoJ3NhdmVfZmVlZHMnKSkKCXsKCQlpZihpbl9hcnJheSgkdHlw
ZSwkdHlwZXMpKQoJCXsKCQkJaWYoJHRpdGxlID0gYXN2X3R1bWJsZWxvZ192ZXJpZnlGZWVk
KCRyc3NwYXRoLCAkc2ltcGxlcGllKSkKCQkJewoJCQkJJHRpdGxlID0gZG9TbGFzaCgkdGl0
bGUpOwoJCQkJaWYoJElEKQoJCQkJewoJCQkJCXNhZmVfdXBkYXRlKCdhc3ZfdHVtYmxlbG9n
X2ZlZWRzJywKCQkJCQkJIkZlZWQgPSAnJHJzc3BhdGgnLAoJCQkJCQlUaXRsZSA9ICckdGl0
bGUnLAoJCQkJCQlUeXBlID0gJyR0eXBlJywKCQkJCQkJQ2F0ZWdvcnkxID0gJyRjYXRlZ29y
eTEnLAoJCQkJCQlDYXRlZ29yeTIgPSAnJGNhdGVnb3J5MicsCgkJCQkJCUtleXdvcmRzID0g
JyRrZXl3b3JkcycsCgkJCQkJCUFubm90YXRlID0gJyRjb21tZW50cyciLAoJCQkJCQkiSUQg
PSAkSUQiCgkJCQkJCSk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJc2FmZV9pbnNlcnQo
J2Fzdl90dW1ibGVsb2dfZmVlZHMnLAoJCQkJCQkiRmVlZCA9ICckcnNzcGF0aCcsCgkJCQkJ
CVRpdGxlID0gJyR0aXRsZScsCgkJCQkJCVR5cGUgPSAnJHR5cGUnLAoJCQkJCQlDYXRlZ29y
eTEgPSAnJGNhdGVnb3J5MScsCgkJCQkJCUNhdGVnb3J5MiA9ICckY2F0ZWdvcnkyJywKCQkJ
CQkJS2V5d29yZHMgPSAnJGtleXdvcmRzJywKCQkJCQkJQW5ub3RhdGUgPSAnJGNvbW1lbnRz
JyIKCQkJCQkJKTsKCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRtZXNzYWdlID0gIk5v
dCBhIHZhbGlkIGZlZWQuIjsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkbWVzc2FnZSA9ICJU
eXBlIGlzIHJlcXVpcmVkLiAgLSAkdHlwZSAtIjsKCQl9Cgl9CglpZihncHMoJ2FjdGlvbicp
PT0nZGVsZXRlJykKCXsKCQkkc2VsZWN0ZWQgPSBwcygnc2VsZWN0ZWQnKTsKCQlpZiAoJHNl
bGVjdGVkKQoJCXsKCQkJJGlkcyA9IGFycmF5KCk7CgkJCWZvcmVhY2ggKCRzZWxlY3RlZCBh
cyAkaWQpCgkJCXsKCQkJCSRpZCA9IGFzc2VydF9pbnQoJGlkKTsKCQkJCWlmIChzYWZlX2Rl
bGV0ZSgnYXN2X3R1bWJsZWxvZ19mZWVkcycsICJJRCA9ICRpZCIpKQoJCQkJewoJCQkJCSRp
ZHNbXSA9ICRpZDsKCQkJCX0KCQkJfQoJCQkkY2hhbmdlZCA9IGpvaW4oJywgJywgJGlkcyk7
CgkJCSRtZXNzYWdlID0gIlJlbW92ZWQgJGNoYW5nZWQiOwoJCX0KCX0KCglwYWdldG9wKCdU
dW1ibGVsb2cnLCAkbWVzc2FnZSk7CgoJZWNobyBuLm4uJzxmb3JtIG5hbWU9InR1bWJsZWxv
Zy1hZG1pbiIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBocD9ldmVudD1hc3ZfdHVt
YmxlbG9nJnN0ZXA9RmVlZHMiPicuCgloSW5wdXQoJ3N0ZXAnLCAnRmVlZHMnKS4KCWhJbnB1
dCgnSUQnLCAkSUQpOwoKCWVjaG8gYXN2X3R1bWJsZWxvZ190aXRsZSgkc3RlcCkuCgoJCXRh
ZygnPGEgaHJlZj0iaW5kZXgucGhwP2V2ZW50PWFzdl90dW1ibGVsb2cmc3RlcD1GZWVkcyI+
QWRkIE5ldyBGZWVkPC9hPicgLCdoMycsICcgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsi
JykuCgoJCXN0YXJ0VGFibGUoJ2xpc3QnKS4KCgkJCXRyKHRkKCdBdG9tL1JTUyBQYXRoJyku
dGQoZklucHV0KCd0ZXh0JywgJ3Jzc3BhdGgnLCAkcnNzcGF0aCkpKS4KCgkJCXRyKHRkKCdU
eXBlJykudGQoc2VsZWN0SW5wdXQoJ3R5cGUnLCAkdHlwZXMsICR0eXBlLCAwKSkpLgoKCQkJ
dHIodGQoJ0NvbW1lbnRzJykudGQob25vZmZSYWRpbygnY29tbWVudHMnLCAoJGNvbW1lbnRz
KT8kY29tbWVudHM6IjEiKSkpLgoKCQkJdHIodGQoJ0NhdGVnb3J5MScpLnRkKGFzdl9jYXRf
cG9wdXAoJGNhdGVnb3J5MSwgJ2NhdGVnb3J5MScpKSkuCgoJCQl0cih0ZCgnQ2F0ZWdvcnky
JykudGQoYXN2X2NhdF9wb3B1cCgkY2F0ZWdvcnkyLCAnY2F0ZWdvcnkyJykpKS4KCgkJCXRy
KHRkKCdLZXl3b3JkcycpLnRkKGZJbnB1dCgndGV4dCcsICdrZXl3b3JkcycsICRrZXl3b3Jk
cykpKS4KCgkJCXRyKHRkYShmSW5wdXQoJ3N1Ym1pdCcsJ3NhdmVfZmVlZHMnLCAoJElEKT8n
c2F2ZSc6J2FkZCcsInB1Ymxpc2giLCAnJywgJycsICcnLCA0KSwgJyBjb2xzcGFuPTInKSku
CgoJCWVuZFRhYmxlKCkuJzwvZm9ybT4nOwoJZWNobyB0YWcoIkN1cnJlbnQgRmVlZHMiLCAi
aDMiLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciInKS4KCQknPGZvcm0gbmFtZT0ibG9u
Z2Zvcm0iIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJpbmRleC5waHA/ZXZlbnQ9YXN2X3R1bWJs
ZWxvZyZzdGVwPUZlZWRzIj4nLgoJCWhJbnB1dCgnZXZlbnQnLCAnYXN2X3R1bWJsZWxvZycp
LgoJCWhJbnB1dCgnc3RlcCcsICdGZWVkcycpLgoJCWhJbnB1dCgnYWN0aW9uJywgJ2RlbGV0
ZScpLgoKCQluLnN0YXJ0VGFibGUoJ2xpc3QnLCAnJywgJycsICcnLCAnOTAlJykuCgkJbi50
cigKCQkJbi5jb2x1bW5faGVhZCgnSUQnLCAnaWQnLCAnbGlzdCcsIHRydWUsICcnLCAnJywg
JycpLgoJCQluLmNvbHVtbl9oZWFkKCdUaXRsZScsICd0aXRsZScsICdsaXN0JywgdHJ1ZSwg
JycsICcnLCAnJykuCgkJCW4uY29sdW1uX2hlYWQoJ0ZlZWQnLCAnZmVlZCcsICdsaXN0Jywg
dHJ1ZSwgJycsICcnLCAnJykuCgkJCW4uY29sdW1uX2hlYWQoJ1R5cGUnLCAndHlwZScsICds
aXN0JywgdHJ1ZSwgJycsICcnLCAnJykuCgkJCW4uY29sdW1uX2hlYWQoJ0NvbW1lbnRzJywg
J2NvbW1lbnRzJywgJ2xpc3QnLCB0cnVlLCAnJywgJycsICcnKS4KCQkJbi5jb2x1bW5faGVh
ZCgnQ2F0ZWdvcnkxJywgJ2NhdGVnb3J5MScsICdsaXN0JywgdHJ1ZSwgJycsICcnLCAnJyku
CgkJCW4uY29sdW1uX2hlYWQoJ0NhdGVnb3J5MicsICdjYXRlZ29yeTEnLCAnbGlzdCcsIHRy
dWUsICcnLCAnJywgJycpLgoJCQluLmNvbHVtbl9oZWFkKCdLZXl3b3JkcycsICdLZXl3b3Jk
cycsICdsaXN0JywgdHJ1ZSwgJycsICcnLCAnJykuCgkJCWhDZWxsKCkKCQkpOwoJJHJzID0g
c2FmZV9yb3dzX3N0YXJ0KCIqIiwgImFzdl90dW1ibGVsb2dfZmVlZHMiLCAiMT0xIik7Cglp
ZigkcnMpCgl7CgkJd2hpbGUoJGEgPSBuZXh0Um93KCRycykpCgkJewoJCQlleHRyYWN0KCRh
KTsKCQkJJGxpbmsgPSAiPGEgaHJlZj1cImluZGV4LnBocD9ldmVudD1hc3ZfdHVtYmxlbG9n
JnN0ZXA9RmVlZHMmcnNzcGF0aD0kRmVlZCZ0eXBlPSRUeXBlJGNvbW1lbnRzPSRBbm5vdGF0
ZSZjYXRlZ29yeTE9JENhdGVnb3J5MSZjYXRlZ29yeTI9JENhdGVnb3J5MiZrZXl3b3Jkcz0k
S2V5d29yZHMmSUQ9JElEXCI+JFRpdGxlPC9hPiI7CgoJCQllY2hvIG4udHIoCQkJdGQoJElE
KS50ZCgkbGluaykudGQoc3Vic3RyKCRGZWVkLDAsMTApLicuLi4nKS50ZCgkVHlwZSkudGQo
KCRBbm5vdGF0ZSk/Im9uIjoib2ZmIikudGQoJENhdGVnb3J5MSkudGQoJENhdGVnb3J5Miku
dGQoJEtleXdvcmRzKS50ZChmSW5wdXQoJ2NoZWNrYm94JywgJ3NlbGVjdGVkW10nLCAkSUQp
KSk7CgoJCX0KCQllY2hvIG4udHIoCgkJCQl0ZGEoIHNlbGVjdF9idXR0b25zKCkuCiBhc3Zf
dHVtYmxlbG9nX2xpc3RfbXVsdGllZGl0X2Zvcm0oKSwnIGNvbHNwYW49IjkiIHN0eWxlPSJ0
ZXh0LWFsaWduOiByaWdodDsgYm9yZGVyOiBub25lOyInKSk7Cgl9CgkJZWNobyBuLmVuZFRh
YmxlKCkuJzwvZm9ybT4nOwp9CgpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX3NldHRpbmdzKCRz
dGVwKQp7CglnbG9iYWwgJHByZWZzOwoKCWlmKGdwcygnc2F2ZV9zZXR0aW5ncycpKQoJewoJ
CWV4dHJhY3QoZ3BzYShhcnJheSgnc291cmNlbGluaycsICd0dW1ibGVsb2dzZWN0aW9uJywg
J3NpbXBsZXBpZScsICdsaW5rZm9ybScsICdwb3N0Zm9ybScsICdxdW90ZWZvcm0nLCAncGhv
dG9mb3JtJykpKTsKCgkJKCRzb3VyY2VsaW5rKT8gc2V0X3ByZWYoJ3NvdXJjZWxpbmsnLCAk
c291cmNlbGluaywgJ2Fzdl90dW1ibGVsb2cnLCAnJyk6Jyc7CgoJCSgkdHVtYmxlbG9nc2Vj
dGlvbik/IHNldF9wcmVmKCd0dW1ibGVsb2dzZWN0aW9uJywgJHR1bWJsZWxvZ3NlY3Rpb24s
ICdhc3ZfdHVtYmxlbG9nJywgJycpOicnOwoKCQkoJHNpbXBsZXBpZSk/IHNldF9wcmVmKCdz
aW1wbGVwaWUnLCAkc2ltcGxlcGllLCAnYXN2X3R1bWJsZWxvZycsICcnKTonJzsKCgkJKCRw
b3N0Zm9ybSk/IHNldF9wcmVmKCdwb3N0Zm9ybScsICRwb3N0Zm9ybSwgJ2Fzdl90dW1ibGVs
b2cnLCAnJyk6Jyc7CgoJCSgkcXVvdGVmb3JtKT8gc2V0X3ByZWYoJ3F1b3RlZm9ybScsICRx
dW90ZWZvcm0sICdhc3ZfdHVtYmxlbG9nJywgJycpOicnOwoKCQkoJHBob3RvZm9ybSk/IHNl
dF9wcmVmKCdwaG90b2Zvcm0nLCAkcGhvdG9mb3JtLCAnYXN2X3R1bWJsZWxvZycsICcnKTon
JzsKCgkJKCRsaW5rZm9ybSk/IHNldF9wcmVmKCdsaW5rZm9ybScsICRsaW5rZm9ybSwgJ2Fz
dl90dW1ibGVsb2cnLCAnJyk6Jyc7CgoJfQoKCXBhZ2V0b3AoJ1R1bWJsZWxvZycsIChncHMo
J3NhdmUnKSk/ICdTZXR0aW5ncyBzYXZlZCc6JycpOwoKCWV4dHJhY3QoZ2V0X2Fzdl90dW1i
bGVsb2dfcHJlZnMoKSk7CgoJZWNobyBuLm4uJzxmb3JtIG5hbWU9InR1bWJsZWxvZy1hZG1p
biIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBocD9ldmVudD1hc3ZfdHVtYmxlbG9n
Ij4nOwoKCWVjaG8gYXN2X3R1bWJsZWxvZ190aXRsZSgkc3RlcCkuCgoJCXRhZygnR2VuZXJh
bCBTZXR0aW5ncycgLCdoMycsICcgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsiJykuCgoJ
CXN0YXJ0VGFibGUoJ2xpc3QnKS4KCgkJCXRyKHRkKCdTb3VyY2UgTGluayBGaWVsZCcpLnRk
KGFzdl9jdXN0b21fcG9wdXAoJHNvdXJjZWxpbmssICdzb3VyY2VsaW5rJykpKS4KCgkJCXRy
KHRkKCdUdW1ibGVsb2cgU2VjdGlvbicpLnRkKGFzdl9zZWN0aW9uX3BvcHVwKCR0dW1ibGVs
b2dzZWN0aW9uLAoJCQkndHVtYmxlbG9nc2VjdGlvbicpKSkuCgoJCQl0cih0ZCgnU2ltcGxl
UGllIFBhdGgnKS50ZChmSW5wdXQoJ3RleHQnLCAnc2ltcGxlcGllJywgJHNpbXBsZXBpZSkp
KS4KCgkJZW5kVGFibGUoKS4KCgkJdGFnKCcgJywgJ3AnKS4KCgkJdGFnKCdGb3JtcycgLCdo
MycsICcgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsiJykuCgoJCXN0YXJ0VGFibGUoJ2xp
c3QnKS4KCgkJCXRyKHRkKCdQb3N0IEZvcm0nKS50ZChhc3ZfZm9ybV9wb3B1cCgkcG9zdGZv
cm0sICdwb3N0Zm9ybScpKSkuCgoJCQl0cih0ZCgnUXVvdGUgRm9ybScpLnRkKGFzdl9mb3Jt
X3BvcHVwKCRxdW90ZWZvcm0sICdxdW90ZWZvcm0nKSkpLgoKCQkJdHIodGQoJ1Bob3RvIEZv
cm0nKS50ZChhc3ZfZm9ybV9wb3B1cCgkcGhvdG9mb3JtLCAncGhvdG9mb3JtJykpKS4KCgkJ
CXRyKHRkKCdMaW5rIEZvcm0nKS50ZChhc3ZfZm9ybV9wb3B1cCgkbGlua2Zvcm0sICdsaW5r
Zm9ybScpKSkuCgoJCQl0cih0ZGEoZklucHV0KCdzdWJtaXQnLCdzYXZlX3NldHRpbmdzJywn
c2F2ZScsInB1Ymxpc2giLCAnJywgJycsICcnLCA0KSwgJyBjb2xzcGFuPTInKSkuCgoJCWVu
ZFRhYmxlKCk7CgoJZWNobyBuLm4uJzwvZm9ybT4nLgoJJzxoMyBzdHlsZT0idGV4dC1hbGln
bjpjZW50ZXIiPjxhIGhyZWY9IicuJHByZWZzWydzaXRldXJsJ10uJy8/dXBkYXRlZmVlZHM9
MSI+bWFudWFsbHkgdXBkYXRlIGZlZWRzPC9hPjwvaDM+JzsKfQoKaWYoZ3BzKCdhc3ZfdHVt
YmxlbG9nX3VwZGF0ZWZlZWRzJyk9PTEpCnsKCglleHRyYWN0KGdldF9hc3ZfdHVtYmxlbG9n
X3ByZWZzKCkpOwoJJHJzID0gc2FmZV9yb3dzX3N0YXJ0KCIqIiwgImFzdl90dW1ibGVsb2df
ZmVlZHMiLCAiMT0xIik7CgllY2hvICc8cHJlPic7CglpZigkcnMpCgl7CgkJd2hpbGUoJGEg
PSBuZXh0Um93KCRycykpCgkJewoJCQlleHRyYWN0KCRhKTsKCQkJc3dpdGNoKCRUeXBlKQoJ
CQl7CgkJCQljYXNlICJwb3N0IjoKCQkJCQkkZm9ybSA9ICRwb3N0Zm9ybTsKCQkJCQlicmVh
azsKCQkJCWNhc2UgInF1b3RlIjoKCQkJCQkkZm9ybSA9ICRxdW90ZWZvcm07CgkJCQkJYnJl
YWs7CgkJCQljYXNlICJwaG90byI6CgkJCQkJJGZvcm0gPSAkcGhvdG9mb3JtOwoJCQkJCWJy
ZWFrOwoJCQkJY2FzZSAibGluayI6CgkJCQkJJGZvcm0gPSAkbGlua2Zvcm07CgkJCQkJYnJl
YWs7CgkJCX0KCQkJZWNobyBhc3ZfcnNzZ3JhYihhcnJheSgKCQkJCSdmZWVkJwk9PiAkRmVl
ZCwKCQkJCSdzaW1wbGVwaWUnID0+ICRzaW1wbGVwaWUsCgkJCQkndHlwZScJPT4gJFR5cGUs
CgkJCQknY2F0ZWdvcnkxJwk9PiAkQ2F0ZWdvcnkxLAoJCQkJJ2NhdGVnb3J5MicgPT4gJENh
dGVnb3J5MiwKCQkJCSdzZWN0aW9uJwk9PiAkdHVtYmxlbG9nc2VjdGlvbiwKCQkJCSdmb3Jt
JwkJPT4gJGZvcm0sCgkJCQknbGlua2ZpZWxkJwk9PiAkc291cmNlbGluaywKCQkJCSdwdWJk
YXRlJyA9PiAnJywKCQkJCSdjb21tZW50cycJPT4gJEFubm90YXRlLAoJCQkJJ2tleXdvcmRz
Jwk9PiAkS2V5d29yZHMsCgkJCQkpKTsKCQl9Cgl9CgllY2hvICc8L3ByZT4nOwoJZXhpdCgp
OwoKfQoKZnVuY3Rpb24gYXN2X3Jzc2dyYWIoJGF0dHMpCnsKCWdsb2JhbCAkcHJlZnMsICR0
eHBjZmc7CglleHRyYWN0KCRwcmVmcyk7CgoJZXh0cmFjdChsQXR0cyhhcnJheSgKCQkJJ2Zl
ZWQnICAgICAgID0+ICcnLAoJCQknc2ltcGxlcGllJyAgPT4gJHR4cGNmZ1sndHhwYXRoJ10u
Jy9saWIvc2ltcGxlcGllLmluYycsCgkJCSd0eXBlJwkJPT4gJ3NpbXBsZScsCgkJCSdjYXRl
Z29yeTEnCT0+ICcnLAoJCQknY2F0ZWdvcnkyJyA9PiAnJywKCQkJJ3NlY3Rpb24nCT0+ICdk
ZWZhdWx0JywKCQkJJ2Zvcm0nCQk9PiAnJywKCQkJJ2xpbmtmaWVsZCcJPT4gJ2N1c3RvbV8x
JywKCQkJJ3B1YmRhdGUnID0+ICcnLAoJCQknY29tbWVudHMnCT0+ICdvbicsCgkJCSdrZXl3
b3JkcycJPT4gJycsCgkJCSksJGF0dHMpKTsKCgkkbWVzc2FnZSA9ICcnOwoKCS8vR2V0IFNp
bXBsZVBpZQoJcmVxdWlyZV9vbmNlKCRzaW1wbGVwaWUpOwoKCS8vQ3JlYXRlIGFuZCBzZXR1
cCBTaW1wbGVQaWUgSW5zdGFuY2UKCSR0aGVmZWVkID0gbmV3IFNpbXBsZVBpZSgpOwoJJHRo
ZWZlZWQtPnNldF9mZWVkX3VybCgkZmVlZCk7CgkkdGhlZmVlZC0+c2V0X2Zhdmljb25faGFu
ZGxlcignLi9wbHVnaW5zL2Fzdl9yc3NncmFiLnBocCcsICdmYXZpY29uJyk7CgkkdGhlZmVl
ZC0+ZW5hYmxlX2NhY2hlKGZhbHNlKTsKCSR0aGVmZWVkLT5oYW5kbGVfY29udGVudF90eXBl
KCk7CgoJJG1lc3NhZ2UgLj0gIkdldHRpbmcgJGZlZWRcclxuIjsKCS8vR2V0IHRoZSBmZWVk
Cgkkc3VjY2VzcyA9ICR0aGVmZWVkLT5pbml0KCk7CgoJaWYoJHN1Y2Nlc3MpIHsKCQkkbWVz
c2FnZSAuPSAiXHRTdWNjZXNzIVxyXG4iOwoJCSRmZWVkaXRlbXMgPSAkdGhlZmVlZC0+Z2V0
X2l0ZW1zKCk7CgkJJGZhdmljb24gPSAkdGhlZmVlZC0+Z2V0X2Zhdmljb24oKTsKCQkkbWVz
c2FnZSAuPSAiXHRGYXZpY29uIC0gIi4kZmF2aWNvbi4iXHJcbiI7CgkJZm9yZWFjaCgkZmVl
ZGl0ZW1zIGFzICRmZWVkaXRlbSkgewoJCQkvLyBHZXQgaXRlbSB0aXRsZQoJCQkkb3V0Wyd0
aXRsZSddID0gYWRkc2xhc2hlcygkZmVlZGl0ZW0tPmdldF90aXRsZSgpKTsKCQkJJGZlZWRp
dGVtcyA9ICR0aGVmZWVkLT5nZXRfaXRlbXMoKTsKCgkJCS8vR2V0IHRoZSBwZXJtYWxpbmsK
CQkJJG91dFsncGVybWFsaW5rJ10gPSAkZmVlZGl0ZW0tPmdldF9saW5rKCk7CgoJCQkvL0dl
dCB0aGUgaW1hZ2UKCQkJJG91dFsnaW1hZ2UnXSA9ICRmYXZpY29uOwoKCQkJLy8gQ2hlY2sg
YW5kIHJldHJpZXZlIGRhdGUKCQkJaWYoJHB1YmRhdGUhPScnKQoJCQl7CgkJCQkkZGF0ZVRh
a2VuID0gJGZlZWRpdGVtLT5nZXRfaXRlbV90YWdzKCdodHRwOi8vcHVybC5vcmcvZGMvZWxl
bWVudHMvMS4xLycsICdkYXRlLlRha2VuJyk7CgkJCQlwcmludF9yKCRkYXRlVGFrZW5bMF1b
J2RhdGEnXSk7CgkJCQlkaWUoIm5vdCB5ZXQgaW1wbGVtZW50ZWQiKTsKCQkJfQoJCQllbHNl
aWYoJGZlZWRpdGVtLT5nZXRfZGF0ZSgpKSB7CgkJCQkkb3V0WyJwb3N0ZWQiXSA9ICRmZWVk
aXRlbS0+Z2V0X2RhdGUoJ1UnKTsKCQkJCSR3aGVuID0gImZyb21fdW5peHRpbWUoIi4kb3V0
Wydwb3N0ZWQnXS4iKSI7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkd2hlbiA9ICdub3coKSc7
CgkJCX0KCgkJCS8vR2V0IHRoZSBib2R5CgkJCWlmKCR0eXBlPT0ibWVkaWEiKQoJCQl7CgkJ
CQkkZW5jcyA9ICRmZWVkaXRlbS0+Z2V0X2VuY2xvc3VyZXMoKTsKCQkJCWZvcmVhY2goJGVu
Y3MgYXMgJGVuY2xvc3VyZSkKCQkJCXsKCQkJCQlwcmludF9yKCRlbmNsb3N1cmUpOwoJCQkJ
CWlmKCFpc19udWxsKCRlbmNsb3N1cmUtPmdldF9saW5rKCkpKXsKCQkJCQkJJGVuY19saW5r
ID0gJGVuY2xvc3VyZS0+Z2V0X2xpbmsoKTsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJ
CQkJJGVuY19saW5rID0gJGVuY19saW5rOwoJCQkJCX0KCQkJCQkkZW5jX2xpbmsgPSBzdHJf
cmVwbGFjZSgnJmFtcDsnLCAnJicsICRlbmNfbGluayk7CgkJCQkJJG91dFsnYm9keSddID0g
JzxvYmplY3QgdHlwZT0iYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2giIHdpZHRoPSI1
MDYiIGhlaWdodD0iNDE0IiBkYXRhPSInLiRlbmNfbGluay4nIj4KCSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIDxwYXJhbSBuYW1lPSJxdWFsaXR5IiB2YWx1ZT0iaGln
aCIgLz4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXJhbSBuYW1l
PSJhbGxvd2Z1bGxzY3JlZW4iIHZhbHVlPSJ0cnVlIiAvPgoJICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgPHBhcmFtIG5hbWU9InNjYWxlIiB2YWx1ZT0ic2hvd0FsbCIg
Lz4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXJhbSBuYW1lPSJt
b3ZpZSIgdmFsdWU9IicuJGVuY19saW5rLiciIC8+CgkgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIDwvb2JqZWN0Pic7CgkJCQl9CgkJCX0KCQkJZWxzZWlmKCR0eXBlPT0icGhv
dG8iKQoJCQl7CgkJCQlpZighZGVmaW5lZCgiSU1QQVRIIikpIGRlZmluZSgiSU1QQVRIIiwk
cGF0aF90b19zaXRlLicvJy4kaW1nX2Rpci4nLycpOwoJCQkJJGZlZWREZXNjcmlwdGlvbiA9
ICRmZWVkaXRlbS0+Z2V0X2NvbnRlbnQoKTsKCQkJCSRpbWFnZSA9IHJldHVybkltYWdlKCRm
ZWVkRGVzY3JpcHRpb24pOwoJCQkJJGltYWdlID0gdXJsZGVjb2RlKHNjcmFwZUltYWdlKCRp
bWFnZSkpOwoJCQkJLy9DaGVjayB0byBzZWUgaWYgaXQgbmVlZHMgdG8gYmUgaW1wb3J0ZWQg
aW50byBUWFAgSW1hZ2UKCQkJCWlmKCRpbWFnZSkKCQkJCXsKCQkJCQkvL2dldCBleHRlbnNp
b24KCQkJCQkkZXh0ID0gc3RycmNocigkaW1hZ2UsICcuJyk7CgkJCQkJJGNoZWNrID0gc2Fm
ZV9maWVsZCgnSUQnLCAndHhwX2ltYWdlJywgIk5BTUUgPSAnIi4kb3V0Wyd0aXRsZSddLiIn
IEFORCBEQVRFID0gJHdoZW4iKTsKCQkJCQlpZigkY2hlY2spCgkJCQkJewoJCQkJCQkkaW1h
Z2VJRCA9ICRjaGVjazsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJc2FmZV9pbnNl
cnQoJ3R4cF9pbWFnZScsCgkJCQkJCQkibmFtZSA9ICciLiRvdXRbJ3RpdGxlJ10uIicsCgkJ
CQkJCQlleHQgPSAnJGV4dCcsCgkJCQkJCQlkYXRlID0gJHdoZW4iCgkJCQkJCSk7CgkJCQkJ
CSRpbWFnZUlEID0gbXlzcWxfaW5zZXJ0X2lkKCk7CgkJCQkJCS8vIGNyZWF0ZSBhIG5ldyBj
dXJsIHJlc291cmNlCgkJCQkJCSRjaCA9IGN1cmxfaW5pdCgpOwoJCQkJCQkvLyBzZXQgVVJM
IGFuZCBvdGhlciBhcHByb3ByaWF0ZSBvcHRpb25zCgkJCQkJCWN1cmxfc2V0b3B0KCRjaCwg
Q1VSTE9QVF9VUkwsICIkaW1hZ2UiKTsKCQkJCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BU
X1JFVFVSTlRSQU5TRkVSLCB0cnVlKTsKCQkJCQkJLy8gZ3JhYiBVUkwsIGFuZCByZXR1cm4g
b3V0cHV0CgkJCQkJCSRvdXRwdXQgPSBjdXJsX2V4ZWMoJGNoKTsKCQkJCQkJLy8gY2xvc2Ug
Y3VybCByZXNvdXJjZSwgYW5kIGZyZWUgdXAgc3lzdGVtIHJlc291cmNlcwoJCQkJCQljdXJs
X2Nsb3NlKCRjaCk7CgkJCQkJCS8vd3JpdGUgdG8gZmlsZQoJCQkJCQkkZmlsZW5hbWUgPSBJ
TVBBVEguYmFzZW5hbWUoJGltYWdlKTsKCQkJCQkJJGZoID0gZm9wZW4oSU1QQVRILiRpbWFn
ZUlELiRleHQsICd3Jyk7CgkJCQkJCWZ3cml0ZSgkZmgsICRvdXRwdXQpOwoJCQkJCQlmY2xv
c2UoJGZoKTsKCQkJCQkJJHNob3J0cGF0aCA9IGJhc2VuYW1lKCRpbWFnZSk7CgkJCQkJCSRt
ZXNzYWdlIC49ICJcdEltcG9ydGVkICRmaWxlbmFtZVxyXG4iOwoJCQkJCX0KCQkJCX0KCQkJ
CSRvdXRbJ2JvZHknXSA9ICc8YSBocmVmPSInLiRvdXRbJ3Blcm1hbGluayddLiciPjxpbWcg
c3JjPSInLmh1LiRpbWdfZGlyLiIvIi4kaW1hZ2VJRC4kZXh0LiciIC8+PC9hPic7CgkJCX0K
CQkJZWxzZQoJCQl7CgkJCQlpZighYmVnaW5zV2l0aCgkZmVlZGl0ZW0tPmdldF9kZXNjcmlw
dGlvbigpLCAiPHAiKSkKCQkJCXsKCQkJCQkkb3V0Wydib2R5J10gPSBkb3RhZyhhZGRzbGFz
aGVzKCRmZWVkaXRlbS0+Z2V0X2Rlc2NyaXB0aW9uKCkpLCAncCcpOwoJCQkJfQoJCQkJZWxz
ZQoJCQkJewoJCQkJCSRvdXRbJ2JvZHknXSA9IGFkZHNsYXNoZXMoJGZlZWRpdGVtLT5nZXRf
ZGVzY3JpcHRpb24oKSk7CgkJCQl9CgkJCX0KCgkJCS8vQ2hlY2sgdG8gc2VlIGlmIHRoZSBh
cnRpY2xlIGhhcyBhbHJlYWR5IGJlZW4gaW1wb3J0ZWQKCQkJJGV4aXN0cyA9IHNhZmVfY291
bnQoJ3RleHRwYXR0ZXJuJywgIlRpdGxlID0gJyIuJG91dFsndGl0bGUnXS4iJyBBTkQgUG9z
dGVkPSR3aGVuIik7CgoJCQkvL0lmIGl0IGhhc24ndCB0aGVuIGxldCdzIGFkZCBpdAoJCQlp
ZigkZXhpc3RzPT0wKXsKCQkJCS8vQ2hlY2sgdG8gc2VlIGlmIGNhdGVnb3J5MSBleGlzdHMK
CQkJCWlmKCRjYXRlZ29yeTEgJiYgIWZldGNoX2NhdGVnb3J5X3RpdGxlKCRjYXRlZ29yeTEp
KQoJCQkJewoJCQkJCS8vQ3JlYXRlIG5ldyBjYXRlZ29yeQoJCQkJCSRuYW1lID0gc2FuaXRp
emVGb3JVcmwoJGNhdGVnb3J5MSk7CgkJCQkJJGV4aXN0cyA9IHNhZmVfZmllbGQoJ25hbWUn
LCAndHhwX2NhdGVnb3J5JywgIm5hbWUgPSAnIi5kb1NsYXNoKCRuYW1lKS4iJyBhbmQgdHlw
ZSA9ICdhcnRpY2xlJyIpOwoJCQkJCWlmICghJGV4aXN0cykKCQkJCQl7CgkJCQkJCSRxID0g
c2FmZV9pbnNlcnQoJ3R4cF9jYXRlZ29yeScsICJuYW1lID0gJyIuZG9TbGFzaCgkbmFtZSku
IicsIHRpdGxlID0gJyIuZG9TbGFzaCgkY2F0ZWdvcnkxKS4iJywgdHlwZSA9ICdhcnRpY2xl
JywgcGFyZW50ID0gJ3Jvb3QnIik7CgkJCQkJCXJlYnVpbGRfdHJlZSgncm9vdCcsIDEsICdh
cnRpY2xlJyk7CgkJCQkJfQoJCQkJfQoJCQkJLy9DaGVjayB0byBzZWUgaWYgY2F0ZWdvcnky
IGV4aXN0cwoJCQkJaWYoJGNhdGVnb3J5MiAmJiAhZmV0Y2hfY2F0ZWdvcnlfdGl0bGUoJGNh
dGVnb3J5MikpCgkJCQl7CgkJCQkJLy9DcmVhdGUgbmV3IGNhdGVnb3J5CgkJCQkJJG5hbWUg
PSBzYW5pdGl6ZUZvclVybCgkY2F0ZWdvcnkyKTsKCQkJCQkkZXhpc3RzID0gc2FmZV9maWVs
ZCgnbmFtZScsICd0eHBfY2F0ZWdvcnknLCAibmFtZSA9ICciLmRvU2xhc2goJG5hbWUpLiIn
IGFuZCB0eXBlID0gJ2FydGljbGUnIik7CgkJCQkJaWYgKCEkZXhpc3RzKQoJCQkJCXsKCQkJ
CQkJJHEgPSBzYWZlX2luc2VydCgndHhwX2NhdGVnb3J5JywgIm5hbWUgPSAnIi5kb1NsYXNo
KCRuYW1lKS4iJywgdGl0bGUgPSAnIi5kb1NsYXNoKCRjYXRlZ29yeTIpLiInLCB0eXBlID0g
J2FydGljbGUnLCBwYXJlbnQgPSAncm9vdCciKTsKCQkJCQkJcmVidWlsZF90cmVlKCdyb290
JywgMSwgJ2FydGljbGUnKTsKCQkJCQl9CgkJCQl9CgoJCQkJLy9HZXQgY3VzdG9tIGZpZWxk
CgkJCQkkY3VzdG9tX3JvdyA9IHNhZmVfcm93KCIqIiwgJ3R4cF9wcmVmcycsICJ2YWw9JyRs
aW5rZmllbGQnIik7CgkJCQlpZigkY3VzdG9tX3JvdykKCQkJCXsKCQkJCQkkbGlua2ZpZWxk
ID0gJ2N1c3RvbV8nLiRjdXN0b21fcm93Wydwb3NpdGlvbiddOwoJCQkJfQoJCQkJZWxzZQoJ
CQkJewoJCQkJCSRsaW5rZmllbGQgPSAiY3VzdG9tXzEiOwoJCQkJfQoJCQkJJHJlc3VsdCA9
IHNhZmVfaW5zZXJ0KCJ0ZXh0cGF0dGVybiIsCgkJCQkJIlRpdGxlICAgICAgICAgICA9ICci
LiRvdXRbJ3RpdGxlJ10uIicsCgkJCQkJQm9keSAgICAgICAgICAgID0gJyIuJG91dFsnYm9k
eSddLiInLAoJCQkJCUJvZHlfaHRtbCAgICAgICA9ICciLiRvdXRbJ2JvZHknXS4iJywKCQkJ
CQlFeGNlcnB0ICAgICAgICAgPSAnJywKCQkJCQlFeGNlcnB0X2h0bWwgICAgPSAnJywKCQkJ
CQlJbWFnZSAgICAgICAgICAgPSAnIi4kZmF2aWNvbi4iJywKCQkJCQlLZXl3b3JkcyAgICAg
ICAgPSAnJGtleXdvcmRzJywKCQkJCQlTdGF0dXMgICAgICAgICAgPSAgNCwKCQkJCQlQb3N0
ZWQgICAgICAgICAgPSAgJHdoZW4sCgkJCQkJTGFzdE1vZCAgICAgICAgID0gIG5vdygpLAoJ
CQkJCUF1dGhvcklEICAgICAgICA9ICcnLAoJCQkJCVNlY3Rpb24gICAgICAgICA9ICckc2Vj
dGlvbicsCgkJCQkJQ2F0ZWdvcnkxICAgICAgID0gJyRjYXRlZ29yeTEnLAoJCQkJCUNhdGVn
b3J5MiAgICAgICA9ICckY2F0ZWdvcnkyJywKCQkJCQl0ZXh0aWxlX2JvZHkgICAgPSAgMCwK
CQkJCQl0ZXh0aWxlX2V4Y2VycHQgPSAgMCwKCQkJCQlBbm5vdGF0ZSAgICAgICAgPSAgMSwK
CQkJCQlvdmVycmlkZV9mb3JtICAgPSAnJGZvcm0nLAoJCQkJCXVybF90aXRsZSAgICAgICA9
ICcnLAoJCQkJCSRsaW5rZmllbGQgCQk9ICciLiRvdXRbJ3Blcm1hbGluayddLiInLAoJCQkJ
CUFubm90YXRlSW52aXRlICA9ICdjb21tZW50cycsCgkJCQkJdWlkICAgICAgICAgICAgID0g
JyIubWQ1KHVuaXFpZChyYW5kKCksdHJ1ZSkpLiInLAoJCQkJCWZlZWRfdGltZSAgICAgICA9
ICR3aGVuIgoJCQkJKTsKCgkJCQlpZigkcmVzdWx0KQoJCQkJewoJCQkJCS8vZG9fcGluZ3Mo
KTsKCQkJCQl1cGRhdGVfbGFzdG1vZCgpOwoJCQkJCSRtZXNzYWdlIC49ICJcdEFkZGVkIC0g
Ii4kb3V0Wyd0aXRsZSddLiJcclxuIjsKCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRt
ZXNzYWdlIC49ICJcdEV4aXN0cyAtICIuJG91dFsndGl0bGUnXS4iXHJcbiI7CgkJCX0KCQl9
Cgl9CgllbHNlIHsKCQkkbWVzc2FnZSAuPSAiXHQiLiR0aGVmZWVkLT5lcnJvcjsKCX0KCXJl
dHVybiAkbWVzc2FnZTsKfQoKLy9oZWxwZXIgZnVuY3Rpb25zCi8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy9HZXQg
YW4gaW1hZ2UKZnVuY3Rpb24gcmV0dXJuSW1hZ2UgKCR0ZXh0KSB7CiAgICAkdGV4dCA9IGh0
bWxfZW50aXR5X2RlY29kZSgkdGV4dCk7CiAgICAvL2VjaG8gJHRleHQ7CiAgICAkcGF0dGVy
biA9ICIvPGltZ1tePl0rXD4vaSI7CiAgICBwcmVnX21hdGNoKCRwYXR0ZXJuLCAkdGV4dCwg
JG1hdGNoZXMpOwogICAgJHRleHQgPSAkbWF0Y2hlc1swXTsKICAgIHJldHVybiAkdGV4dDsK
fQoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLwovL0ZpbHRlciBvdXQgaW1hZ2UgdXJsIG9ubHkKZnVuY3Rpb24gc2Ny
YXBlSW1hZ2UoJHRleHQpIHsKCiAgICAkcGF0dGVybiA9ICcvc3JjPVtcJyJdPyhbXlwnIiA+
XSspW1wnIiA+XS8nOwoKcHJlZ19tYXRjaCgkcGF0dGVybiwgJHRleHQsICRsaW5rKTsKCiRs
aW5rID0gJGxpbmtbMV07CiRsaW5rID0gdXJsZW5jb2RlKCRsaW5rKTsKcmV0dXJuICRsaW5r
OwoKfQoKZnVuY3Rpb24gYmVnaW5zV2l0aCgkc3RyLCAkc3ViKSB7CiAgICByZXR1cm4gKHN0
cm5jbXAoJHN0ciwgJHN1Yiwgc3RybGVuKCRzdWIpKSA9PSAwKTsKCX0iO3M6MzoibWQ1Ijtz
OjMyOiJjMDFjZDZkZjc4ODM2MjBhZTkzYWM0M2UxODAwMjgzNiI7fQ==
