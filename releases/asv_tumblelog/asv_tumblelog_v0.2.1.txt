# asv_tumblelog v0.2.1
# Implementing the greatness of tumblelogs
# Amit Varia
# http://www.amitvaria.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjQ6Im5hbWUiO3M6MTM6ImFzdl90dW1ibGVsb2ciO3M6NzoidmVyc2lvbiI7czo1
OiIwLjIuMSI7czo2OiJhdXRob3IiO3M6MTA6IkFtaXQgVmFyaWEiO3M6MTA6ImF1dGhvcl91
cmkiO3M6MjU6Imh0dHA6Ly93d3cuYW1pdHZhcmlhLmNvbS8iO3M6MTE6ImRlc2NyaXB0aW9u
IjtzOjQwOiJJbXBsZW1lbnRpbmcgdGhlIGdyZWF0bmVzcyBvZiB0dW1ibGVsb2dzIjtzOjQ6
InR5cGUiO2k6MTtzOjQ6ImhlbHAiO3M6MzA5MjoiCTxoMT5hc3ZfdHVtYmxlbG9nPC9oMT4K
Cgk8aDI+dGhlIGJlZ2lubmluZyBvZiBhIGxpZmVzdHJlYW08L2gyPgoKCTxoMz5TdW1tYXJ5
PC9oMz4KCgk8cD5JIHVzZWQgdG8gYmUgYW4gYXZpZCB1c2VyIG9mIHNlcnZpY2VzIGxpa2Ug
PGEgaHJlZj0iaHR0cDovL3d3dy50dW1ibHIuY29tIj5UdW1ibHI8L2E+LCBidXQgZm91bmQg
bXlzZWxmIHdhbnRpbmcgbW9yZSBmcmVlZG9tIGFuZCBjb250cm9sIG92ZXIgbXkgcG9zdHMu
IFBsZWFzZSBmb2xsb3cgdGhlIHNldHVwIGluc3RydWN0aW9ucyBiZWxvdyB0byBlbnN1cmUg
dGhhdCBldmVyeXRoaW5nIGdldHMgc2V0dXAuIGFzdl90dW1ibGVsb2cgd2lsbCBpbXBvcnQg
ZmVlZHMgZm9yIHlvdSBhcyA8c3BhbiBjbGFzcz0iY2FwcyI+VFhQPC9zcGFuPiBhcnRpY2xl
cy48L3A+CgoJPGgzPlNldHVwL0luc3RhbGxhdGlvbjwvaDM+CgoJPHA+YXN2X3R1bWJsZWxv
ZyByZXF1aXJlcyA8YSBocmVmPSJodHRwOi8vd3d3LnNpbXBsZXBpZS5vcmciPlNpbXBsZVBp
ZTwvYT4sIHNvIHBsZWFzZSBncmFiIHRoZSBsYXRlc3QgdmVyc2lvbi4gQWZ0ZXIgYWN0aXZh
dGluZyB0aGUgcGx1Z2luIHlvdSB3aWxsIGhhdmUgYSBuZXcgdGFiIHVuZGVyICYjODIyMDtF
eHRlbnNpb25zJiM4MjIxOyBjYWxsZWQgJiM4MjIwO1R1bWJsZWxvZyYjODIyMTsuIEluIHRo
aXMgdGFiIHlvdSBoYXZlIGZvdXIgb3B0aW9ucyAmIzgyMTE7IFNldHRpbmdzLCBGZWVkcywg
UGFnZSBEZXNpZ24sIEZvcm0gRGVzaWduLjwvcD4KCgk8cD5PbmNlIGV2ZXJ5dGhpbmcgaXMg
c2V0dXAgeW91JiM4MjE3O2xsIG5lZWQgdG8gc2V0dXAgYSBjcm9uIGpvYiB0byBnZXQgYSBz
cGVjaWZpYyB1cmwgdG8gdXBkYXRlIHRoZSBmZWVkcy4gVGhlIHBhdGggd291bGQgYmU6IGh0
dHA6Ly93ZWJzaXRldXJsLz9hc3ZfdHVtYmxlbG9nX3VwZGF0ZWZlZWRzPTEgKG5vdGU6IHRo
aXMgaXMgbm90IHRoZSB0ZXh0cGF0dGVybiBmb2xkZXIsIGJ1dCB0aGUgdXJsIHRvIHlvdXIg
bWFpbiBzaXRlKS48L3A+CgoJPGgzPlNldHRpbmdzPC9oMz4KCgk8cD5CZWZvcmUgdXNpbmcg
YXN2X3R1bWJsZWxvZyB5b3UmIzgyMTc7bGwgbmVlZCB0byBzZXR1cCBhIGNvdXBsZSB0aGlu
Z3MuCgk8dWw+CgkJPGxpPjxzdHJvbmc+U291cmNlIExpbmsgRmllbGQ8L3N0cm9uZz4gJiM4
MjExOyBzZWxlY3QgdGhlIGN1c3RvbSBmaWVsZCB5b3Ugd291bGQgbGlrZSB0byB1c2UgdG8g
c3RvcmUgdGhlIG9yaWdpbmFsIGxpbmsgdG8gdGhlIGltcG9ydGVkIHBvc3Q8L2xpPgoJCTxs
aT48c3Ryb25nPlR1bWJsZWxvZyBTZWN0aW9uPC9zdHJvbmc+ICYjODIxMTsgdGhlIHNlY3Rp
b24gdG8gaW1wb3J0IHRoZSBmZWVkIGludG88L2xpPgoJCTxsaT48c3Ryb25nPlNpbXBsZVBp
ZSBQYXRoPC9zdHJvbmc+ICYjODIxMTsgL3RoZS9wYXRoL3RvL3lvdXIvU2ltcGxlUGllL2lu
c3RhbGw8L2xpPgoJPC91bD48L3A+CgoJPHVsPgoJCTxsaT48c3Ryb25nPlBvc3QgRm9ybTwv
c3Ryb25nPiAmIzgyMTE7IHRoZSBmb3JtIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gZmVlZHMg
dHlwZWQgYXMgcG9zdHM8L2xpPgoJCTxsaT48c3Ryb25nPlF1b3RlIEZvcm08L3N0cm9uZz4g
JiM4MjExOyB0aGUgZm9ybSB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIGZlZWRzIHR5cGVkIGFz
IHF1b3RlczwvbGk+CgkJPGxpPjxzdHJvbmc+TGluayBGb3JtPC9zdHJvbmc+ICYjODIxMTsg
dGhlIGZvcm0gdGhhdCBzaG91bGQgYmUgdXNlZCB0byBmZWVkcyB0eXBlZCBhcyBsaW5rczwv
bGk+CgkJPGxpPjxzdHJvbmc+UGhvdG8gRm9ybTwvc3Ryb25nPiAmIzgyMTE7IHRoZSBmb3Jt
IHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gZmVlZHMgdHlwZWQgYXMgcGhvdG9zPC9saT4KCTwv
dWw+CgoJPGgzPkZlZWRzPC9oMz4KCgk8cD5JbiB0aGUgJiM4MjE2O0ZlZWRzJiM4MjE3OyBz
ZWN0aW9uIHlvdSBhZGQvZWRpdC92aWV3IGFsbCB5b3VyIGZlZWRzIHlvdSBhcmUgaW1wb3J0
aW5nLiBXaGVuIGFkZGluZyBhIGZlZWQsIGZpbGwgaW4gdGhlIGluZm9ybWF0aW9uIGFuZCBj
aG9vc2UgdGhlIGFwcHJvcHJpYXRlIHR5cGUuIFlvdSBjYW4gY3JlYXRlIHlvdXIgb3duIGRl
ZmluaXRpb25zIGZvciBlYWNoIHR5cGUgc2luY2UgeW91IGNhbiBlZGl0IHRoZSBkZXNpZ24g
aW4gbGF0dGVyIHNlY3Rpb25zLjwvcD4KCgk8cD48c3Ryb25nPlRoZSBvbmUgZXhjZXB0aW9u
IGlzIHRoZSBwaG90byB0eXBlLjwvc3Ryb25nPiBJZiBhIGZlZWQgaXMgdHlwZWQgYXMgYSBw
aG90byB0aGVuIGFzdl90dW1ibGVsb2cgd2lsbCBwYXJzZSB0aGUgYm9keSBvZiBhIHBvc3Qg
YW5kIGdyYWIgdGhlIGZpcnN0IGltYWdlLCBpbXBvcnQgaXQgaW50byA8c3BhbiBjbGFzcz0i
Y2FwcyI+VFhQPC9zcGFuPiwgYW5kIG1ha2UgdGhlIGJvZHkgb2YgdGhlIGltcG9ydGVkIGFy
dGljbGUgYSByZWZlcmVuY2UgdG8gdGhlIGltcG9ydGVkIHBob3RvLjwvcD4KCgk8aDM+UGFn
ZSBEZXNpZ248L2gzPgoKCTxwPkhlcmUgeW91IGNhbiBlZGl0IHRoZSBwYWdlIHRoYXQgaXMg
YXNzb2NpYXRlZCB0byB5b3VyIHR1bWJsZWxvZyBzZWN0aW9uLjwvcD4KCgk8aDM+UGFnZSBT
dHlsZTwvaDM+CgoJPHA+SGVyZSB5b3UgY2FuIGVkaXQgdGhlIHN0eWxlIHRoYXQgaXMgYXNz
b2NpYXRlZCB0byB5b3VyIHR1bWJsZWxvZyBzZWN0aW9uLjwvcD4KCgk8aDM+Rm9ybSBEZXNp
Z248L2gzPgoKCTxwPkhlcmUgeW91IGNhbiBlZGl0IHRoZSA0IGZvcm1zIHVzZWQgZm9yIHlv
dXIgdHVtYmxlbG9nLjwvcD4KCgk8aDM+UmVjY29tbWVuZGF0aW9uczwvaDM+CgoJPHA+WW91
JiM4MjE3O2xsIGxlYXJuIHRoYXQgeW91IGhhdmUgYSBsb3Qgb2Ygcm9vbSBmb3IgZmxleGli
aWxpdHkgYW5kIGN1c3RvbWl6YXRpb24gd2l0aCBhc3ZfdHVtYmxlbG9nLiBJIHdvdWxkIHJl
Y29tbWVuZCBpbnN0YWxsaW5nIHBsdWdpbnMgbGlrZSByc3NfYXV0b19leGNlcnB0IGFuZCB0
cnVfdGFncy4gV2l0aCByc3NfYXV0b19leGNlcnB0IHlvdSBjYW4gdHJ1bmNhdGUgcG9zdHMg
YW5kIHRydV90YWdzIHdpbGwgbGV0IHlvdSBpbXBsZW1lbnQgYSB0YWdnaW5nIHNvbHV0aW9u
IHVzaW5nIHRoZSAmIzgyMTY7S2V5d29yZHMmIzgyMTc7IGZpZWxkLjwvcD4iO3M6NDoiY29k
ZSI7czoyNDMwMzoiCmlmIChAdHhwaW50ZXJmYWNlID09ICdhZG1pbicpCnsKCWFkZF9wcml2
cygnYXN2X3R1bWJsZWxvZycsJzEsMiwzLDQnKTsgLy8gQWxsb3cgb25seSB1c2VybGV2ZWxz
IDEsMiwzLDQgYWNlc3MgdG8gdGhpcyBwbHVnaW4uCglyZWdpc3Rlcl90YWIoJ2V4dGVuc2lv
bnMnLCAnYXN2X3R1bWJsZWxvZycsICJUdW1ibGVsb2ciKTsKCXJlZ2lzdGVyX2NhbGxiYWNr
KCJhc3ZfdHVtYmxlbG9nIiwgImFzdl90dW1ibGVsb2ciKTsKfQoKLy8tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBV
dGlsaXR5IEZ1bmN0aW9ucwovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl90dW1ibGVsb2dfdGl0
bGUoJGFjdGl2ZSkKewoKCSR0aXRsZXMgPSBhcnJheSgnU2V0dGluZ3MnPT4nU2V0dGluZ3Mn
LCAnRmVlZHMnPT4nRmVlZHMnLCAncGFnZS1kZXNpZ24nPT4nUGFnZSBEZXNpZ24nLCAncGFn
ZS1zdHlsZSc9PidQYWdlIFN0eWxlJywgJ0Rlc2lnbic9PidGb3JtIERlc2lnbicpOwoJJG5l
d3RpdGxlcyA9IGFycmF5KCk7Cglmb3JlYWNoKCR0aXRsZXMgYXMgJGtleT0+JHRpdGxlKQoJ
ewoJCWlmKCR0aXRsZSE9JGFjdGl2ZSkKCQl7CgkJCSR0aXRsZT0nPGEgaHJlZj0iaW5kZXgu
cGhwP2V2ZW50PWFzdl90dW1ibGVsb2cmc3RlcD0nLiRrZXkuJyI+Jy4kdGl0bGUuJzwvYT4n
OwoJCX0KCQlhcnJheV9wdXNoKCRuZXd0aXRsZXMsICR0aXRsZSk7Cgl9CgoJcmV0dXJuIHRh
Zyhqb2luKCRuZXd0aXRsZXMsICIgfCAiKSwgJ2gxJywgJyBzdHlsZT0idGV4dC1hbGlnbjog
Y2VudGVyOyInKTsKfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl9zZWN0aW9uX3BvcHVwKCRT
ZWN0aW9uLCAkaWQpCnsKCSRycyA9IHNhZmVfY29sdW1uKCduYW1lJywgJ3R4cF9zZWN0aW9u
JywgIm5hbWUgIT0gJ2RlZmF1bHQnIik7CgoJaWYgKCRycykKCXsKCQlyZXR1cm4gc2VsZWN0
SW5wdXQoJ3R1bWJsZWxvZ3NlY3Rpb24nLCAkcnMsICRTZWN0aW9uLCBmYWxzZSwgJycsICRp
ZCk7Cgl9CgoJcmV0dXJuIGZhbHNlOwp9Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gYXN2X2N1c3Rv
bV9wb3B1cCgkQ3VzdG9tLCAkaWQpCnsKCSRycyA9IHNhZmVfY29sdW1uKCd2YWwnLCAndHhw
X3ByZWZzJywgIm5hbWUgTElLRSAnY3VzdG9tXyVfc2V0JyIpOwoKCWlmICgkcnMpCgl7CgkJ
cmV0dXJuIHNlbGVjdElucHV0KCdzb3VyY2VsaW5rJywgJHJzLCAkQ3VzdG9tLCBmYWxzZSwg
JycsICRpZCk7Cgl9CgoJcmV0dXJuIGZhbHNlOwp9Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gYXN2
X2Zvcm1fcG9wdXAoJEN1c3RvbSwgJGlkLCAkbmFtZT0iIikKewoJJHJzID0gc2FmZV9jb2x1
bW4oJ25hbWUnLCAndHhwX2Zvcm0nLCAidHlwZT0nYXJ0aWNsZSciKTsKCglpZiAoJHJzKQoJ
ewoJCXJldHVybiBzZWxlY3RJbnB1dCgkaWQsICRycywgJEN1c3RvbSwgZmFsc2UsICcnLCAk
aWQpOwoJfQoKCXJldHVybiBmYWxzZTsKfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl9jYXRf
cG9wdXAoJEN1c3RvbSwgJGlkLCAkbmFtZT0iIikKewoJJHJzID0gZ2V0VHJlZSgncm9vdCcs
ICdhcnRpY2xlJyk7CgoJaWYgKCRycykKCXsKCQlyZXR1cm4gdHJlZVNlbGVjdElucHV0KCRu
YW1lLCRycywkQ3VzdG9tLCAkaWQpOwoJfQoKCXJldHVybiBmYWxzZTsKfQovLy0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
ZnVuY3Rpb24gZ2V0X2Fzdl90dW1ibGVsb2dfcHJlZnMoKQp7Cgkkb3V0ID0gYXJyYXkoKTsK
CSRyID0gc2FmZV9yb3dzX3N0YXJ0KCduYW1lLCB2YWwnLCAndHhwX3ByZWZzJywgImV2ZW50
PSdhc3ZfdHVtYmxlbG8nIik7CglpZiAoJHIpIHsKCQl3aGlsZSAoJGEgPSBuZXh0Um93KCRy
KSkgewoJCQkkb3V0WyRhWyduYW1lJ11dID0gJGFbJ3ZhbCddOwoJCX0KCgkJcmV0dXJuIGxB
dHRzKGFycmF5KAoJCQknc291cmNlbGluaycJPT4gJycsCgkJCSd0dW1ibGVsb2dzZWN0aW9u
JyA9PiAnJywKCQkJJ3NpbXBsZXBpZScgPT4gJycsCgkJCSdwb3N0Zm9ybScJPT4gJycsCgkJ
CSdxdW90ZWZvcm0nCT0+ICcnLAoJCQkncGhvdG9mb3JtJwk9PiAnJywKCQkJJ2xpbmtmb3Jt
JyAJPT4gJycsCgkJCSdyc3NmZWVkcGFnZScgPT4gJycsCgkJCSksJG91dCk7CgoJfQoJcmV0
dXJuIGZhbHNlOwp9Ci8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gYXN2X3R1bWJsZWxvZ19saXN0X211
bHRpZWRpdF9mb3JtKCkKewoJJG1ldGhvZHMgPSBhcnJheSgKCQknZGVsZXRlJyAgICAgICAg
ICA9PiBnVHh0KCdkZWxldGUnKSwKCSk7CgoJcmV0dXJuIGV2ZW50X211bHRpZWRpdF9mb3Jt
KCdsaXN0JywgJG1ldGhvZHMsICcnLCcnLCcnLCcnLCcnKTsKfQovLy0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0
aW9uIGFzdl90dW1ibGVsb2dfdmVyaWZ5RmVlZCgkZmVlZCwgJHNpbXBsZXBpZSkKewoJLy9H
ZXQgU2ltcGxlUGllCglyZXF1aXJlX29uY2UoJHNpbXBsZXBpZSk7CgoJLy9DcmVhdGUgYW5k
IHNldHVwIFNpbXBsZVBpZSBJbnN0YW5jZQoJJHRoZWZlZWQgPSBuZXcgU2ltcGxlUGllKCk7
CgkkdGhlZmVlZC0+c2V0X2ZlZWRfdXJsKCRmZWVkKTsKCSR0aGVmZWVkLT5lbmFibGVfY2Fj
aGUoZmFsc2UpOwoJJHRoZWZlZWQtPmhhbmRsZV9jb250ZW50X3R5cGUoKTsKCgkvL0dldCB0
aGUgZmVlZAoJJHN1Y2Nlc3MgPSAkdGhlZmVlZC0+aW5pdCgpOwoKCXJldHVybiAoJHN1Y2Nl
c3MpPyAkdGhlZmVlZC0+Z2V0X3RpdGxlKCk6ICBmYWxzZTsKCn0KCi8vLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVu
Y3Rpb24gYXN2X3R1bWJsZWxvZ192ZXJpZnlUYWJsZSgpCnsKCWlmKHNhZmVfcXVlcnkoIlNI
T1cgVEFCTEVTIExJS0UgJyIuc2FmZV9wZngoJ2Fzdl90dW1ibGVsb2dfZmVlZHMnKS4iJyIp
KQoJewoJCSR2ZXJzaW9uID0gbXlzcWxfZ2V0X3NlcnZlcl9pbmZvKCk7CgkJLy9Vc2UgIkVO
R0lORSIgaWYgdmVyc2lvbiBvZiBNeVNRTCA+ICg0LjAuMTggb3IgNC4xLjIpCgkJJHRhYmxl
dHlwZSA9ICggaW50dmFsKCR2ZXJzaW9uWzBdKSA+PSA1IHx8IHByZWdfbWF0Y2goJyNeNFwu
KDBcLlsyLTldfCgxWzg5XSkpfCgxXC5bMi05XSkjJywkdmVyc2lvbikpCgkJCQkJCT8gIiBF
TkdJTkU9TXlJU0FNICIKCQkJCQkJOiAiIFRZUEU9TXlJU0FNICI7CgkJJHJlc3VsdCA9IHNh
ZmVfcXVlcnkoIkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGAiLlBGWC4iYXN2X3R1bWJs
ZWxvZ19mZWVkc2AoCgkJCWBJRGAgaW50KDExKSBOT1QgTlVMTCBhdXRvX2luY3JlbWVudCwK
CQkJYFRpdGxlYCB2YXJjaGFyKDI1NSkgTk9UIE5VTEwgZGVmYXVsdCAnJywKCQkJYEZlZWRg
IHZhcmNoYXIoMjU1KSBOT1QgTlVMTCBkZWZhdWx0ICcnLAoJCQlgQW5ub3RhdGVgIGludCgy
KSBOT1QgTlVMTCBkZWZhdWx0ICcwJywKCQkJYFR5cGVgIHZhcmNoYXIoMTI4KSBOT1QgTlVM
TCBkZWZhdWx0ICcnLAoJCQlgQ2F0ZWdvcnkxYCB2YXJjaGFyKDEyOCkgTk9UIE5VTEwgZGVm
YXVsdCAnJywKCQkJYENhdGVnb3J5MmAgdmFyY2hhcigxMjgpIE5PVCBOVUxMIGRlZmF1bHQg
JycsCgkJCWBLZXl3b3Jkc2AgdmFyY2hhcigyNTUpIE5PVCBOVUxMIGRlZmF1bHQgJycsCgkJ
CSBQUklNQVJZIEtFWSAgKGBJRGApCgkJCSApICR0YWJsZXR5cGUgUEFDS19LRVlTPTEgQVVU
T19JTkNSRU1FTlQ9MiAiKTsKCX0KfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpmdW5jdGlvbiBhc3ZfdHVtYmxl
bG9nX2ZlZWRzX2xpc3QoJGF0dHMsJHRoaW5nKQp7Cn0KCmZ1bmN0aW9uIGFzdl90dW1ibGVs
b2coJGV2ZW50LCAkc3RlcCkKewoJJHN0ZXA9KCRzdGVwPT0nJyk/J1NldHRpbmdzJzokc3Rl
cDsKCglzd2l0Y2goJHN0ZXApCgl7CgkJY2FzZSAnU2V0dGluZ3MnOgoJCQlhc3ZfdHVtYmxl
bG9nX3NldHRpbmdzKCRzdGVwKTsKCQkJYnJlYWs7CgkJY2FzZSAnRmVlZHMnOgoJCQlhc3Zf
dHVtYmxlbG9nX2ZlZWRzKCRzdGVwKTsKCQkJYnJlYWs7CgkJY2FzZSAnRGVzaWduJzoKCQkJ
YXN2X3R1bWJsZWxvZ19kZXNpZ24oJHN0ZXApOwoJCQlicmVhazsKCQljYXNlICdwYWdlLWRl
c2lnbic6CgkJCWFzdl90dW1ibGVsb2dfcGFnZWRlc2lnbigkc3RlcCk7CgkJCWJyZWFrOwoJ
CWNhc2UgJ3BhZ2Utc3R5bGUnOgoJCQlhc3ZfdHVtYmxlbG9nX3BhZ2VzdHlsZSgkc3RlcCk7
CgkJCWJyZWFrOwoJfQp9CgpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX3BhZ2VzdHlsZSgkc3Rl
cCkKewoKCWV4dHJhY3QoZG9TbGFzaChnZXRfYXN2X3R1bWJsZWxvZ19wcmVmcygpKSk7CgoJ
JG1lc3NhZ2UgPSAnJzsKCWlmKGdwcygnYWN0aW9uJyk9PSdzYXZlJyAmJiBncHMoJ3N0eWxl
LW5hbWUnKSkKCXsKCQkkZm9ybSA9IGRvU2xhc2goYmFzZTY0X2VuY29kZShncHMoJ2Zvcm0n
KSkpOwoJCSRycyA9IHNhZmVfdXBkYXRlKCJ0eHBfY3NzIiwgImNzcz0nIi4kZm9ybSAuIici
LCAibmFtZSA9ICciLmRvU2xhc2goZ3BzKCdzdHlsZS1uYW1lJykpLiInIik7CgkJJG1lc3Nh
Z2UgPSAnU3R5bGUgc2F2ZWQnOwoJfQoKCXBhZ2V0b3AoJ1R1bWJsZWxvZycsICRtZXNzYWdl
KTsKCgllY2hvIGFzdl90dW1ibGVsb2dfdGl0bGUoJHN0ZXApOwoKCSRycyA9IHNhZmVfcm93
KCJjc3MiLCAndHhwX3NlY3Rpb24nLCAibmFtZSA9ICckdHVtYmxlbG9nc2VjdGlvbiciKTsK
CWlmKCRycykKCXsKCQkkcGFnZV9ycyA9IHNhZmVfcm93KCcqJywgJ3R4cF9jc3MnLCAibmFt
ZT0nIi4kcnNbJ2NzcyddLiInIik7CgkJaWYoJHBhZ2VfcnMpCgkJewoJCQlleHRyYWN0KCRw
YWdlX3JzKTsKCQkJJHRoZWNzcyA9IGJhc2U2NF9kZWNvZGUoJGNzcyk7CgkJfQoJfQoKCgll
Y2hvIG4uc3RhcnRUYWJsZSgnbGlzdCcsICcnLCAnJywgJycsICcnKS4KCQluLic8Zm9ybSBu
YW1lPSJwb3N0LWZvcm0iIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJpbmRleC5waHAiPicuCgkJ
bi5oSW5wdXQoJ2V2ZW50JywgJ2Fzdl90dW1ibGVsb2cnKS4KCQluLmhJbnB1dCgnc3RlcCcs
ICdwYWdlLXN0eWxlJykuCgkJbi5oSW5wdXQoJ2FjdGlvbicsICdzYXZlJykuCgkJbi5oSW5w
dXQoJ3N0eWxlLW5hbWUnLCAkbmFtZSkuCgkJdHIodGRhKCJFZGl0IHRoZSBzdHlsZSB0aGF0
IGhhbmRsZXMgdGhlIHR1bWJsZWxvZyBzZWN0aW9uIDxiPiIuJG5hbWUuIjwvYj4uIiwgJyBz
dHlsZT0idGV4dC1hbGlnbjpjZW50ZXIiJykpLgoJCXRyKHRkKHRleHRfYXJlYSgnZm9ybScs
ICc4MDAnLCAnNjAwJywgKCR0aGVjc3MpPyR0aGVjc3M6JycpKSkuCgkJdHIodGRhKGZJbnB1
dCgnc3VibWl0Jywnc2F2ZV9zZXR0aW5ncycsJ3NhdmUnLCJwdWJsaXNoIiwgJycsICcnLCAn
JywgNCksICcgc3R5bGU9InRleHQtYWxpZ246cmlnaHQiJykpLic8L2Zvcm0+Jy4KCWVuZFRh
YmxlKCk7Cn0KCmZ1bmN0aW9uIGFzdl90dW1ibGVsb2dfcGFnZWRlc2lnbigkc3RlcCkKewoK
CWV4dHJhY3QoZG9TbGFzaChnZXRfYXN2X3R1bWJsZWxvZ19wcmVmcygpKSk7CgoJJG1lc3Nh
Z2UgPSAnJzsKCWlmKGdwcygnYWN0aW9uJyk9PSdzYXZlJyAmJiBncHMoJ3BhZ2UtbmFtZScp
KQoJewoJCSRycyA9IHNhZmVfdXBkYXRlKCJ0eHBfcGFnZSIsICJ1c2VyX2h0bWw9JyIuZG9T
bGFzaChncHMoJ2Zvcm0nKSkuIiciLCAibmFtZSA9ICciLmRvU2xhc2goZ3BzKCdwYWdlLW5h
bWUnKSkuIiciKTsKCQkkbWVzc2FnZSA9ICdQYWdlIHNhdmVkJzsKCX0KCglwYWdldG9wKCdU
dW1ibGVsb2cnLCAkbWVzc2FnZSk7CgoJZWNobyBhc3ZfdHVtYmxlbG9nX3RpdGxlKCRzdGVw
KTsKCgkkcnMgPSBzYWZlX3JvdygicGFnZSIsICd0eHBfc2VjdGlvbicsICJuYW1lID0gJyR0
dW1ibGVsb2dzZWN0aW9uJyIpOwoJaWYoJHJzKQoJewoJCSRwYWdlX3JzID0gc2FmZV9yb3co
JyonLCAndHhwX3BhZ2UnLCAibmFtZT0nIi4kcnNbJ3BhZ2UnXS4iJyIpOwoJCWlmKCRwYWdl
X3JzKQoJCXsKCQkJZXh0cmFjdCgkcGFnZV9ycyk7CgkJfQoJfQoKCgllY2hvIG4uc3RhcnRU
YWJsZSgnbGlzdCcsICcnLCAnJywgJycsICcnKS4KCQluLic8Zm9ybSBuYW1lPSJwb3N0LWZv
cm0iIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJpbmRleC5waHAiPicuCgkJbi5oSW5wdXQoJ2V2
ZW50JywgJ2Fzdl90dW1ibGVsb2cnKS4KCQluLmhJbnB1dCgnc3RlcCcsICdwYWdlLWRlc2ln
bicpLgoJCW4uaElucHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4uaElucHV0KCdwYWdlLW5h
bWUnLCAkbmFtZSkuCgkJdHIodGRhKCJFZGl0IHRoZSBwYWdlIHRoYXQgaGFuZGxlcyB0aGUg
dHVtYmxlbG9nIHNlY3Rpb24gPGI+Ii4kbmFtZS4iPC9iPi4iLCAnIHN0eWxlPSJ0ZXh0LWFs
aWduOmNlbnRlciInKSkuCgkJdHIodGQodGV4dF9hcmVhKCdmb3JtJywgJzgwMCcsICc2MDAn
LCAoJHVzZXJfaHRtbCk/JHVzZXJfaHRtbDonJykpKS4KCQl0cih0ZGEoZklucHV0KCdzdWJt
aXQnLCdzYXZlX3NldHRpbmdzJywnc2F2ZScsInB1Ymxpc2giLCAnJywgJycsICcnLCA0KSwg
JyBzdHlsZT0idGV4dC1hbGlnbjpyaWdodCInKSkuJzwvZm9ybT4nLgoJZW5kVGFibGUoKTsK
fQpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX2Rlc2lnbigkc3RlcCkKewoKCWV4dHJhY3QoZG9T
bGFzaChnZXRfYXN2X3R1bWJsZWxvZ19wcmVmcygpKSk7CgoKCWlmKGdwcygnYWN0aW9uJyk9
PSdzYXZlJykKCXsKCQlzd2l0Y2goZ3BzKCdtZXRob2QnKSkKCQl7CgkJCWNhc2UgInBvc3Qi
OgoJCQkJJHJzID0gc2FmZV91cGRhdGUoInR4cF9mb3JtIiwgIkZvcm09JyIuZ3BzKCdmb3Jt
JykuIiciLCAibmFtZSA9ICckcG9zdGZvcm0nIEFORCB0eXBlPSdhcnRpY2xlJyIpOwoJCQkJ
YnJlYWs7CgkJCWNhc2UgInF1b3RlIjoKCQkJCSRycyA9IHNhZmVfdXBkYXRlKCJ0eHBfZm9y
bSIsICJGb3JtPSciLmdwcygnZm9ybScpLiInIiwgIm5hbWUgPSAnJHF1b3RlZm9ybScgQU5E
IHR5cGU9J2FydGljbGUnIik7CgkJCQlicmVhazsKCQkJY2FzZSAibGluayI6CgkJCQkkcnMg
PSBzYWZlX3VwZGF0ZSgidHhwX2Zvcm0iLCAiRm9ybT0nIi5ncHMoJ2Zvcm0nKS4iJyIsICJu
YW1lID0gJyRsaW5rZm9ybScgQU5EIHR5cGU9J2FydGljbGUnIik7CgkJCQlicmVhazsKCQkJ
Y2FzZSAicGhvdG8iOgoJCQkJJHJzID0gc2FmZV91cGRhdGUoInR4cF9mb3JtIiwgIkZvcm09
JyIuZ3BzKCdmb3JtJykuIiciLCAibmFtZSA9ICckcGhvdG9mb3JtJyBBTkQgdHlwZT0nYXJ0
aWNsZSciKTsKCQkJCWJyZWFrOwoJCX0KCgl9CgoJcGFnZXRvcCgnVHVtYmxlbG9nJywgKGdw
cygnc2F2ZScpKT8gJ0Zvcm0gc2F2ZWQnOicnKTsKCgllY2hvIGFzdl90dW1ibGVsb2dfdGl0
bGUoJHN0ZXApOwoKCSRmb3JtcyA9IGFycmF5KCdwb3N0Jz0+JHBvc3Rmb3JtLCAncXVvdGUn
PT4kcXVvdGVmb3JtLCAnbGluayc9PiRsaW5rZm9ybSwgJ3Bob3RvJz0+JHBob3RvZm9ybSk7
CgkkZWRpdGZvcm1zID0gYXJyYXkoKTsKCSRmb3JtbmFtZXMgPSBhcnJheSgpOwoKCWZvcmVh
Y2goJGZvcm1zIGFzICR0eXBlPT4kZm9ybSkKCXsKCQkkcnMgPSBzYWZlX3JvdygiKiIsICd0
eHBfZm9ybScsICJuYW1lID0gJyRmb3JtJyBBTkQgdHlwZT0nYXJ0aWNsZSciKTsKCgkJaWYo
JHJzKQoJCXsKCQkJJGVkaXRmb3Jtc1skdHlwZV0gPSAkcnNbJ0Zvcm0nXTsKCQkJJGZvcm1u
YW1lc1skdHlwZV0gPSAkcnNbJ25hbWUnXTsKCQl9Cgl9CgoJZWNobyBuLnN0YXJ0VGFibGUo
J2xpc3QnLCAnJywgJycsICcnLCAnJykuCgoJCW4uJzxmb3JtIG5hbWU9InBvc3QtZm9ybSIg
bWV0aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBocCI+Jy4KCQluLmhJbnB1dCgnZXZlbnQn
LCAnYXN2X3R1bWJsZWxvZycpLgoJCW4uaElucHV0KCdzdGVwJywgJ0Rlc2lnbicpLgoJCW4u
aElucHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4uaElucHV0KCdtZXRob2QnLCAncG9zdCcp
LgoJCXRyKHRkYSgiRWRpdCB0aGUgZm9ybSB0aGF0IGhhbmRsZXMgPGI+cG9zdHMgKCIuJGZv
cm1uYW1lc1sncG9zdCddLiIpPC9iPi4iLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciIn
KSkuCgkJdHIodGQodGV4dF9hcmVhKCdmb3JtJywgJzE1MCcsICc1MDAnLCAkZWRpdGZvcm1z
Wydwb3N0J10pKSkuCgkJdHIodGRhKGZJbnB1dCgnc3VibWl0Jywnc2F2ZV9zZXR0aW5ncycs
J3NhdmUnLCJwdWJsaXNoIiwgJycsICcnLCAnJywgNCksICcgc3R5bGU9InRleHQtYWxpZ246
cmlnaHQiJykpLic8L2Zvcm0+Jy4KCgkJbi4nPGZvcm0gbmFtZT0icXVvdGUtZm9ybSIgbWV0
aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBocCI+Jy4KCQluLmhJbnB1dCgnZXZlbnQnLCAn
YXN2X3R1bWJsZWxvZycpLgoJCW4uaElucHV0KCdzdGVwJywgJ0Rlc2lnbicpLgoJCW4uaElu
cHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4uaElucHV0KCdtZXRob2QnLCAncXVvdGUnKS4K
CQl0cih0ZGEoJ0VkaXQgdGhlIGZvcm0gdGhhdCBoYW5kbGVzIDxiPnF1b3RlcyAoJy4kZm9y
bW5hbWVzWydxdW90ZSddLicpPC9iPi4nLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciIn
KSkuCgkJdHIodGQodGV4dF9hcmVhKCdmb3JtJywgJzE1MCcsICc1MDAnLCAkZWRpdGZvcm1z
WydxdW90ZSddKSkpLgoJCXRyKHRkYShmSW5wdXQoJ3N1Ym1pdCcsJ3NhdmVfc2V0dGluZ3Mn
LCdzYXZlJywicHVibGlzaCIsICcnLCAnJywgJycsIDQpLCAnIHN0eWxlPSJ0ZXh0LWFsaWdu
OnJpZ2h0IicpKS4nPC9mb3JtPicuCgoJCW4uJzxmb3JtIG5hbWU9ImxpbmstZm9ybSIgbWV0
aG9kPSJwb3N0IiBhY3Rpb249ImluZGV4LnBocCI+Jy4KCQluLmhJbnB1dCgnZXZlbnQnLCAn
YXN2X3R1bWJsZWxvZycpLgoJCW4uaElucHV0KCdzdGVwJywgJ0Rlc2lnbicpLgoJCW4uaElu
cHV0KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4uaElucHV0KCdtZXRob2QnLCAnbGluaycpLgoJ
CXRyKHRkYSgnRWRpdCB0aGUgZm9ybSB0aGF0IGhhbmRsZXMgPGI+bGlua3MgKCcuJGZvcm1u
YW1lc1snbGluayddLicpPC9iPi4nLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciInKSku
CgkJdHIodGQodGV4dF9hcmVhKCdmb3JtJywgJzE1MCcsICc1MDAnLCAkZWRpdGZvcm1zWyds
aW5rJ10pKSkuCgkJdHIodGRhKGZJbnB1dCgnc3VibWl0Jywnc2F2ZV9zZXR0aW5ncycsJ3Nh
dmUnLCJwdWJsaXNoIiwgJycsICcnLCAnJywgNCksICcgc3R5bGU9InRleHQtYWxpZ246cmln
aHQiJykpLic8L2Zvcm0+Jy4KCgkJbi4nPGZvcm0gbmFtZT0icGhvdG8tZm9ybSIgbWV0aG9k
PSJwb3N0IiBhY3Rpb249ImluZGV4LnBocCI+Jy4KCQluLmhJbnB1dCgnZXZlbnQnLCAnYXN2
X3R1bWJsZWxvZycpLgoJCW4uaElucHV0KCdzdGVwJywgJ0Rlc2lnbicpLgoJCW4uaElucHV0
KCdhY3Rpb24nLCAnc2F2ZScpLgoJCW4uaElucHV0KCdtZXRob2QnLCAncGhvdG8nKS4KCQl0
cih0ZGEoJ0VkaXQgdGhlIGZvcm0gdGhhdCBoYW5kbGVzIDxiPnBob3RvcyAoJy4kZm9ybW5h
bWVzWydwaG90byddLicpPC9iPi4nLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciInKSku
CgkJdHIodGQodGV4dF9hcmVhKCdmb3JtJywgJzE1MCcsICc1MDAnLCAkZWRpdGZvcm1zWydw
aG90byddKSkpLgoJCXRyKHRkYShmSW5wdXQoJ3N1Ym1pdCcsJ3NhdmVfc2V0dGluZ3MnLCdz
YXZlJywicHVibGlzaCIsICcnLCAnJywgJycsIDQpLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOnJp
Z2h0IicpKS4nPC9mb3JtPicuCgoJZW5kVGFibGUoKTsKfQoKZnVuY3Rpb24gYXN2X3R1bWJs
ZWxvZ19mZWVkcygkc3RlcCkKewoJYXN2X3R1bWJsZWxvZ192ZXJpZnlUYWJsZSgpOwoKCSR0
eXBlcyA9IGFycmF5KCdwb3N0Jz0+J3Bvc3QnLCAncXVvdGUnPT4ncXVvdGUnLCAncGhvdG8n
PT4ncGhvdG8nLCAnbGluayc9PidsaW5rJyk7CgoJJG1lc3NhZ2UgPSAnJzsKCglleHRyYWN0
KGRvU2xhc2gobEF0dHMoYXJyYXkoCgkJJ3Jzc3BhdGgnID0+ICcnLAoJCSd0eXBlJwk9PiAn
JywKCQknY29tbWVudHMnID0+ICcnLAoJCSdjYXRlZ29yeTEnID0+JycsCgkJJ2NhdGVnb3J5
MicgPT4gJycsCgkJJ2tleXdvcmRzJwk9PicnLAoJCSdJRCcgPT4nJywKCQkpLAoJCWdwc2Eo
YXJyYXkoCgkJCSdyc3NwYXRoJywKCQkJJ3R5cGUnLAoJCQknY29tbWVudHMnLAoJCQknY2F0
ZWdvcnkxJywKCQkJJ2NhdGVnb3J5MicsCgkJCSdrZXl3b3JkcycsCgkJCSdJRCcKCQkJKSkp
KSk7CgoJZXh0cmFjdChnZXRfYXN2X3R1bWJsZWxvZ19wcmVmcygpKTsKCglpZihncHMoJ3Nh
dmVfZmVlZHMnKSkKCXsKCQlpZihpbl9hcnJheSgkdHlwZSwkdHlwZXMpKQoJCXsKCQkJaWYo
JHRpdGxlID0gYXN2X3R1bWJsZWxvZ192ZXJpZnlGZWVkKCRyc3NwYXRoLCAkc2ltcGxlcGll
KSkKCQkJewoJCQkJJHRpdGxlID0gZG9TbGFzaCgkdGl0bGUpOwoJCQkJaWYoJElEKQoJCQkJ
ewoJCQkJCXNhZmVfdXBkYXRlKCdhc3ZfdHVtYmxlbG9nX2ZlZWRzJywKCQkJCQkJIkZlZWQg
PSAnJHJzc3BhdGgnLAoJCQkJCQlUaXRsZSA9ICckdGl0bGUnLAoJCQkJCQlUeXBlID0gJyR0
eXBlJywKCQkJCQkJQ2F0ZWdvcnkxID0gJyRjYXRlZ29yeTEnLAoJCQkJCQlDYXRlZ29yeTIg
PSAnJGNhdGVnb3J5MicsCgkJCQkJCUtleXdvcmRzID0gJyRrZXl3b3JkcycsCgkJCQkJCUFu
bm90YXRlID0gJyRjb21tZW50cyciLAoJCQkJCQkiSUQgPSAkSUQiCgkJCQkJCSk7CgkJCQl9
CgkJCQllbHNlCgkJCQl7CgkJCQkJc2FmZV9pbnNlcnQoJ2Fzdl90dW1ibGVsb2dfZmVlZHMn
LAoJCQkJCQkiRmVlZCA9ICckcnNzcGF0aCcsCgkJCQkJCVRpdGxlID0gJyR0aXRsZScsCgkJ
CQkJCVR5cGUgPSAnJHR5cGUnLAoJCQkJCQlDYXRlZ29yeTEgPSAnJGNhdGVnb3J5MScsCgkJ
CQkJCUNhdGVnb3J5MiA9ICckY2F0ZWdvcnkyJywKCQkJCQkJS2V5d29yZHMgPSAnJGtleXdv
cmRzJywKCQkJCQkJQW5ub3RhdGUgPSAnJGNvbW1lbnRzJyIKCQkJCQkJKTsKCQkJCX0KCQkJ
fQoJCQllbHNlCgkJCXsKCQkJCSRtZXNzYWdlID0gIk5vdCBhIHZhbGlkIGZlZWQuIjsKCQkJ
fQoJCX0KCQllbHNlCgkJewoJCQkkbWVzc2FnZSA9ICJUeXBlIGlzIHJlcXVpcmVkLiAgLSAk
dHlwZSAtIjsKCQl9Cgl9CglpZihncHMoJ2FjdGlvbicpPT0nZGVsZXRlJykKCXsKCQkkc2Vs
ZWN0ZWQgPSBwcygnc2VsZWN0ZWQnKTsKCQlpZiAoJHNlbGVjdGVkKQoJCXsKCQkJJGlkcyA9
IGFycmF5KCk7CgkJCWZvcmVhY2ggKCRzZWxlY3RlZCBhcyAkaWQpCgkJCXsKCQkJCSRpZCA9
IGFzc2VydF9pbnQoJGlkKTsKCQkJCWlmIChzYWZlX2RlbGV0ZSgnYXN2X3R1bWJsZWxvZ19m
ZWVkcycsICJJRCA9ICRpZCIpKQoJCQkJewoJCQkJCSRpZHNbXSA9ICRpZDsKCQkJCX0KCQkJ
fQoJCQkkY2hhbmdlZCA9IGpvaW4oJywgJywgJGlkcyk7CgkJCSRtZXNzYWdlID0gIlJlbW92
ZWQgJGNoYW5nZWQiOwoJCX0KCX0KCglwYWdldG9wKCdUdW1ibGVsb2cnLCAkbWVzc2FnZSk7
CgoJZWNobyBuLm4uJzxmb3JtIG5hbWU9InR1bWJsZWxvZy1hZG1pbiIgbWV0aG9kPSJwb3N0
IiBhY3Rpb249ImluZGV4LnBocD9ldmVudD1hc3ZfdHVtYmxlbG9nJnN0ZXA9RmVlZHMiPicu
CgloSW5wdXQoJ3N0ZXAnLCAnRmVlZHMnKS4KCWhJbnB1dCgnSUQnLCAkSUQpOwoKCWVjaG8g
YXN2X3R1bWJsZWxvZ190aXRsZSgkc3RlcCkuCgoJCXRhZygnPGEgaHJlZj0iaW5kZXgucGhw
P2V2ZW50PWFzdl90dW1ibGVsb2cmc3RlcD1GZWVkcyI+QWRkIE5ldyBGZWVkPC9hPicgLCdo
MycsICcgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsiJykuCgoJCXN0YXJ0VGFibGUoJ2xp
c3QnKS4KCgkJCXRyKHRkKCdBdG9tL1JTUyBQYXRoJykudGQoZklucHV0KCd0ZXh0JywgJ3Jz
c3BhdGgnLCAkcnNzcGF0aCkpKS4KCgkJCXRyKHRkKCdUeXBlJykudGQoc2VsZWN0SW5wdXQo
J3R5cGUnLCAkdHlwZXMsICR0eXBlLCAwKSkpLgoKCQkJdHIodGQoJ0NvbW1lbnRzJykudGQo
b25vZmZSYWRpbygnY29tbWVudHMnLCAoJGNvbW1lbnRzKT8kY29tbWVudHM6IjEiKSkpLgoK
CQkJdHIodGQoJ0NhdGVnb3J5MScpLnRkKGFzdl9jYXRfcG9wdXAoJGNhdGVnb3J5MSwgJ2Nh
dGVnb3J5MScpKSkuCgoJCQl0cih0ZCgnQ2F0ZWdvcnkyJykudGQoYXN2X2NhdF9wb3B1cCgk
Y2F0ZWdvcnkyLCAnY2F0ZWdvcnkyJykpKS4KCgkJCXRyKHRkKCdLZXl3b3JkcycpLnRkKGZJ
bnB1dCgndGV4dCcsICdrZXl3b3JkcycsICRrZXl3b3JkcykpKS4KCgkJCXRyKHRkYShmSW5w
dXQoJ3N1Ym1pdCcsJ3NhdmVfZmVlZHMnLCAoJElEKT8nc2F2ZSc6J2FkZCcsInB1Ymxpc2gi
LCAnJywgJycsICcnLCA0KSwgJyBjb2xzcGFuPTInKSkuCgoJCWVuZFRhYmxlKCkuJzwvZm9y
bT4nOwoJZWNobyB0YWcoIkN1cnJlbnQgRmVlZHMiLCAiaDMiLCAnIHN0eWxlPSJ0ZXh0LWFs
aWduOmNlbnRlciInKS4KCQknPGZvcm0gbmFtZT0ibG9uZ2Zvcm0iIG1ldGhvZD0icG9zdCIg
YWN0aW9uPSJpbmRleC5waHA/ZXZlbnQ9YXN2X3R1bWJsZWxvZyZzdGVwPUZlZWRzIj4nLgoJ
CWhJbnB1dCgnZXZlbnQnLCAnYXN2X3R1bWJsZWxvZycpLgoJCWhJbnB1dCgnc3RlcCcsICdG
ZWVkcycpLgoJCWhJbnB1dCgnYWN0aW9uJywgJ2RlbGV0ZScpLgoKCQluLnN0YXJ0VGFibGUo
J2xpc3QnLCAnJywgJycsICcnLCAnOTAlJykuCgkJbi50cigKCQkJbi5jb2x1bW5faGVhZCgn
SUQnLCAnaWQnLCAnbGlzdCcsIHRydWUsICcnLCAnJywgJycpLgoJCQluLmNvbHVtbl9oZWFk
KCdUaXRsZScsICd0aXRsZScsICdsaXN0JywgdHJ1ZSwgJycsICcnLCAnJykuCgkJCW4uY29s
dW1uX2hlYWQoJ0ZlZWQnLCAnZmVlZCcsICdsaXN0JywgdHJ1ZSwgJycsICcnLCAnJykuCgkJ
CW4uY29sdW1uX2hlYWQoJ1R5cGUnLCAndHlwZScsICdsaXN0JywgdHJ1ZSwgJycsICcnLCAn
JykuCgkJCW4uY29sdW1uX2hlYWQoJ0NvbW1lbnRzJywgJ2NvbW1lbnRzJywgJ2xpc3QnLCB0
cnVlLCAnJywgJycsICcnKS4KCQkJbi5jb2x1bW5faGVhZCgnQ2F0ZWdvcnkxJywgJ2NhdGVn
b3J5MScsICdsaXN0JywgdHJ1ZSwgJycsICcnLCAnJykuCgkJCW4uY29sdW1uX2hlYWQoJ0Nh
dGVnb3J5MicsICdjYXRlZ29yeTEnLCAnbGlzdCcsIHRydWUsICcnLCAnJywgJycpLgoJCQlu
LmNvbHVtbl9oZWFkKCdLZXl3b3JkcycsICdLZXl3b3JkcycsICdsaXN0JywgdHJ1ZSwgJycs
ICcnLCAnJykuCgkJCWhDZWxsKCkKCQkpOwoJJHJzID0gc2FmZV9yb3dzX3N0YXJ0KCIqIiwg
ImFzdl90dW1ibGVsb2dfZmVlZHMiLCAiMT0xIik7CglpZigkcnMpCgl7CgkJd2hpbGUoJGEg
PSBuZXh0Um93KCRycykpCgkJewoJCQlleHRyYWN0KCRhKTsKCQkJJGxpbmsgPSAiPGEgaHJl
Zj1cImluZGV4LnBocD9ldmVudD1hc3ZfdHVtYmxlbG9nJnN0ZXA9RmVlZHMmcnNzcGF0aD0k
RmVlZCZ0eXBlPSRUeXBlJGNvbW1lbnRzPSRBbm5vdGF0ZSZjYXRlZ29yeTE9JENhdGVnb3J5
MSZjYXRlZ29yeTI9JENhdGVnb3J5MiZrZXl3b3Jkcz0kS2V5d29yZHMmSUQ9JElEXCI+JFRp
dGxlPC9hPiI7CgoJCQllY2hvIG4udHIoCQkJdGQoJElEKS50ZCgkbGluaykudGQoc3Vic3Ry
KCRGZWVkLDAsMTApLicuLi4nKS50ZCgkVHlwZSkudGQoKCRBbm5vdGF0ZSk/Im9uIjoib2Zm
IikudGQoJENhdGVnb3J5MSkudGQoJENhdGVnb3J5MikudGQoJEtleXdvcmRzKS50ZChmSW5w
dXQoJ2NoZWNrYm94JywgJ3NlbGVjdGVkW10nLCAkSUQpKSk7CgoJCX0KCQllY2hvIG4udHIo
CgkJCQl0ZGEoIHNlbGVjdF9idXR0b25zKCkuCiBhc3ZfdHVtYmxlbG9nX2xpc3RfbXVsdGll
ZGl0X2Zvcm0oKSwnIGNvbHNwYW49IjkiIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDsgYm9y
ZGVyOiBub25lOyInKSk7Cgl9CgkJZWNobyBuLmVuZFRhYmxlKCkuJzwvZm9ybT4nOwp9Cgpm
dW5jdGlvbiBhc3ZfdHVtYmxlbG9nX3NldHRpbmdzKCRzdGVwKQp7CglnbG9iYWwgJHByZWZz
OwoKCWlmKGdwcygnc2F2ZV9zZXR0aW5ncycpKQoJewoJCWV4dHJhY3QoZ3BzYShhcnJheSgn
c291cmNlbGluaycsICd0dW1ibGVsb2dzZWN0aW9uJywgJ3NpbXBsZXBpZScsICdsaW5rZm9y
bScsICdwb3N0Zm9ybScsICdxdW90ZWZvcm0nLCAncGhvdG9mb3JtJykpKTsKCgkJKCRzb3Vy
Y2VsaW5rKT8gc2V0X3ByZWYoJ3NvdXJjZWxpbmsnLCAkc291cmNlbGluaywgJ2Fzdl90dW1i
bGVsb2cnLCAnJyk6Jyc7CgoJCSgkdHVtYmxlbG9nc2VjdGlvbik/IHNldF9wcmVmKCd0dW1i
bGVsb2dzZWN0aW9uJywgJHR1bWJsZWxvZ3NlY3Rpb24sICdhc3ZfdHVtYmxlbG9nJywgJycp
OicnOwoKCQkoJHNpbXBsZXBpZSk/IHNldF9wcmVmKCdzaW1wbGVwaWUnLCAkc2ltcGxlcGll
LCAnYXN2X3R1bWJsZWxvZycsICcnKTonJzsKCgkJKCRwb3N0Zm9ybSk/IHNldF9wcmVmKCdw
b3N0Zm9ybScsICRwb3N0Zm9ybSwgJ2Fzdl90dW1ibGVsb2cnLCAnJyk6Jyc7CgoJCSgkcXVv
dGVmb3JtKT8gc2V0X3ByZWYoJ3F1b3RlZm9ybScsICRxdW90ZWZvcm0sICdhc3ZfdHVtYmxl
bG9nJywgJycpOicnOwoKCQkoJHBob3RvZm9ybSk/IHNldF9wcmVmKCdwaG90b2Zvcm0nLCAk
cGhvdG9mb3JtLCAnYXN2X3R1bWJsZWxvZycsICcnKTonJzsKCgkJKCRsaW5rZm9ybSk/IHNl
dF9wcmVmKCdsaW5rZm9ybScsICRsaW5rZm9ybSwgJ2Fzdl90dW1ibGVsb2cnLCAnJyk6Jyc7
CgoJfQoKCXBhZ2V0b3AoJ1R1bWJsZWxvZycsIChncHMoJ3NhdmUnKSk/ICdTZXR0aW5ncyBz
YXZlZCc6JycpOwoKCWV4dHJhY3QoZ2V0X2Fzdl90dW1ibGVsb2dfcHJlZnMoKSk7CgoJZWNo
byBuLm4uJzxmb3JtIG5hbWU9InR1bWJsZWxvZy1hZG1pbiIgbWV0aG9kPSJwb3N0IiBhY3Rp
b249ImluZGV4LnBocD9ldmVudD1hc3ZfdHVtYmxlbG9nIj4nOwoKCWVjaG8gYXN2X3R1bWJs
ZWxvZ190aXRsZSgkc3RlcCkuCgoJCXRhZygnR2VuZXJhbCBTZXR0aW5ncycgLCdoMycsICcg
c3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsiJykuCgoJCXN0YXJ0VGFibGUoJ2xpc3QnKS4K
CgkJCXRyKHRkKCdTb3VyY2UgTGluayBGaWVsZCcpLnRkKGFzdl9jdXN0b21fcG9wdXAoJHNv
dXJjZWxpbmssICdzb3VyY2VsaW5rJykpKS4KCgkJCXRyKHRkKCdUdW1ibGVsb2cgU2VjdGlv
bicpLnRkKGFzdl9zZWN0aW9uX3BvcHVwKCR0dW1ibGVsb2dzZWN0aW9uLAoJCQkndHVtYmxl
bG9nc2VjdGlvbicpKSkuCgoJCQl0cih0ZCgnU2ltcGxlUGllIFBhdGgnKS50ZChmSW5wdXQo
J3RleHQnLCAnc2ltcGxlcGllJywgJHNpbXBsZXBpZSkpKS4KCgkJZW5kVGFibGUoKS4KCgkJ
dGFnKCcgJywgJ3AnKS4KCgkJdGFnKCdGb3JtcycgLCdoMycsICcgc3R5bGU9InRleHQtYWxp
Z246IGNlbnRlcjsiJykuCgoJCXN0YXJ0VGFibGUoJ2xpc3QnKS4KCgkJCXRyKHRkKCdQb3N0
IEZvcm0nKS50ZChhc3ZfZm9ybV9wb3B1cCgkcG9zdGZvcm0sICdwb3N0Zm9ybScpKSkuCgoJ
CQl0cih0ZCgnUXVvdGUgRm9ybScpLnRkKGFzdl9mb3JtX3BvcHVwKCRxdW90ZWZvcm0sICdx
dW90ZWZvcm0nKSkpLgoKCQkJdHIodGQoJ1Bob3RvIEZvcm0nKS50ZChhc3ZfZm9ybV9wb3B1
cCgkcGhvdG9mb3JtLCAncGhvdG9mb3JtJykpKS4KCgkJCXRyKHRkKCdMaW5rIEZvcm0nKS50
ZChhc3ZfZm9ybV9wb3B1cCgkbGlua2Zvcm0sICdsaW5rZm9ybScpKSkuCgoJCQl0cih0ZGEo
ZklucHV0KCdzdWJtaXQnLCdzYXZlX3NldHRpbmdzJywnc2F2ZScsInB1Ymxpc2giLCAnJywg
JycsICcnLCA0KSwgJyBjb2xzcGFuPTInKSkuCgoJCWVuZFRhYmxlKCk7CgoJZWNobyBuLm4u
JzwvZm9ybT4nLgoJJzxoMyBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXIiPjxhIGhyZWY9Imh0
dHA6Ly8nLiRwcmVmc1snc2l0ZXVybCddLicvP2Fzdl90dW1ibGVsb2dfdXBkYXRlZmVlZHM9
MSI+bWFudWFsbHkgdXBkYXRlIGZlZWRzPC9hPjwvaDM+JzsKfQoKaWYoZ3BzKCdhc3ZfdHVt
YmxlbG9nX3VwZGF0ZWZlZWRzJyk9PTEpCnsKCglleHRyYWN0KGdldF9hc3ZfdHVtYmxlbG9n
X3ByZWZzKCkpOwoJJHJzID0gc2FmZV9yb3dzX3N0YXJ0KCIqIiwgImFzdl90dW1ibGVsb2df
ZmVlZHMiLCAiMT0xIik7CgllY2hvICc8cHJlPic7CglpZigkcnMpCgl7CgkJd2hpbGUoJGEg
PSBuZXh0Um93KCRycykpCgkJewoJCQlleHRyYWN0KCRhKTsKCQkJc3dpdGNoKCRUeXBlKQoJ
CQl7CgkJCQljYXNlICJwb3N0IjoKCQkJCQkkZm9ybSA9ICRwb3N0Zm9ybTsKCQkJCQlicmVh
azsKCQkJCWNhc2UgInF1b3RlIjoKCQkJCQkkZm9ybSA9ICRxdW90ZWZvcm07CgkJCQkJYnJl
YWs7CgkJCQljYXNlICJwaG90byI6CgkJCQkJJGZvcm0gPSAkcGhvdG9mb3JtOwoJCQkJCWJy
ZWFrOwoJCQkJY2FzZSAibGluayI6CgkJCQkJJGZvcm0gPSAkbGlua2Zvcm07CgkJCQkJYnJl
YWs7CgkJCX0KCQkJZWNobyBhc3ZfcnNzZ3JhYihhcnJheSgKCQkJCSdmZWVkJwk9PiAkRmVl
ZCwKCQkJCSdzaW1wbGVwaWUnID0+ICRzaW1wbGVwaWUsCgkJCQkndHlwZScJPT4gJFR5cGUs
CgkJCQknY2F0ZWdvcnkxJwk9PiAkQ2F0ZWdvcnkxLAoJCQkJJ2NhdGVnb3J5MicgPT4gJENh
dGVnb3J5MiwKCQkJCSdzZWN0aW9uJwk9PiAkdHVtYmxlbG9nc2VjdGlvbiwKCQkJCSdmb3Jt
JwkJPT4gJGZvcm0sCgkJCQknbGlua2ZpZWxkJwk9PiAkc291cmNlbGluaywKCQkJCSdwdWJk
YXRlJyA9PiAnJywKCQkJCSdjb21tZW50cycJPT4gJEFubm90YXRlLAoJCQkJJ2tleXdvcmRz
Jwk9PiAkS2V5d29yZHMsCgkJCQkpKTsKCQl9Cgl9CgllY2hvICc8L3ByZT4nOwoJZXhpdCgp
OwoKfQoKZnVuY3Rpb24gYXN2X3Jzc2dyYWIoJGF0dHMpCnsKCWdsb2JhbCAkcHJlZnMsICR0
eHBjZmc7CglleHRyYWN0KCRwcmVmcyk7CgoJZXh0cmFjdChsQXR0cyhhcnJheSgKCQkJJ2Zl
ZWQnICAgICAgID0+ICcnLAoJCQknc2ltcGxlcGllJyAgPT4gJHR4cGNmZ1sndHhwYXRoJ10u
Jy9saWIvc2ltcGxlcGllLmluYycsCgkJCSd0eXBlJwkJPT4gJ3NpbXBsZScsCgkJCSdjYXRl
Z29yeTEnCT0+ICcnLAoJCQknY2F0ZWdvcnkyJyA9PiAnJywKCQkJJ3NlY3Rpb24nCT0+ICdk
ZWZhdWx0JywKCQkJJ2Zvcm0nCQk9PiAnJywKCQkJJ2xpbmtmaWVsZCcJPT4gJ2N1c3RvbV8x
JywKCQkJJ3B1YmRhdGUnID0+ICcnLAoJCQknY29tbWVudHMnCT0+ICdvbicsCgkJCSdrZXl3
b3JkcycJPT4gJycsCgkJCSksJGF0dHMpKTsKCgkkbWVzc2FnZSA9ICcnOwoKCS8vR2V0IFNp
bXBsZVBpZQoJcmVxdWlyZV9vbmNlKCRzaW1wbGVwaWUpOwoKCS8vQ3JlYXRlIGFuZCBzZXR1
cCBTaW1wbGVQaWUgSW5zdGFuY2UKCSR0aGVmZWVkID0gbmV3IFNpbXBsZVBpZSgpOwoJJHRo
ZWZlZWQtPnNldF9mZWVkX3VybCgkZmVlZCk7CgkkdGhlZmVlZC0+c2V0X2Zhdmljb25faGFu
ZGxlcignLi9wbHVnaW5zL2Fzdl9yc3NncmFiLnBocCcsICdmYXZpY29uJyk7CgkkdGhlZmVl
ZC0+ZW5hYmxlX2NhY2hlKGZhbHNlKTsKCSR0aGVmZWVkLT5oYW5kbGVfY29udGVudF90eXBl
KCk7CgoJJG1lc3NhZ2UgLj0gIkdldHRpbmcgJGZlZWRcclxuIjsKCS8vR2V0IHRoZSBmZWVk
Cgkkc3VjY2VzcyA9ICR0aGVmZWVkLT5pbml0KCk7CgoJaWYoJHN1Y2Nlc3MpIHsKCQkkbWVz
c2FnZSAuPSAiXHRTdWNjZXNzIVxyXG4iOwoJCSRmZWVkaXRlbXMgPSAkdGhlZmVlZC0+Z2V0
X2l0ZW1zKCk7CgkJJGZhdmljb24gPSAkdGhlZmVlZC0+Z2V0X2Zhdmljb24oKTsKCQkkbWVz
c2FnZSAuPSAiXHRGYXZpY29uIC0gIi4kZmF2aWNvbi4iXHJcbiI7CgkJZm9yZWFjaCgkZmVl
ZGl0ZW1zIGFzICRmZWVkaXRlbSkgewoJCQkvLyBHZXQgaXRlbSB0aXRsZQoJCQkkb3V0Wyd0
aXRsZSddID0gYWRkc2xhc2hlcygkZmVlZGl0ZW0tPmdldF90aXRsZSgpKTsKCQkJJGZlZWRp
dGVtcyA9ICR0aGVmZWVkLT5nZXRfaXRlbXMoKTsKCgkJCS8vR2V0IHRoZSBwZXJtYWxpbmsK
CQkJJG91dFsncGVybWFsaW5rJ10gPSAkZmVlZGl0ZW0tPmdldF9saW5rKCk7CgoJCQkvL0dl
dCB0aGUgaW1hZ2UKCQkJJG91dFsnaW1hZ2UnXSA9ICRmYXZpY29uOwoKCQkJLy8gQ2hlY2sg
YW5kIHJldHJpZXZlIGRhdGUKCQkJaWYoJHB1YmRhdGUhPScnKQoJCQl7CgkJCQkkZGF0ZVRh
a2VuID0gJGZlZWRpdGVtLT5nZXRfaXRlbV90YWdzKCdodHRwOi8vcHVybC5vcmcvZGMvZWxl
bWVudHMvMS4xLycsICdkYXRlLlRha2VuJyk7CgkJCQlwcmludF9yKCRkYXRlVGFrZW5bMF1b
J2RhdGEnXSk7CgkJCQlkaWUoIm5vdCB5ZXQgaW1wbGVtZW50ZWQiKTsKCQkJfQoJCQllbHNl
aWYoJGZlZWRpdGVtLT5nZXRfZGF0ZSgpKSB7CgkJCQkkb3V0WyJwb3N0ZWQiXSA9ICRmZWVk
aXRlbS0+Z2V0X2RhdGUoJ1UnKTsKCQkJCSR3aGVuID0gImZyb21fdW5peHRpbWUoIi4kb3V0
Wydwb3N0ZWQnXS4iKSI7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkd2hlbiA9ICdub3coKSc7
CgkJCX0KCgkJCS8vR2V0IHRoZSBib2R5CgkJCWlmKCR0eXBlPT0ibWVkaWEiKQoJCQl7CgkJ
CQkkZW5jcyA9ICRmZWVkaXRlbS0+Z2V0X2VuY2xvc3VyZXMoKTsKCQkJCWZvcmVhY2goJGVu
Y3MgYXMgJGVuY2xvc3VyZSkKCQkJCXsKCQkJCQlwcmludF9yKCRlbmNsb3N1cmUpOwoJCQkJ
CWlmKCFpc19udWxsKCRlbmNsb3N1cmUtPmdldF9saW5rKCkpKXsKCQkJCQkJJGVuY19saW5r
ID0gJGVuY2xvc3VyZS0+Z2V0X2xpbmsoKTsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJ
CQkJJGVuY19saW5rID0gJGVuY19saW5rOwoJCQkJCX0KCQkJCQkkZW5jX2xpbmsgPSBzdHJf
cmVwbGFjZSgnJmFtcDsnLCAnJicsICRlbmNfbGluayk7CgkJCQkJJG91dFsnYm9keSddID0g
JzxvYmplY3QgdHlwZT0iYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2giIHdpZHRoPSI1
MDYiIGhlaWdodD0iNDE0IiBkYXRhPSInLiRlbmNfbGluay4nIj4KCSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIDxwYXJhbSBuYW1lPSJxdWFsaXR5IiB2YWx1ZT0iaGln
aCIgLz4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXJhbSBuYW1l
PSJhbGxvd2Z1bGxzY3JlZW4iIHZhbHVlPSJ0cnVlIiAvPgoJICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgPHBhcmFtIG5hbWU9InNjYWxlIiB2YWx1ZT0ic2hvd0FsbCIg
Lz4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXJhbSBuYW1lPSJt
b3ZpZSIgdmFsdWU9IicuJGVuY19saW5rLiciIC8+CgkgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIDwvb2JqZWN0Pic7CgkJCQl9CgkJCX0KCQkJZWxzZWlmKCR0eXBlPT0icGhv
dG8iKQoJCQl7CgkJCQlpZighZGVmaW5lZCgiSU1QQVRIIikpIGRlZmluZSgiSU1QQVRIIiwk
cGF0aF90b19zaXRlLicvJy4kaW1nX2Rpci4nLycpOwoJCQkJJGZlZWREZXNjcmlwdGlvbiA9
ICRmZWVkaXRlbS0+Z2V0X2NvbnRlbnQoKTsKCQkJCSRpbWFnZSA9IHJldHVybkltYWdlKCRm
ZWVkRGVzY3JpcHRpb24pOwoJCQkJJGltYWdlID0gdXJsZGVjb2RlKHNjcmFwZUltYWdlKCRp
bWFnZSkpOwoJCQkJLy9DaGVjayB0byBzZWUgaWYgaXQgbmVlZHMgdG8gYmUgaW1wb3J0ZWQg
aW50byBUWFAgSW1hZ2UKCQkJCWlmKCRpbWFnZSkKCQkJCXsKCQkJCQkvL2dldCBleHRlbnNp
b24KCQkJCQkkZXh0ID0gc3RycmNocigkaW1hZ2UsICcuJyk7CgkJCQkJJGNoZWNrID0gc2Fm
ZV9maWVsZCgnSUQnLCAndHhwX2ltYWdlJywgIk5BTUUgPSAnIi4kb3V0Wyd0aXRsZSddLiIn
IEFORCBEQVRFID0gJHdoZW4iKTsKCQkJCQlpZigkY2hlY2spCgkJCQkJewoJCQkJCQkkaW1h
Z2VJRCA9ICRjaGVjazsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJc2FmZV9pbnNl
cnQoJ3R4cF9pbWFnZScsCgkJCQkJCQkibmFtZSA9ICciLiRvdXRbJ3RpdGxlJ10uIicsCgkJ
CQkJCQlleHQgPSAnJGV4dCcsCgkJCQkJCQlkYXRlID0gJHdoZW4iCgkJCQkJCSk7CgkJCQkJ
CSRpbWFnZUlEID0gbXlzcWxfaW5zZXJ0X2lkKCk7CgkJCQkJCS8vIGNyZWF0ZSBhIG5ldyBj
dXJsIHJlc291cmNlCgkJCQkJCSRjaCA9IGN1cmxfaW5pdCgpOwoJCQkJCQkvLyBzZXQgVVJM
IGFuZCBvdGhlciBhcHByb3ByaWF0ZSBvcHRpb25zCgkJCQkJCWN1cmxfc2V0b3B0KCRjaCwg
Q1VSTE9QVF9VUkwsICIkaW1hZ2UiKTsKCQkJCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BU
X1JFVFVSTlRSQU5TRkVSLCB0cnVlKTsKCQkJCQkJLy8gZ3JhYiBVUkwsIGFuZCByZXR1cm4g
b3V0cHV0CgkJCQkJCSRvdXRwdXQgPSBjdXJsX2V4ZWMoJGNoKTsKCQkJCQkJLy8gY2xvc2Ug
Y3VybCByZXNvdXJjZSwgYW5kIGZyZWUgdXAgc3lzdGVtIHJlc291cmNlcwoJCQkJCQljdXJs
X2Nsb3NlKCRjaCk7CgkJCQkJCS8vd3JpdGUgdG8gZmlsZQoJCQkJCQkkZmlsZW5hbWUgPSBJ
TVBBVEguYmFzZW5hbWUoJGltYWdlKTsKCQkJCQkJJGZoID0gZm9wZW4oSU1QQVRILiRpbWFn
ZUlELiRleHQsICd3Jyk7CgkJCQkJCWZ3cml0ZSgkZmgsICRvdXRwdXQpOwoJCQkJCQlmY2xv
c2UoJGZoKTsKCQkJCQkJJHNob3J0cGF0aCA9IGJhc2VuYW1lKCRpbWFnZSk7CgkJCQkJCSRt
ZXNzYWdlIC49ICJcdEltcG9ydGVkICRmaWxlbmFtZVxyXG4iOwoJCQkJCX0KCQkJCX0KCQkJ
CSRvdXRbJ2JvZHknXSA9ICc8YSBocmVmPSInLiRvdXRbJ3Blcm1hbGluayddLiciPjxpbWcg
c3JjPSInLmh1LiRpbWdfZGlyLiIvIi4kaW1hZ2VJRC4kZXh0LiciIC8+PC9hPic7CgkJCX0K
CQkJZWxzZQoJCQl7CgkJCQlpZighYmVnaW5zV2l0aCgkZmVlZGl0ZW0tPmdldF9kZXNjcmlw
dGlvbigpLCAiPHAiKSkKCQkJCXsKCQkJCQkkb3V0Wydib2R5J10gPSBkb3RhZyhhZGRzbGFz
aGVzKCRmZWVkaXRlbS0+Z2V0X2Rlc2NyaXB0aW9uKCkpLCAncCcpOwoJCQkJfQoJCQkJZWxz
ZQoJCQkJewoJCQkJCSRvdXRbJ2JvZHknXSA9IGFkZHNsYXNoZXMoJGZlZWRpdGVtLT5nZXRf
ZGVzY3JpcHRpb24oKSk7CgkJCQl9CgkJCX0KCgkJCS8vQ2hlY2sgdG8gc2VlIGlmIHRoZSBh
cnRpY2xlIGhhcyBhbHJlYWR5IGJlZW4gaW1wb3J0ZWQKCQkJJGV4aXN0cyA9IHNhZmVfY291
bnQoJ3RleHRwYXR0ZXJuJywgIlRpdGxlID0gJyIuJG91dFsndGl0bGUnXS4iJyBBTkQgUG9z
dGVkPSR3aGVuIEFORCBTZWN0aW9uPSckc2VjdGlvbiciKTsKCgkJCS8vSWYgaXQgaGFzbid0
IHRoZW4gbGV0J3MgYWRkIGl0CgkJCWlmKCRleGlzdHM9PTApewoJCQkJLy9DaGVjayB0byBz
ZWUgaWYgY2F0ZWdvcnkxIGV4aXN0cwoJCQkJaWYoJGNhdGVnb3J5MSAmJiAhZmV0Y2hfY2F0
ZWdvcnlfdGl0bGUoJGNhdGVnb3J5MSkpCgkJCQl7CgkJCQkJLy9DcmVhdGUgbmV3IGNhdGVn
b3J5CgkJCQkJJG5hbWUgPSBzYW5pdGl6ZUZvclVybCgkY2F0ZWdvcnkxKTsKCQkJCQkkZXhp
c3RzID0gc2FmZV9maWVsZCgnbmFtZScsICd0eHBfY2F0ZWdvcnknLCAibmFtZSA9ICciLmRv
U2xhc2goJG5hbWUpLiInIGFuZCB0eXBlID0gJ2FydGljbGUnIik7CgkJCQkJaWYgKCEkZXhp
c3RzKQoJCQkJCXsKCQkJCQkJJHEgPSBzYWZlX2luc2VydCgndHhwX2NhdGVnb3J5JywgIm5h
bWUgPSAnIi5kb1NsYXNoKCRuYW1lKS4iJywgdGl0bGUgPSAnIi5kb1NsYXNoKCRjYXRlZ29y
eTEpLiInLCB0eXBlID0gJ2FydGljbGUnLCBwYXJlbnQgPSAncm9vdCciKTsKCQkJCQkJcmVi
dWlsZF90cmVlKCdyb290JywgMSwgJ2FydGljbGUnKTsKCQkJCQl9CgkJCQl9CgkJCQkvL0No
ZWNrIHRvIHNlZSBpZiBjYXRlZ29yeTIgZXhpc3RzCgkJCQlpZigkY2F0ZWdvcnkyICYmICFm
ZXRjaF9jYXRlZ29yeV90aXRsZSgkY2F0ZWdvcnkyKSkKCQkJCXsKCQkJCQkvL0NyZWF0ZSBu
ZXcgY2F0ZWdvcnkKCQkJCQkkbmFtZSA9IHNhbml0aXplRm9yVXJsKCRjYXRlZ29yeTIpOwoJ
CQkJCSRleGlzdHMgPSBzYWZlX2ZpZWxkKCduYW1lJywgJ3R4cF9jYXRlZ29yeScsICJuYW1l
ID0gJyIuZG9TbGFzaCgkbmFtZSkuIicgYW5kIHR5cGUgPSAnYXJ0aWNsZSciKTsKCQkJCQlp
ZiAoISRleGlzdHMpCgkJCQkJewoJCQkJCQkkcSA9IHNhZmVfaW5zZXJ0KCd0eHBfY2F0ZWdv
cnknLCAibmFtZSA9ICciLmRvU2xhc2goJG5hbWUpLiInLCB0aXRsZSA9ICciLmRvU2xhc2go
JGNhdGVnb3J5MikuIicsIHR5cGUgPSAnYXJ0aWNsZScsIHBhcmVudCA9ICdyb290JyIpOwoJ
CQkJCQlyZWJ1aWxkX3RyZWUoJ3Jvb3QnLCAxLCAnYXJ0aWNsZScpOwoJCQkJCX0KCQkJCX0K
CgkJCQkvL0dldCBjdXN0b20gZmllbGQKCQkJCSRtZXNzYWdlIC49ICJcdFx0JGxpbmtmaWVs
ZCAtIGN1c3RvbVxyXG4iOwoJCQkJJGN1c3RvbV9yb3cgPSBzYWZlX3JvdygiKiIsICd0eHBf
cHJlZnMnLCAidmFsPSckbGlua2ZpZWxkJyIpOwoJCQkJaWYoJGN1c3RvbV9yb3cpCgkJCQl7
CgkJCQkJJGxpbmtmaWVsZF9zZXQgPSAnY3VzdG9tXycuJGN1c3RvbV9yb3dbJ3Bvc2l0aW9u
J107CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJGxpbmtmaWVsZF9zZXQgPSAiY3VzdG9t
XzEiOwoJCQkJfQoJCQkJJHJlc3VsdCA9IHNhZmVfaW5zZXJ0KCJ0ZXh0cGF0dGVybiIsCgkJ
CQkJIlRpdGxlICAgICAgICAgICA9ICciLiRvdXRbJ3RpdGxlJ10uIicsCgkJCQkJQm9keSAg
ICAgICAgICAgID0gJyIuJG91dFsnYm9keSddLiInLAoJCQkJCUJvZHlfaHRtbCAgICAgICA9
ICciLiRvdXRbJ2JvZHknXS4iJywKCQkJCQlFeGNlcnB0ICAgICAgICAgPSAnJywKCQkJCQlF
eGNlcnB0X2h0bWwgICAgPSAnJywKCQkJCQlJbWFnZSAgICAgICAgICAgPSAnIi4kZmF2aWNv
bi4iJywKCQkJCQlLZXl3b3JkcyAgICAgICAgPSAnJGtleXdvcmRzJywKCQkJCQlTdGF0dXMg
ICAgICAgICAgPSAgNCwKCQkJCQlQb3N0ZWQgICAgICAgICAgPSAgJHdoZW4sCgkJCQkJTGFz
dE1vZCAgICAgICAgID0gIG5vdygpLAoJCQkJCUF1dGhvcklEICAgICAgICA9ICcnLAoJCQkJ
CVNlY3Rpb24gICAgICAgICA9ICckc2VjdGlvbicsCgkJCQkJQ2F0ZWdvcnkxICAgICAgID0g
JyRjYXRlZ29yeTEnLAoJCQkJCUNhdGVnb3J5MiAgICAgICA9ICckY2F0ZWdvcnkyJywKCQkJ
CQl0ZXh0aWxlX2JvZHkgICAgPSAgMCwKCQkJCQl0ZXh0aWxlX2V4Y2VycHQgPSAgMCwKCQkJ
CQlBbm5vdGF0ZSAgICAgICAgPSAgMSwKCQkJCQlvdmVycmlkZV9mb3JtICAgPSAnJGZvcm0n
LAoJCQkJCXVybF90aXRsZSAgICAgICA9ICcnLAoJCQkJCSRsaW5rZmllbGRfc2V0IAkJPSAn
Ii4kb3V0WydwZXJtYWxpbmsnXS4iJywKCQkJCQlBbm5vdGF0ZUludml0ZSAgPSAnY29tbWVu
dHMnLAoJCQkJCXVpZCAgICAgICAgICAgICA9ICciLm1kNSh1bmlxaWQocmFuZCgpLHRydWUp
KS4iJywKCQkJCQlmZWVkX3RpbWUgICAgICAgPSAkd2hlbiIKCQkJCSk7CgoJCQkJaWYoJHJl
c3VsdCkKCQkJCXsKCQkJCQkvL2RvX3BpbmdzKCk7CgkJCQkJdXBkYXRlX2xhc3Rtb2QoKTsK
CQkJCQkkbWVzc2FnZSAuPSAiXHRBZGRlZCAtICIuJG91dFsndGl0bGUnXS4iXHJcbiI7CgkJ
CQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkbWVzc2FnZSAuPSAiXHRFeGlzdHMgLSAiLiRv
dXRbJ3RpdGxlJ10uIlxyXG4iOwoJCQl9CgkJfQoJfQoJZWxzZSB7CgkJJG1lc3NhZ2UgLj0g
Ilx0Ii4kdGhlZmVlZC0+ZXJyb3I7Cgl9CglyZXR1cm4gJG1lc3NhZ2U7Cn0KCi8vaGVscGVy
IGZ1bmN0aW9ucwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vR2V0IGFuIGltYWdlCmZ1bmN0aW9uIHJldHVybklt
YWdlICgkdGV4dCkgewogICAgJHRleHQgPSBodG1sX2VudGl0eV9kZWNvZGUoJHRleHQpOwog
ICAgLy9lY2hvICR0ZXh0OwogICAgJHBhdHRlcm4gPSAiLzxpbWdbXj5dK1w+L2kiOwogICAg
cHJlZ19tYXRjaCgkcGF0dGVybiwgJHRleHQsICRtYXRjaGVzKTsKICAgICR0ZXh0ID0gJG1h
dGNoZXNbMF07CiAgICByZXR1cm4gJHRleHQ7Cn0KCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy9GaWx0ZXIgb3V0
IGltYWdlIHVybCBvbmx5CmZ1bmN0aW9uIHNjcmFwZUltYWdlKCR0ZXh0KSB7CgogICAgJHBh
dHRlcm4gPSAnL3NyYz1bXCciXT8oW15cJyIgPl0rKVtcJyIgPl0vJzsKCnByZWdfbWF0Y2go
JHBhdHRlcm4sICR0ZXh0LCAkbGluayk7CgokbGluayA9ICRsaW5rWzFdOwokbGluayA9IHVy
bGVuY29kZSgkbGluayk7CnJldHVybiAkbGluazsKCn0KCmZ1bmN0aW9uIGJlZ2luc1dpdGgo
JHN0ciwgJHN1YikgewogICAgcmV0dXJuIChzdHJuY21wKCRzdHIsICRzdWIsIHN0cmxlbigk
c3ViKSkgPT0gMCk7Cgl9IjtzOjM6Im1kNSI7czozMjoiYzcwMmQ4MGUwYmY3YWMyMDY4ZWM0
NDYwYTkzZTllMjgiO30=
