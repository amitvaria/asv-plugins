# asv_tumblelog v0.1
# Implementing the greatness of tumblelogs
# Amit Varia
# http://www.amitvaria.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjQ6Im5hbWUiO3M6MTM6ImFzdl90dW1ibGVsb2ciO3M6NzoidmVyc2lvbiI7czoz
OiIwLjEiO3M6NjoiYXV0aG9yIjtzOjEwOiJBbWl0IFZhcmlhIjtzOjEwOiJhdXRob3JfdXJp
IjtzOjI1OiJodHRwOi8vd3d3LmFtaXR2YXJpYS5jb20vIjtzOjExOiJkZXNjcmlwdGlvbiI7
czo0MDoiSW1wbGVtZW50aW5nIHRoZSBncmVhdG5lc3Mgb2YgdHVtYmxlbG9ncyI7czo0OiJ0
eXBlIjtpOjE7czo0OiJoZWxwIjtzOjA6IiI7czo0OiJjb2RlIjtzOjE4MjEyOiIKaWYgKEB0
eHBpbnRlcmZhY2UgPT0gJ2FkbWluJykKewoJYWRkX3ByaXZzKCdhc3ZfdHVtYmxlbG9nJywn
MSwyLDMsNCcpOyAvLyBBbGxvdyBvbmx5IHVzZXJsZXZlbHMgMSwyLDMsNCBhY2VzcyB0byB0
aGlzIHBsdWdpbi4KCXJlZ2lzdGVyX3RhYignZXh0ZW5zaW9ucycsICdhc3ZfdHVtYmxlbG9n
JywgIlR1bWJsZWxvZyIpOwoJcmVnaXN0ZXJfY2FsbGJhY2soImFzdl90dW1ibGVsb2ciLCAi
YXN2X3R1bWJsZWxvZyIpOwp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIFV0aWxpdHkgRnVuY3Rpb25zCi8v
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KZnVuY3Rpb24gYXN2X3R1bWJsZWxvZ190aXRsZSgkYWN0aXZlKQp7CgkkdGl0
bGVzID0gYXJyYXkoJ1NldHRpbmdzJywgJ0ZlZWRzJyk7CgkkbmV3dGl0bGVzID0gYXJyYXko
KTsKCWZvcmVhY2goJHRpdGxlcyBhcyAkdGl0bGUpCgl7CgkJaWYoJHRpdGxlIT0kYWN0aXZl
KQoJCXsKCQkJJHRpdGxlPSc8YSBocmVmPSJpbmRleC5waHA/ZXZlbnQ9YXN2X3R1bWJsZWxv
ZyZzdGVwPScuJHRpdGxlLiciPicuJHRpdGxlLic8L2E+JzsKCQl9CgkJYXJyYXlfcHVzaCgk
bmV3dGl0bGVzLCAkdGl0bGUpOwoJfQoKCXJldHVybiB0YWcoam9pbigkbmV3dGl0bGVzLCAi
IHwgIiksICdoMScsICcgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsiJyk7Cn0KLy8tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQpmdW5jdGlvbiBhc3Zfc2VjdGlvbl9wb3B1cCgkU2VjdGlvbiwgJGlkKQp7CgkkcnMg
PSBzYWZlX2NvbHVtbignbmFtZScsICd0eHBfc2VjdGlvbicsICJuYW1lICE9ICdkZWZhdWx0
JyIpOwoKCWlmICgkcnMpCgl7CgkJcmV0dXJuIHNlbGVjdElucHV0KCd0dW1ibGVsb2dzZWN0
aW9uJywgJHJzLCAkU2VjdGlvbiwgZmFsc2UsICcnLCAkaWQpOwoJfQoKCXJldHVybiBmYWxz
ZTsKfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl9jdXN0b21fcG9wdXAoJEN1c3RvbSwgJGlk
KQp7CgkkcnMgPSBzYWZlX2NvbHVtbigndmFsJywgJ3R4cF9wcmVmcycsICJuYW1lIExJS0Ug
J2N1c3RvbV8lX3NldCciKTsKCglpZiAoJHJzKQoJewoJCXJldHVybiBzZWxlY3RJbnB1dCgn
c291cmNlbGluaycsICRycywgJEN1c3RvbSwgZmFsc2UsICcnLCAkaWQpOwoJfQoKCXJldHVy
biBmYWxzZTsKfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGFzdl9mb3JtX3BvcHVwKCRDdXN0b20s
ICRpZCwgJG5hbWU9IiIpCnsKCSRycyA9IHNhZmVfY29sdW1uKCduYW1lJywgJ3R4cF9mb3Jt
JywgIjE9MSIpOwoKCWlmICgkcnMpCgl7CgkJcmV0dXJuIHNlbGVjdElucHV0KCRpZCwgJHJz
LCAkQ3VzdG9tLCBmYWxzZSwgJycsICRpZCk7Cgl9CgoJcmV0dXJuIGZhbHNlOwp9Ci8vLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0KZnVuY3Rpb24gYXN2X2NhdF9wb3B1cCgkQ3VzdG9tLCAkaWQsICRuYW1lPSIiKQp7
CgkkcnMgPSBnZXRUcmVlKCdyb290JywgJ2FydGljbGUnKTsKCglpZiAoJHJzKQoJewoJCXJl
dHVybiB0cmVlU2VsZWN0SW5wdXQoJG5hbWUsJHJzLCRDdXN0b20sICRpZCk7Cgl9CgoJcmV0
dXJuIGZhbHNlOwp9Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpmdW5jdGlvbiBnZXRfYXN2X3R1bWJsZWxvZ19wcmVm
cygpCnsKCSRvdXQgPSBhcnJheSgpOwoJJHIgPSBzYWZlX3Jvd3Nfc3RhcnQoJ25hbWUsIHZh
bCcsICd0eHBfcHJlZnMnLCAiZXZlbnQ9J2Fzdl90dW1ibGVsbyciKTsKCWlmICgkcikgewoJ
CXdoaWxlICgkYSA9IG5leHRSb3coJHIpKSB7CgkJCSRvdXRbJGFbJ25hbWUnXV0gPSAkYVsn
dmFsJ107CgkJfQoKCQlyZXR1cm4gbEF0dHMoYXJyYXkoCgkJCSdzb3VyY2VsaW5rJwk9PiAn
JywKCQkJJ3R1bWJsZWxvZ3NlY3Rpb24nID0+ICcnLAoJCQknc2ltcGxlcGllJyA9PiAnJywK
CQkJJ3Bvc3Rmb3JtJwk9PiAnJywKCQkJJ3F1b3RlZm9ybScJPT4gJycsCgkJCSdwaG90b2Zv
cm0nCT0+ICcnLAoJCQknbGlua2Zvcm0nIAk9PiAnJywKCQkJJ3Jzc2ZlZWRwYWdlJyA9PiAn
JywKCQkJKSwkb3V0KTsKCgl9CglyZXR1cm4gZmFsc2U7Cn0KLy8gLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpmdW5jdGlv
biBhc3ZfdHVtYmxlbG9nX2xpc3RfbXVsdGllZGl0X2Zvcm0oKQp7CgkkbWV0aG9kcyA9IGFy
cmF5KAoJCSdkZWxldGUnICAgICAgICAgID0+IGdUeHQoJ2RlbGV0ZScpLAoJKTsKCglyZXR1
cm4gZXZlbnRfbXVsdGllZGl0X2Zvcm0oJ2xpc3QnLCAkbWV0aG9kcywgJycsJycsJycsJycs
JycpOwp9Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gYXN2X3R1bWJsZWxvZ192ZXJpZnlGZWVkKCRm
ZWVkLCAkc2ltcGxlcGllKQp7CgkvL0dldCBTaW1wbGVQaWUKCXJlcXVpcmVfb25jZSgkc2lt
cGxlcGllKTsKCgkvL0NyZWF0ZSBhbmQgc2V0dXAgU2ltcGxlUGllIEluc3RhbmNlCgkkdGhl
ZmVlZCA9IG5ldyBTaW1wbGVQaWUoKTsKCSR0aGVmZWVkLT5zZXRfZmVlZF91cmwoJGZlZWQp
OwoJJHRoZWZlZWQtPmVuYWJsZV9jYWNoZShmYWxzZSk7CgkkdGhlZmVlZC0+aGFuZGxlX2Nv
bnRlbnRfdHlwZSgpOwoKCS8vR2V0IHRoZSBmZWVkCgkkc3VjY2VzcyA9ICR0aGVmZWVkLT5p
bml0KCk7CgoJcmV0dXJuICgkc3VjY2Vzcyk/ICR0aGVmZWVkLT5nZXRfdGl0bGUoKTogIGZh
bHNlOwoKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQpmdW5jdGlvbiBhc3ZfdHVtYmxlbG9nX3ZlcmlmeVRhYmxl
KCkKewoJaWYoc2FmZV9xdWVyeSgiU0hPVyBUQUJMRVMgTElLRSAnIi5zYWZlX3BmeCgnYXN2
X3R1bWJsZWxvZ19mZWVkcycpLiInIikpCgl7CgkJJHZlcnNpb24gPSBteXNxbF9nZXRfc2Vy
dmVyX2luZm8oKTsKCQkvL1VzZSAiRU5HSU5FIiBpZiB2ZXJzaW9uIG9mIE15U1FMID4gKDQu
MC4xOCBvciA0LjEuMikKCQkkdGFibGV0eXBlID0gKCBpbnR2YWwoJHZlcnNpb25bMF0pID49
IDUgfHwgcHJlZ19tYXRjaCgnI140XC4oMFwuWzItOV18KDFbODldKSl8KDFcLlsyLTldKSMn
LCR2ZXJzaW9uKSkKCQkJCQkJPyAiIEVOR0lORT1NeUlTQU0gIgoJCQkJCQk6ICIgVFlQRT1N
eUlTQU0gIjsKCQkkcmVzdWx0ID0gc2FmZV9xdWVyeSgiQ1JFQVRFIFRBQkxFIElGIE5PVCBF
WElTVFMgYCIuUEZYLiJhc3ZfdHVtYmxlbG9nX2ZlZWRzYCgKCQkJYElEYCBpbnQoMTEpIE5P
VCBOVUxMIGF1dG9faW5jcmVtZW50LAoJCQlgVGl0bGVgIHZhcmNoYXIoMjU1KSBOT1QgTlVM
TCBkZWZhdWx0ICcnLAoJCQlgRmVlZGAgdmFyY2hhcigyNTUpIE5PVCBOVUxMIGRlZmF1bHQg
JycsCgkJCWBBbm5vdGF0ZWAgaW50KDIpIE5PVCBOVUxMIGRlZmF1bHQgJzAnLAoJCQlgVHlw
ZWAgdmFyY2hhcigxMjgpIE5PVCBOVUxMIGRlZmF1bHQgJycsCgkJCWBDYXRlZ29yeTFgIHZh
cmNoYXIoMTI4KSBOT1QgTlVMTCBkZWZhdWx0ICcnLAoJCQlgQ2F0ZWdvcnkyYCB2YXJjaGFy
KDEyOCkgTk9UIE5VTEwgZGVmYXVsdCAnJywKCQkJYEtleXdvcmRzYCB2YXJjaGFyKDI1NSkg
Tk9UIE5VTEwgZGVmYXVsdCAnJywKCQkJIFBSSU1BUlkgS0VZICAoYElEYCkKCQkJICkgJHRh
YmxldHlwZSBQQUNLX0tFWVM9MSBBVVRPX0lOQ1JFTUVOVD0yICIpOwoJfQp9Ci8vLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KCmZ1bmN0aW9uIGFzdl90dW1ibGVsb2coJGV2ZW50LCAkc3RlcCkKewoJJHN0ZXA9KCRz
dGVwPT0nJyk/J1NldHRpbmdzJzokc3RlcDsKCglzd2l0Y2goJHN0ZXApCgl7CgkJY2FzZSAn
U2V0dGluZ3MnOgoJCQlhc3ZfdHVtYmxlbG9nX3NldHRpbmdzKCRzdGVwKTsKCQkJYnJlYWs7
CgkJY2FzZSAnRmVlZHMnOgoJCQlhc3ZfdHVtYmxlbG9nX2ZlZWRzKCRzdGVwKTsKCQkJYnJl
YWs7Cgl9Cn0KCmZ1bmN0aW9uIGFzdl90dW1ibGVsb2dfZmVlZHMoJHN0ZXApCnsKCWFzdl90
dW1ibGVsb2dfdmVyaWZ5VGFibGUoKTsKCgkkdHlwZXMgPSBhcnJheSgncG9zdCc9Pidwb3N0
JywgJ3F1b3RlJz0+J3F1b3RlJywgJ3Bob3RvJz0+J3Bob3RvJywgJ2xpbmsnPT4nbGluaycp
OwoKCSRtZXNzYWdlID0gJyc7CgoJZXh0cmFjdChkb1NsYXNoKGxBdHRzKGFycmF5KAoJCSdy
c3NwYXRoJyA9PiAnJywKCQkndHlwZScJPT4gJycsCgkJJ2NvbW1lbnRzJyA9PiAnJywKCQkn
Y2F0ZWdvcnkxJyA9PicnLAoJCSdjYXRlZ29yeTInID0+ICcnLAoJCSdrZXl3b3JkcycJPT4n
JywKCQknSUQnID0+JycsCgkJKSwKCQlncHNhKGFycmF5KAoJCQkncnNzcGF0aCcsCgkJCSd0
eXBlJywKCQkJJ2NvbW1lbnRzJywKCQkJJ2NhdGVnb3J5MScsCgkJCSdjYXRlZ29yeTInLAoJ
CQkna2V5d29yZHMnLAoJCQknSUQnCgkJCSkpKSkpOwoKCWV4dHJhY3QoZ2V0X2Fzdl90dW1i
bGVsb2dfcHJlZnMoKSk7CgoJaWYoZ3BzKCdzYXZlX2ZlZWRzJykpCgl7CgkJaWYoaW5fYXJy
YXkoJHR5cGUsJHR5cGVzKSkKCQl7CgkJCWlmKCR0aXRsZSA9IGFzdl90dW1ibGVsb2dfdmVy
aWZ5RmVlZCgkcnNzcGF0aCwgJHNpbXBsZXBpZSkpCgkJCXsKCQkJCSR0aXRsZSA9IGRvU2xh
c2goJHRpdGxlKTsKCQkJCWlmKCRJRCkKCQkJCXsKCQkJCQlzYWZlX3VwZGF0ZSgnYXN2X3R1
bWJsZWxvZ19mZWVkcycsCgkJCQkJCSJGZWVkID0gJyRyc3NwYXRoJywKCQkJCQkJVGl0bGUg
PSAnJHRpdGxlJywKCQkJCQkJVHlwZSA9ICckdHlwZScsCgkJCQkJCUNhdGVnb3J5MSA9ICck
Y2F0ZWdvcnkxJywKCQkJCQkJQ2F0ZWdvcnkyID0gJyRjYXRlZ29yeTInLAoJCQkJCQlLZXl3
b3JkcyA9ICcka2V5d29yZHMnLAoJCQkJCQlBbm5vdGF0ZSA9ICckY29tbWVudHMnIiwKCQkJ
CQkJIklEID0gJElEIgoJCQkJCQkpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXNhZmVf
aW5zZXJ0KCdhc3ZfdHVtYmxlbG9nX2ZlZWRzJywKCQkJCQkJIkZlZWQgPSAnJHJzc3BhdGgn
LAoJCQkJCQlUaXRsZSA9ICckdGl0bGUnLAoJCQkJCQlUeXBlID0gJyR0eXBlJywKCQkJCQkJ
Q2F0ZWdvcnkxID0gJyRjYXRlZ29yeTEnLAoJCQkJCQlDYXRlZ29yeTIgPSAnJGNhdGVnb3J5
MicsCgkJCQkJCUtleXdvcmRzID0gJyRrZXl3b3JkcycsCgkJCQkJCUFubm90YXRlID0gJyRj
b21tZW50cyciCgkJCQkJCSk7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkbWVzc2Fn
ZSA9ICJOb3QgYSB2YWxpZCBmZWVkLiI7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJG1lc3Nh
Z2UgPSAiVHlwZSBpcyByZXF1aXJlZC4gIC0gJHR5cGUgLSI7CgkJfQoJfQoJaWYoZ3BzKCdh
Y3Rpb24nKT09J2RlbGV0ZScpCgl7CgkJJHNlbGVjdGVkID0gcHMoJ3NlbGVjdGVkJyk7CgkJ
aWYgKCRzZWxlY3RlZCkKCQl7CgkJCSRpZHMgPSBhcnJheSgpOwoJCQlmb3JlYWNoICgkc2Vs
ZWN0ZWQgYXMgJGlkKQoJCQl7CgkJCQkkaWQgPSBhc3NlcnRfaW50KCRpZCk7CgkJCQlpZiAo
c2FmZV9kZWxldGUoJ2Fzdl90dW1ibGVsb2dfZmVlZHMnLCAiSUQgPSAkaWQiKSkKCQkJCXsK
CQkJCQkkaWRzW10gPSAkaWQ7CgkJCQl9CgkJCX0KCQkJJGNoYW5nZWQgPSBqb2luKCcsICcs
ICRpZHMpOwoJCQkkbWVzc2FnZSA9ICJSZW1vdmVkICRjaGFuZ2VkIjsKCQl9Cgl9CgoJcGFn
ZXRvcCgnVHVtYmxlbG9nJywgJG1lc3NhZ2UpOwoKCWVjaG8gbi5uLic8Zm9ybSBuYW1lPSJ0
dW1ibGVsb2ctYWRtaW4iIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJpbmRleC5waHA/ZXZlbnQ9
YXN2X3R1bWJsZWxvZyZzdGVwPUZlZWRzIj4nLgoJaElucHV0KCdzdGVwJywgJ0ZlZWRzJyku
CgloSW5wdXQoJ0lEJywgJElEKTsKCgllY2hvIGFzdl90dW1ibGVsb2dfdGl0bGUoJHN0ZXAp
LgoKCQl0YWcoJzxhIGhyZWY9ImluZGV4LnBocD9ldmVudD1hc3ZfdHVtYmxlbG9nJnN0ZXA9
RmVlZHMiPkFkZCBOZXcgRmVlZDwvYT4nICwnaDMnLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOiBj
ZW50ZXI7IicpLgoKCQlzdGFydFRhYmxlKCdsaXN0JykuCgoJCQl0cih0ZCgnQXRvbS9SU1Mg
UGF0aCcpLnRkKGZJbnB1dCgndGV4dCcsICdyc3NwYXRoJywgJHJzc3BhdGgpKSkuCgoJCQl0
cih0ZCgnVHlwZScpLnRkKHNlbGVjdElucHV0KCd0eXBlJywgJHR5cGVzLCAkdHlwZSwgMCkp
KS4KCgkJCXRyKHRkKCdDb21tZW50cycpLnRkKG9ub2ZmUmFkaW8oJ2NvbW1lbnRzJywgKCRj
b21tZW50cyk/JGNvbW1lbnRzOiIxIikpKS4KCgkJCXRyKHRkKCdDYXRlZ29yeTEnKS50ZChh
c3ZfY2F0X3BvcHVwKCRjYXRlZ29yeTEsICdjYXRlZ29yeTEnKSkpLgoKCQkJdHIodGQoJ0Nh
dGVnb3J5MicpLnRkKGFzdl9jYXRfcG9wdXAoJGNhdGVnb3J5MiwgJ2NhdGVnb3J5MicpKSku
CgoJCQl0cih0ZCgnS2V5d29yZHMnKS50ZChmSW5wdXQoJ3RleHQnLCAna2V5d29yZHMnLCAk
a2V5d29yZHMpKSkuCgoJCQl0cih0ZGEoZklucHV0KCdzdWJtaXQnLCdzYXZlX2ZlZWRzJywg
KCRJRCk/J3NhdmUnOidhZGQnLCJwdWJsaXNoIiwgJycsICcnLCAnJywgNCksICcgY29sc3Bh
bj0yJykpLgoKCQllbmRUYWJsZSgpLic8L2Zvcm0+JzsKCWVjaG8gdGFnKCJDdXJyZW50IEZl
ZWRzIiwgImgzIiwgJyBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXIiJykuCgkJJzxmb3JtIG5h
bWU9Imxvbmdmb3JtIiBtZXRob2Q9InBvc3QiIGFjdGlvbj0iaW5kZXgucGhwP2V2ZW50PWFz
dl90dW1ibGVsb2cmc3RlcD1GZWVkcyI+Jy4KCQloSW5wdXQoJ2V2ZW50JywgJ2Fzdl90dW1i
bGVsb2cnKS4KCQloSW5wdXQoJ3N0ZXAnLCAnRmVlZHMnKS4KCQloSW5wdXQoJ2FjdGlvbics
ICdkZWxldGUnKS4KCgkJbi5zdGFydFRhYmxlKCdsaXN0JywgJycsICcnLCAnJywgJzkwJScp
LgoJCW4udHIoCgkJCW4uY29sdW1uX2hlYWQoJ0lEJywgJ2lkJywgJ2xpc3QnLCB0cnVlLCAn
JywgJycsICcnKS4KCQkJbi5jb2x1bW5faGVhZCgnVGl0bGUnLCAndGl0bGUnLCAnbGlzdCcs
IHRydWUsICcnLCAnJywgJycpLgoJCQluLmNvbHVtbl9oZWFkKCdGZWVkJywgJ2ZlZWQnLCAn
bGlzdCcsIHRydWUsICcnLCAnJywgJycpLgoJCQluLmNvbHVtbl9oZWFkKCdUeXBlJywgJ3R5
cGUnLCAnbGlzdCcsIHRydWUsICcnLCAnJywgJycpLgoJCQluLmNvbHVtbl9oZWFkKCdDb21t
ZW50cycsICdjb21tZW50cycsICdsaXN0JywgdHJ1ZSwgJycsICcnLCAnJykuCgkJCW4uY29s
dW1uX2hlYWQoJ0NhdGVnb3J5MScsICdjYXRlZ29yeTEnLCAnbGlzdCcsIHRydWUsICcnLCAn
JywgJycpLgoJCQluLmNvbHVtbl9oZWFkKCdDYXRlZ29yeTInLCAnY2F0ZWdvcnkxJywgJ2xp
c3QnLCB0cnVlLCAnJywgJycsICcnKS4KCQkJbi5jb2x1bW5faGVhZCgnS2V5d29yZHMnLCAn
S2V5d29yZHMnLCAnbGlzdCcsIHRydWUsICcnLCAnJywgJycpLgoJCQloQ2VsbCgpCgkJKTsK
CSRycyA9IHNhZmVfcm93c19zdGFydCgiKiIsICJhc3ZfdHVtYmxlbG9nX2ZlZWRzIiwgIjE9
MSIpOwoJaWYoJHJzKQoJewoJCXdoaWxlKCRhID0gbmV4dFJvdygkcnMpKQoJCXsKCQkJZXh0
cmFjdCgkYSk7CgkJCSRsaW5rID0gIjxhIGhyZWY9XCJpbmRleC5waHA/ZXZlbnQ9YXN2X3R1
bWJsZWxvZyZzdGVwPUZlZWRzJnJzc3BhdGg9JEZlZWQmdHlwZT0kVHlwZSRjb21tZW50cz0k
QW5ub3RhdGUmY2F0ZWdvcnkxPSRDYXRlZ29yeTEmY2F0ZWdvcnkyPSRDYXRlZ29yeTIma2V5
d29yZHM9JEtleXdvcmRzJklEPSRJRFwiPiRUaXRsZTwvYT4iOwoKCQkJZWNobyBuLnRyKAkJ
CXRkKCRJRCkudGQoJGxpbmspLnRkKHN1YnN0cigkRmVlZCwwLDEwKS4nLi4uJykudGQoJFR5
cGUpLnRkKCgkQW5ub3RhdGUpPyJvbiI6Im9mZiIpLnRkKCRDYXRlZ29yeTEpLnRkKCRDYXRl
Z29yeTIpLnRkKCRLZXl3b3JkcykudGQoZklucHV0KCdjaGVja2JveCcsICdzZWxlY3RlZFtd
JywgJElEKSkpOwoKCQl9CgkJZWNobyBuLnRyKAoJCQkJdGRhKCBzZWxlY3RfYnV0dG9ucygp
LgogYXN2X3R1bWJsZWxvZ19saXN0X211bHRpZWRpdF9mb3JtKCksJyBjb2xzcGFuPSI5IiBz
dHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7IGJvcmRlcjogbm9uZTsiJykpOwoJfQoJCWVjaG8g
bi5lbmRUYWJsZSgpLic8L2Zvcm0+JzsKfQoKZnVuY3Rpb24gYXN2X3R1bWJsZWxvZ19zZXR0
aW5ncygkc3RlcCkKewoJaWYoZ3BzKCdzYXZlX3NldHRpbmdzJykpCgl7CgkJZXh0cmFjdChn
cHNhKGFycmF5KCdzb3VyY2VsaW5rJywgJ3R1bWJsZWxvZ3NlY3Rpb24nLCAnc2ltcGxlcGll
JywgJ2xpbmtmb3JtJywgJ3Bvc3Rmb3JtJywgJ3F1b3RlZm9ybScsICdwaG90b2Zvcm0nKSkp
OwoKCQkoJHNvdXJjZWxpbmspPyBzZXRfcHJlZignc291cmNlbGluaycsICRzb3VyY2VsaW5r
LCAnYXN2X3R1bWJsZWxvZycsICcnKTonJzsKCgkJKCR0dW1ibGVsb2dzZWN0aW9uKT8gc2V0
X3ByZWYoJ3R1bWJsZWxvZ3NlY3Rpb24nLCAkdHVtYmxlbG9nc2VjdGlvbiwgJ2Fzdl90dW1i
bGVsb2cnLCAnJyk6Jyc7CgoJCSgkc2ltcGxlcGllKT8gc2V0X3ByZWYoJ3NpbXBsZXBpZScs
ICRzaW1wbGVwaWUsICdhc3ZfdHVtYmxlbG9nJywgJycpOicnOwoKCQkoJHBvc3Rmb3JtKT8g
c2V0X3ByZWYoJ3Bvc3Rmb3JtJywgJHBvc3Rmb3JtLCAnYXN2X3R1bWJsZWxvZycsICcnKTon
JzsKCgkJKCRxdW90ZWZvcm0pPyBzZXRfcHJlZigncXVvdGVmb3JtJywgJHF1b3RlZm9ybSwg
J2Fzdl90dW1ibGVsb2cnLCAnJyk6Jyc7CgoJCSgkcGhvdG9mb3JtKT8gc2V0X3ByZWYoJ3Bo
b3RvZm9ybScsICRwaG90b2Zvcm0sICdhc3ZfdHVtYmxlbG9nJywgJycpOicnOwoKCQkoJGxp
bmtmb3JtKT8gc2V0X3ByZWYoJ2xpbmtmb3JtJywgJGxpbmtmb3JtLCAnYXN2X3R1bWJsZWxv
ZycsICcnKTonJzsKCgl9CgoJcGFnZXRvcCgnVHVtYmxlbG9nJywgKGdwcygnc2F2ZScpKT8g
J1NldHRpbmdzIHNhdmVkJzonJyk7CgoJZXh0cmFjdChnZXRfYXN2X3R1bWJsZWxvZ19wcmVm
cygpKTsKCgllY2hvIG4ubi4nPGZvcm0gbmFtZT0idHVtYmxlbG9nLWFkbWluIiBtZXRob2Q9
InBvc3QiIGFjdGlvbj0iaW5kZXgucGhwP2V2ZW50PWFzdl90dW1ibGVsb2ciPic7CgoJZWNo
byBhc3ZfdHVtYmxlbG9nX3RpdGxlKCRzdGVwKS4KCgkJdGFnKCdHZW5lcmFsIFNldHRpbmdz
JyAsJ2gzJywgJyBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyInKS4KCgkJc3RhcnRUYWJs
ZSgnbGlzdCcpLgoKCQkJdHIodGQoJ1NvdXJjZSBMaW5rIEZpZWxkJykudGQoYXN2X2N1c3Rv
bV9wb3B1cCgkc291cmNlbGluaywgJ3NvdXJjZWxpbmsnKSkpLgoKCQkJdHIodGQoJ1R1bWJs
ZWxvZyBTZWN0aW9uJykudGQoYXN2X3NlY3Rpb25fcG9wdXAoJHR1bWJsZWxvZ3NlY3Rpb24s
CgkJCSd0dW1ibGVsb2dzZWN0aW9uJykpKS4KCgkJCXRyKHRkKCdTaW1wbGVQaWUgUGF0aCcp
LnRkKGZJbnB1dCgndGV4dCcsICdzaW1wbGVwaWUnLCAkc2ltcGxlcGllKSkpLgoKCQllbmRU
YWJsZSgpLgoKCQl0YWcoJyAnLCAncCcpLgoKCQl0YWcoJ0Zvcm1zJyAsJ2gzJywgJyBzdHls
ZT0idGV4dC1hbGlnbjogY2VudGVyOyInKS4KCgkJc3RhcnRUYWJsZSgnbGlzdCcpLgoKCQkJ
dHIodGQoJ1Bvc3QgRm9ybScpLnRkKGFzdl9mb3JtX3BvcHVwKCRwb3N0Zm9ybSwgJ3Bvc3Rm
b3JtJykpKS4KCgkJCXRyKHRkKCdRdW90ZSBGb3JtJykudGQoYXN2X2Zvcm1fcG9wdXAoJHF1
b3RlZm9ybSwgJ3F1b3RlZm9ybScpKSkuCgoJCQl0cih0ZCgnUGhvdG8gRm9ybScpLnRkKGFz
dl9mb3JtX3BvcHVwKCRwaG90b2Zvcm0sICdwaG90b2Zvcm0nKSkpLgoKCQkJdHIodGQoJ0xp
bmsgRm9ybScpLnRkKGFzdl9mb3JtX3BvcHVwKCRsaW5rZm9ybSwgJ2xpbmtmb3JtJykpKS4K
CgkJCXRyKHRkYShmSW5wdXQoJ3N1Ym1pdCcsJ3NhdmVfc2V0dGluZ3MnLCdzYXZlJywicHVi
bGlzaCIsICcnLCAnJywgJycsIDQpLCAnIGNvbHNwYW49MicpKS4KCgkJZW5kVGFibGUoKTsK
CgllY2hvIG4ubi4nPC9mb3JtPic7Cn0KCmlmKGdwcygndXBkYXRlZmVlZHMnKT09MSkKewoK
CWV4dHJhY3QoZ2V0X2Fzdl90dW1ibGVsb2dfcHJlZnMoKSk7CgkkcnMgPSBzYWZlX3Jvd3Nf
c3RhcnQoIioiLCAiYXN2X3R1bWJsZWxvZ19mZWVkcyIsICIxPTEiKTsKCWVjaG8gJzxwcmU+
JzsKCWlmKCRycykKCXsKCQl3aGlsZSgkYSA9IG5leHRSb3coJHJzKSkKCQl7CgkJCWV4dHJh
Y3QoJGEpOwoJCQlzd2l0Y2goJFR5cGUpCgkJCXsKCQkJCWNhc2UgInBvc3QiOgoJCQkJCSRm
b3JtID0gJHBvc3Rmb3JtOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAicXVvdGUiOgoJCQkJCSRm
b3JtID0gJHF1b3RlZm9ybTsKCQkJCQlicmVhazsKCQkJCWNhc2UgInBob3RvIjoKCQkJCQkk
Zm9ybSA9ICRwaG90b2Zvcm07CgkJCQkJYnJlYWs7CgkJCQljYXNlICJsaW5rIjoKCQkJCQkk
Zm9ybSA9ICRsaW5rZm9ybTsKCQkJCQlicmVhazsKCQkJfQoJCQllY2hvIGFzdl9yc3NncmFi
KGFycmF5KAoJCQkJJ2ZlZWQnCT0+ICRGZWVkLAoJCQkJJ3NpbXBsZXBpZScgPT4gJHNpbXBs
ZXBpZSwKCQkJCSd0eXBlJwk9PiAkVHlwZSwKCQkJCSdjYXRlZ29yeTEnCT0+ICRDYXRlZ29y
eTEsCgkJCQknY2F0ZWdvcnkyJyA9PiAkQ2F0ZWdvcnkyLAoJCQkJJ3NlY3Rpb24nCT0+ICR0
dW1ibGVsb2dzZWN0aW9uLAoJCQkJJ2Zvcm0nCQk9PiAkZm9ybSwKCQkJCSdsaW5rZmllbGQn
CT0+ICRzb3VyY2VsaW5rLAoJCQkJJ3B1YmRhdGUnID0+ICcnLAoJCQkJJ2NvbW1lbnRzJwk9
PiAkQW5ub3RhdGUKCQkJCSkpOwoJCX0KCX0KCWVjaG8gJzwvcHJlPic7CglleGl0KCk7Cgp9
CgpmdW5jdGlvbiBhc3ZfcnNzZ3JhYigkYXR0cykKewoJZ2xvYmFsICRwcmVmcywgJHR4cGNm
ZzsKCWV4dHJhY3QoJHByZWZzKTsKCglleHRyYWN0KGxBdHRzKGFycmF5KAoJCQknZmVlZCcg
ICAgICAgPT4gJycsCgkJCSdzaW1wbGVwaWUnICA9PiAkdHhwY2ZnWyd0eHBhdGgnXS4nL2xp
Yi9zaW1wbGVwaWUuaW5jJywKCQkJJ3R5cGUnCQk9PiAnc2ltcGxlJywKCQkJJ2NhdGVnb3J5
MScJPT4gJycsCgkJCSdjYXRlZ29yeTInID0+ICcnLAoJCQknc2VjdGlvbicJPT4gJ2RlZmF1
bHQnLAoJCQknZm9ybScJCT0+ICcnLAoJCQknbGlua2ZpZWxkJwk9PiAnY3VzdG9tXzEnLAoJ
CQkncHViZGF0ZScgPT4gJycsCgkJCSdjb21tZW50cycJPT4gJ29uJywKCQkJKSwkYXR0cykp
OwoKCSRtZXNzYWdlID0gJyc7CgoJLy9HZXQgU2ltcGxlUGllCglyZXF1aXJlX29uY2UoJHNp
bXBsZXBpZSk7CgoJLy9DcmVhdGUgYW5kIHNldHVwIFNpbXBsZVBpZSBJbnN0YW5jZQoJJHRo
ZWZlZWQgPSBuZXcgU2ltcGxlUGllKCk7CgkkdGhlZmVlZC0+c2V0X2ZlZWRfdXJsKCRmZWVk
KTsKCSR0aGVmZWVkLT5zZXRfZmF2aWNvbl9oYW5kbGVyKCcuL3BsdWdpbnMvYXN2X3Jzc2dy
YWIucGhwJywgJ2Zhdmljb24nKTsKCSR0aGVmZWVkLT5lbmFibGVfY2FjaGUoZmFsc2UpOwoJ
JHRoZWZlZWQtPmhhbmRsZV9jb250ZW50X3R5cGUoKTsKCgkkbWVzc2FnZSAuPSAiR2V0dGlu
ZyAkZmVlZFxyXG4iOwoJLy9HZXQgdGhlIGZlZWQKCSRzdWNjZXNzID0gJHRoZWZlZWQtPmlu
aXQoKTsKCglpZigkc3VjY2VzcykgewoJCSRtZXNzYWdlIC49ICJcdFN1Y2Nlc3MhXHJcbiI7
CgkJJGZlZWRpdGVtcyA9ICR0aGVmZWVkLT5nZXRfaXRlbXMoKTsKCQkkZmF2aWNvbiA9ICR0
aGVmZWVkLT5nZXRfZmF2aWNvbigpOwoJCSRtZXNzYWdlIC49ICJcdEZhdmljb24gLSAiLiRm
YXZpY29uLiJcclxuIjsKCQlmb3JlYWNoKCRmZWVkaXRlbXMgYXMgJGZlZWRpdGVtKSB7CgkJ
CS8vIEdldCBpdGVtIHRpdGxlCgkJCSRvdXRbJ3RpdGxlJ10gPSBhZGRzbGFzaGVzKCRmZWVk
aXRlbS0+Z2V0X3RpdGxlKCkpOwoJCQkkZmVlZGl0ZW1zID0gJHRoZWZlZWQtPmdldF9pdGVt
cygpOwoKCQkJLy9HZXQgdGhlIHBlcm1hbGluawoJCQkkb3V0WydwZXJtYWxpbmsnXSA9ICRm
ZWVkaXRlbS0+Z2V0X2xpbmsoKTsKCgkJCS8vR2V0IHRoZSBpbWFnZQoJCQkkb3V0WydpbWFn
ZSddID0gJGZhdmljb247CgoJCQkvLyBDaGVjayBhbmQgcmV0cmlldmUgZGF0ZQoJCQlpZigk
cHViZGF0ZSE9JycpCgkJCXsKCQkJCSRkYXRlVGFrZW4gPSAkZmVlZGl0ZW0tPmdldF9pdGVt
X3RhZ3MoJ2h0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvJywgJ2RhdGUuVGFrZW4n
KTsKCQkJCXByaW50X3IoJGRhdGVUYWtlblswXVsnZGF0YSddKTsKCQkJCWRpZSgibm90IHll
dCBpbXBsZW1lbnRlZCIpOwoJCQl9CgkJCWVsc2VpZigkZmVlZGl0ZW0tPmdldF9kYXRlKCkp
IHsKCQkJCSRvdXRbInBvc3RlZCJdID0gJGZlZWRpdGVtLT5nZXRfZGF0ZSgnVScpOwoJCQkJ
JHdoZW4gPSAiZnJvbV91bml4dGltZSgiLiRvdXRbJ3Bvc3RlZCddLiIpIjsKCQkJfQoJCQll
bHNlCgkJCXsKCQkJCSR3aGVuID0gJ25vdygpJzsKCQkJfQoKCQkJLy9HZXQgdGhlIGJvZHkK
CQkJaWYoJHR5cGU9PSJtZWRpYSIpCgkJCXsKCQkJCSRlbmNzID0gJGZlZWRpdGVtLT5nZXRf
ZW5jbG9zdXJlcygpOwoJCQkJZm9yZWFjaCgkZW5jcyBhcyAkZW5jbG9zdXJlKQoJCQkJewoJ
CQkJCXByaW50X3IoJGVuY2xvc3VyZSk7CgkJCQkJaWYoIWlzX251bGwoJGVuY2xvc3VyZS0+
Z2V0X2xpbmsoKSkpewoJCQkJCQkkZW5jX2xpbmsgPSAkZW5jbG9zdXJlLT5nZXRfbGluaygp
OwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkZW5jX2xpbmsgPSAkZW5jX2xpbms7
CgkJCQkJfQoJCQkJCSRlbmNfbGluayA9IHN0cl9yZXBsYWNlKCcmYW1wOycsICcmJywgJGVu
Y19saW5rKTsKCQkJCQkkb3V0Wydib2R5J10gPSAnPG9iamVjdCB0eXBlPSJhcHBsaWNhdGlv
bi94LXNob2Nrd2F2ZS1mbGFzaCIgd2lkdGg9IjUwNiIgaGVpZ2h0PSI0MTQiIGRhdGE9Iicu
JGVuY19saW5rLiciPgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBh
cmFtIG5hbWU9InF1YWxpdHkiIHZhbHVlPSJoaWdoIiAvPgoJICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgPHBhcmFtIG5hbWU9ImFsbG93ZnVsbHNjcmVlbiIgdmFsdWU9
InRydWUiIC8+CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGFyYW0g
bmFtZT0ic2NhbGUiIHZhbHVlPSJzaG93QWxsIiAvPgoJICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgPHBhcmFtIG5hbWU9Im1vdmllIiB2YWx1ZT0iJy4kZW5jX2xpbmsu
JyIgLz4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vYmplY3Q+JzsKCQkJ
CX0KCQkJfQoJCQllbHNlaWYoJHR5cGU9PSJwaG90byIpCgkJCXsKCQkJCWlmKCFkZWZpbmVk
KCJJTVBBVEgiKSkgZGVmaW5lKCJJTVBBVEgiLCRwYXRoX3RvX3NpdGUuJy8nLiRpbWdfZGly
LicvJyk7CgkJCQkkZmVlZERlc2NyaXB0aW9uID0gJGZlZWRpdGVtLT5nZXRfY29udGVudCgp
OwoJCQkJJGltYWdlID0gcmV0dXJuSW1hZ2UoJGZlZWREZXNjcmlwdGlvbik7CgkJCQkkaW1h
Z2UgPSB1cmxkZWNvZGUoc2NyYXBlSW1hZ2UoJGltYWdlKSk7CgkJCQkvL0NoZWNrIHRvIHNl
ZSBpZiBpdCBuZWVkcyB0byBiZSBpbXBvcnRlZCBpbnRvIFRYUCBJbWFnZQoJCQkJaWYoJGlt
YWdlKQoJCQkJewoJCQkJCS8vZ2V0IGV4dGVuc2lvbgoJCQkJCSRleHQgPSBzdHJyY2hyKCRp
bWFnZSwgJy4nKTsKCQkJCQkkY2hlY2sgPSBzYWZlX2ZpZWxkKCdJRCcsICd0eHBfaW1hZ2Un
LCAiTkFNRSA9ICciLiRvdXRbJ3RpdGxlJ10uIicgQU5EIERBVEUgPSAkd2hlbiIpOwoJCQkJ
CWlmKCRjaGVjaykKCQkJCQl7CgkJCQkJCSRpbWFnZUlEID0gJGNoZWNrOwoJCQkJCX0KCQkJ
CQllbHNlCgkJCQkJewoJCQkJCQlzYWZlX2luc2VydCgndHhwX2ltYWdlJywKCQkJCQkJCSJu
YW1lID0gJyIuJG91dFsndGl0bGUnXS4iJywKCQkJCQkJCWV4dCA9ICckZXh0JywKCQkJCQkJ
CWRhdGUgPSAkd2hlbiIKCQkJCQkJKTsKCQkJCQkJJGltYWdlSUQgPSBteXNxbF9pbnNlcnRf
aWQoKTsKCQkJCQkJLy8gY3JlYXRlIGEgbmV3IGN1cmwgcmVzb3VyY2UKCQkJCQkJJGNoID0g
Y3VybF9pbml0KCk7CgkJCQkJCS8vIHNldCBVUkwgYW5kIG90aGVyIGFwcHJvcHJpYXRlIG9w
dGlvbnMKCQkJCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgIiRpbWFnZSIpOwoJ
CQkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOwoJ
CQkJCQkvLyBncmFiIFVSTCwgYW5kIHJldHVybiBvdXRwdXQKCQkJCQkJJG91dHB1dCA9IGN1
cmxfZXhlYygkY2gpOwoJCQkJCQkvLyBjbG9zZSBjdXJsIHJlc291cmNlLCBhbmQgZnJlZSB1
cCBzeXN0ZW0gcmVzb3VyY2VzCgkJCQkJCWN1cmxfY2xvc2UoJGNoKTsKCQkJCQkJLy93cml0
ZSB0byBmaWxlCgkJCQkJCSRmaWxlbmFtZSA9IElNUEFUSC5iYXNlbmFtZSgkaW1hZ2UpOwoJ
CQkJCQkkZmggPSBmb3BlbihJTVBBVEguJGltYWdlSUQuJGV4dCwgJ3cnKTsKCQkJCQkJZndy
aXRlKCRmaCwgJG91dHB1dCk7CgkJCQkJCWZjbG9zZSgkZmgpOwoJCQkJCQkkc2hvcnRwYXRo
ID0gYmFzZW5hbWUoJGltYWdlKTsKCQkJCQkJJG1lc3NhZ2UgLj0gIlx0SW1wb3J0ZWQgJGZp
bGVuYW1lXHJcbiI7CgkJCQkJfQoJCQkJfQoJCQkJJG91dFsnYm9keSddID0gJzxhIGhyZWY9
IicuJG91dFsncGVybWFsaW5rJ10uJyI+PGltZyBzcmM9IicuaHUuJGltZ19kaXIuIi8iLiRp
bWFnZUlELiRleHQuJyIgLz48L2E+JzsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCWlmKCFiZWdp
bnNXaXRoKCRmZWVkaXRlbS0+Z2V0X2Rlc2NyaXB0aW9uKCksICI8cCIpKQoJCQkJewoJCQkJ
CSRvdXRbJ2JvZHknXSA9IGRvdGFnKGFkZHNsYXNoZXMoJGZlZWRpdGVtLT5nZXRfZGVzY3Jp
cHRpb24oKSksICdwJyk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJG91dFsnYm9keSdd
ID0gYWRkc2xhc2hlcygkZmVlZGl0ZW0tPmdldF9kZXNjcmlwdGlvbigpKTsKCQkJCX0KCQkJ
fQoKCQkJLy9DaGVjayB0byBzZWUgaWYgdGhlIGFydGljbGUgaGFzIGFscmVhZHkgYmVlbiBp
bXBvcnRlZAoJCQkkZXhpc3RzID0gc2FmZV9jb3VudCgndGV4dHBhdHRlcm4nLCAiVGl0bGUg
PSAnIi4kb3V0Wyd0aXRsZSddLiInIEFORCBQb3N0ZWQ9JHdoZW4iKTsKCgkJCS8vSWYgaXQg
aGFzbid0IHRoZW4gbGV0J3MgYWRkIGl0CgkJCWlmKCRleGlzdHM9PTApewoJCQkJLy9DaGVj
ayB0byBzZWUgaWYgY2F0ZWdvcnkxIGV4aXN0cwoJCQkJaWYoJGNhdGVnb3J5MSAmJiAhZmV0
Y2hfY2F0ZWdvcnlfdGl0bGUoJGNhdGVnb3J5MSkpCgkJCQl7CgkJCQkJLy9DcmVhdGUgbmV3
IGNhdGVnb3J5CgkJCQkJJG5hbWUgPSBzYW5pdGl6ZUZvclVybCgkY2F0ZWdvcnkxKTsKCQkJ
CQkkZXhpc3RzID0gc2FmZV9maWVsZCgnbmFtZScsICd0eHBfY2F0ZWdvcnknLCAibmFtZSA9
ICciLmRvU2xhc2goJG5hbWUpLiInIGFuZCB0eXBlID0gJ2FydGljbGUnIik7CgkJCQkJaWYg
KCEkZXhpc3RzKQoJCQkJCXsKCQkJCQkJJHEgPSBzYWZlX2luc2VydCgndHhwX2NhdGVnb3J5
JywgIm5hbWUgPSAnIi5kb1NsYXNoKCRuYW1lKS4iJywgdGl0bGUgPSAnIi5kb1NsYXNoKCRj
YXRlZ29yeTEpLiInLCB0eXBlID0gJ2FydGljbGUnLCBwYXJlbnQgPSAncm9vdCciKTsKCQkJ
CQkJcmVidWlsZF90cmVlKCdyb290JywgMSwgJ2FydGljbGUnKTsKCQkJCQl9CgkJCQl9CgkJ
CQkvL0NoZWNrIHRvIHNlZSBpZiBjYXRlZ29yeTIgZXhpc3RzCgkJCQlpZigkY2F0ZWdvcnky
ICYmICFmZXRjaF9jYXRlZ29yeV90aXRsZSgkY2F0ZWdvcnkyKSkKCQkJCXsKCQkJCQkvL0Ny
ZWF0ZSBuZXcgY2F0ZWdvcnkKCQkJCQkkbmFtZSA9IHNhbml0aXplRm9yVXJsKCRjYXRlZ29y
eTIpOwoJCQkJCSRleGlzdHMgPSBzYWZlX2ZpZWxkKCduYW1lJywgJ3R4cF9jYXRlZ29yeScs
ICJuYW1lID0gJyIuZG9TbGFzaCgkbmFtZSkuIicgYW5kIHR5cGUgPSAnYXJ0aWNsZSciKTsK
CQkJCQlpZiAoISRleGlzdHMpCgkJCQkJewoJCQkJCQkkcSA9IHNhZmVfaW5zZXJ0KCd0eHBf
Y2F0ZWdvcnknLCAibmFtZSA9ICciLmRvU2xhc2goJG5hbWUpLiInLCB0aXRsZSA9ICciLmRv
U2xhc2goJGNhdGVnb3J5MikuIicsIHR5cGUgPSAnYXJ0aWNsZScsIHBhcmVudCA9ICdyb290
JyIpOwoJCQkJCQlyZWJ1aWxkX3RyZWUoJ3Jvb3QnLCAxLCAnYXJ0aWNsZScpOwoJCQkJCX0K
CQkJCX0KCgkJCQkvL0dldCBjdXN0b20gZmllbGQKCQkJCSRjdXN0b21fcm93ID0gc2FmZV9y
b3coIioiLCAndHhwX3ByZWZzJywgInZhbD0nJGxpbmtmaWVsZCciKTsKCQkJCWlmKCRjdXN0
b21fcm93KQoJCQkJewoJCQkJCSRsaW5rZmllbGQgPSAnY3VzdG9tXycuJGN1c3RvbV9yb3db
J3Bvc2l0aW9uJ107CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJGxpbmtmaWVsZCA9ICJj
dXN0b21fMSI7CgkJCQl9CgkJCQkkcmVzdWx0ID0gc2FmZV9pbnNlcnQoInRleHRwYXR0ZXJu
IiwKCQkJCQkiVGl0bGUgICAgICAgICAgID0gJyIuJG91dFsndGl0bGUnXS4iJywKCQkJCQlC
b2R5ICAgICAgICAgICAgPSAnIi4kb3V0Wydib2R5J10uIicsCgkJCQkJQm9keV9odG1sICAg
ICAgID0gJyIuJG91dFsnYm9keSddLiInLAoJCQkJCUV4Y2VycHQgICAgICAgICA9ICcnLAoJ
CQkJCUV4Y2VycHRfaHRtbCAgICA9ICcnLAoJCQkJCUltYWdlICAgICAgICAgICA9ICciLiRm
YXZpY29uLiInLAoJCQkJCUtleXdvcmRzICAgICAgICA9ICcnLAoJCQkJCVN0YXR1cyAgICAg
ICAgICA9ICA0LAoJCQkJCVBvc3RlZCAgICAgICAgICA9ICAkd2hlbiwKCQkJCQlMYXN0TW9k
ICAgICAgICAgPSAgbm93KCksCgkJCQkJQXV0aG9ySUQgICAgICAgID0gJycsCgkJCQkJU2Vj
dGlvbiAgICAgICAgID0gJyRzZWN0aW9uJywKCQkJCQlDYXRlZ29yeTEgICAgICAgPSAnJGNh
dGVnb3J5MScsCgkJCQkJQ2F0ZWdvcnkyICAgICAgID0gJyRjYXRlZ29yeTInLAoJCQkJCXRl
eHRpbGVfYm9keSAgICA9ICAwLAoJCQkJCXRleHRpbGVfZXhjZXJwdCA9ICAwLAoJCQkJCUFu
bm90YXRlICAgICAgICA9ICAxLAoJCQkJCW92ZXJyaWRlX2Zvcm0gICA9ICckZm9ybScsCgkJ
CQkJdXJsX3RpdGxlICAgICAgID0gJycsCgkJCQkJJGxpbmtmaWVsZCAJCT0gJyIuJG91dFsn
cGVybWFsaW5rJ10uIicsCgkJCQkJQW5ub3RhdGVJbnZpdGUgID0gJ2NvbW1lbnRzJywKCQkJ
CQl1aWQgICAgICAgICAgICAgPSAnIi5tZDUodW5pcWlkKHJhbmQoKSx0cnVlKSkuIicsCgkJ
CQkJZmVlZF90aW1lICAgICAgID0gJHdoZW4iCgkJCQkpOwoKCQkJCWlmKCRyZXN1bHQpCgkJ
CQl7CgkJCQkJLy9kb19waW5ncygpOwoJCQkJCXVwZGF0ZV9sYXN0bW9kKCk7CgkJCQkJJG1l
c3NhZ2UgLj0gIlx0QWRkZWQgLSAiLiRvdXRbJ3RpdGxlJ10uIlxyXG4iOwoJCQkJfQoJCQl9
CgkJCWVsc2UKCQkJewoJCQkJJG1lc3NhZ2UgLj0gIlx0RXhpc3RzIC0gIi4kb3V0Wyd0aXRs
ZSddLiJcclxuIjsKCQkJfQoJCX0KCX0KCWVsc2UgewoJCSRtZXNzYWdlIC49ICJcdCIuJHRo
ZWZlZWQtPmVycm9yOwoJfQoJcmV0dXJuICRtZXNzYWdlOwp9CgovL2hlbHBlciBmdW5jdGlv
bnMKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLwovL0dldCBhbiBpbWFnZQpmdW5jdGlvbiByZXR1cm5JbWFnZSAoJHRl
eHQpIHsKICAgICR0ZXh0ID0gaHRtbF9lbnRpdHlfZGVjb2RlKCR0ZXh0KTsKICAgIC8vZWNo
byAkdGV4dDsKICAgICRwYXR0ZXJuID0gIi88aW1nW14+XStcPi9pIjsKICAgIHByZWdfbWF0
Y2goJHBhdHRlcm4sICR0ZXh0LCAkbWF0Y2hlcyk7CiAgICAkdGV4dCA9ICRtYXRjaGVzWzBd
OwogICAgcmV0dXJuICR0ZXh0Owp9CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v
Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vRmlsdGVyIG91dCBpbWFnZSB1
cmwgb25seQpmdW5jdGlvbiBzY3JhcGVJbWFnZSgkdGV4dCkgewoKICAgICRwYXR0ZXJuID0g
Jy9zcmM9W1wnIl0/KFteXCciID5dKylbXCciID5dLyc7CgpwcmVnX21hdGNoKCRwYXR0ZXJu
LCAkdGV4dCwgJGxpbmspOwoKJGxpbmsgPSAkbGlua1sxXTsKJGxpbmsgPSB1cmxlbmNvZGUo
JGxpbmspOwpyZXR1cm4gJGxpbms7Cgp9CgpmdW5jdGlvbiBiZWdpbnNXaXRoKCRzdHIsICRz
dWIpIHsKICAgIHJldHVybiAoc3RybmNtcCgkc3RyLCAkc3ViLCBzdHJsZW4oJHN1YikpID09
IDApOwoJfSI7czozOiJtZDUiO3M6MzI6IjRkNDRlZWI4ZGIxMWJlM2NiZjA3NjJmZWIyNTBj
ZmEzIjt9
