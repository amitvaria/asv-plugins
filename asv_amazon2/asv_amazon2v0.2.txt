# asv_amazon2 v0.2
# Add Amazon items to your TXP article
# Amit Varia
# http://www.amitvaria.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjQ6Im5hbWUiO3M6MTE6ImFzdl9hbWF6b24yIjtzOjc6InZlcnNpb24iO3M6Mzoi
MC4yIjtzOjY6ImF1dGhvciI7czoxMDoiQW1pdCBWYXJpYSI7czoxMDoiYXV0aG9yX3VyaSI7
czoyNToiaHR0cDovL3d3dy5hbWl0dmFyaWEuY29tLyI7czoxMToiZGVzY3JpcHRpb24iO3M6
MzY6IkFkZCBBbWF6b24gaXRlbXMgdG8geW91ciBUWFAgYXJ0aWNsZSI7czo0OiJ0eXBlIjtp
OjE7czo0OiJoZWxwIjtzOjU3OiIJPGgxPmFzdl9hbWF6b24yPC9oMT4KCgk8cD48ZW0+bW9y
ZSBoZWxwIHRvIGNvbWU8L2VtPjwvcD4iO3M6NDoiY29kZSI7czo5NjE3OiIvLyBhc3ZfYW1h
em9uMgovLyBEZXNpZ25lZCBhcm91bmQgdGhlIG5lZWQgdG8gaW5jbHVkZSBpdGVtcyBmcm9t
IEFtYXpvbiBpbiB5b3VyIHdlYnNpdGUKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgppZignYWRtaW4nID09IEB0eHBp
bnRlcmZhY2UpCnsKCXJlZ2lzdGVyX2NhbGxiYWNrKCdhc3ZfYW1hem9uMicsICdhcnRpY2xl
Jyk7Cn0KCmlmKGdwcygnYXN2X2FtYXpvbjJfYWN0aW9uJykgJiYgZ3BzKCdhc3Zfa2V5d29y
ZHMnKSkKewoJJGFzdl9hbWF6b24gPSBuZXcgYXN2X0FtYXpvbigiVVMiKTsKCWhlYWRlcign
Q29udGVudC1UeXBlOiB0ZXh0L3htbCcpOwoJZWNobyAkYXN2X2FtYXpvbi0+cmVxdWVzdChn
cHMoJ2Fzdl9rZXl3b3JkcycpLCBncHMoJ2Fzdl9zZWFyY2hpbmRleCcpLCBncHMoJ2Fzdl9p
dGVtcGFnZScpKTsKCWV4aXQ7Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZnVuY3Rpb24gYXN2X2FtYXpvbjIg
KCRldmVudCwgJHN0ZXApCnsKCSRhc3Zfc2VhcmNoSW5kZXggPSBhcnJheSgiQXBwYXJlbCIs
ICJCYWJ5IiwgIkJsZW5kZWQiLCAiQm9va3MiLCAiQ2xhc3NpY2FsIiwgIkRWRCIsICJEaWdp
dGFsTXVzaWMiLCAiRWxlY3Ryb25pY3MiLCAiR291cm1ldEZvb2QiLCAiSGVhbHRoUGVyc29u
YWxDYXJlIiwgIkpld2VscnkiLCAiS2l0Y2hlbiIsICJNYWdhemluZXMiLCAiTWVyY2hhbnRz
IiwgIk1pc2NlbGxhbmVvdXMiLCAiTXVzaWMiLCAiTXVzaWNUcmFja3MiLCAiTXVzaWNhbElu
c3RydW1lbnRzIiwgIk9mZmljZVByb2R1Y3RzIiwgIk91dGRvb3JMaXZpbmciLCAiUENIYXJk
d2FyZSIsICJQZXRTdXBwbGllcyIsICJQaG90byIsICJSZXN0YXVyYW50cyIsICJTb2Z0d2Fy
ZSIsICJTcG9ydGluZ0dvb2RzIiwgIlRvb2xzIiwgIlRveXMiLCAiVkhTIiwgIlZpZGVvIiwg
IlZpZGVvR2FtZXMiLCAiV2lyZWxlc3NBY2Nlc3NvcmllcyIpOwoKCSRsaW5lID0gIjxoMyBj
bGFzcz1cInBsYWluXCI+IjsKCgkkbGluZSAuPSAiPGEgaHJlZj1cIiNhc3ZfYW1hem9uMlwi
IG9uY2xpY2s9XCIkKCcjYXN2X2FtYXpvbjJ3cmFwcGVyJykuc2xpZGVUb2dnbGUoJ3Nsb3cn
KTsgcmV0dXJuIGZhbHNlO1wiPkFtYXpvbjI8L2E+IjsKCgkkbGluZSAuPSAiPC9oMz4iOwoK
CSRmb3JtID0gIjxmb3JtIG9uU3VibWl0PVwiYXN2X2xvYWRSZXN1bHRzKCk7IHJldHVybiBm
YWxzZTtcIj48ZmllbGRzZXQ+PGxlZ2VuZD5TZWFyY2g8L2xlZ2VuZD4iLgoKCQlncmFmKCI8
bGFiZWwgZm9yPVwiYXN2X1NlYXJjaEluZGV4XCI+Q2hvb3NlIGEgY2F0ZWdvcnk8L2xhYmVs
PjxiciAvPiIuCgoJCQlzZWxlY3RJbnB1dCgnYXN2X1NlYXJjaEluZGV4JywgJGFzdl9zZWFy
Y2hJbmRleCwgJGFzdl9zZWFyY2hJbmRleCwgdHJ1ZSwnJywnYXN2X1NlYXJjaEluZGV4Jykp
LgoKCQlncmFmKCI8bGFiZWwgZm9yPVwiYXN2X0tleXdvcmRzXCI+S2V5d29yZHM8L2xhYmVs
PjxiciAvPiIuCgoJCQlmSW5wdXQoJ3RleHQnLCAnYXN2X0tleXdvcmRzJywgJycsICdlZGl0
JywgJycsICcnLCAnMjAnLCAgJycsICdhc3ZfS2V5d29yZHMnKSkuCgoJCWZJbnB1dCgnc3Vi
bWl0JywnYXN2X1NlYXJjaCcsJ1NlYXJjaCcsInB1Ymxpc2giLCAnJywgJ2Fzdl9sb2FkUmVz
dWx0cygpO3JldHVybiBmYWxzZTsnLCAnJywgJycpLgoKCQlmSW5wdXQoJ2J1dHRvbicsJ2Fz
dl9DYW5jZWwnLCdDYW5jZWwnLCJwdWJsaXNoIiwgJycsICdhc3ZfY2FuY2VsUmVzdWx0cygp
O3JldHVybiBmYWxzZTsnLCAnJywgJycpLgoKCQkiPC9maWVsZHNldD48L2Zvcm0+IjsKCgkk
bGluZSAuPSAiPGRpdiBpZD1cImFzdl9hbWF6b24yd3JhcHBlclwiIHN0eWxlPVwiZGlzcGxh
eTpub25lXCIgPjxkaXYgaWQ9XCJhc3ZfYW1hem9uMlwiID4kZm9ybTwvZGl2PjxkaXYgaWQ9
XCJhc3ZfYW1hem9uMmZvcm1cIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjwvZGl2PjxkaXYg
aWQ9XCJhc3ZfYW1hem9uMlJlc3VsdHNcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjwvZGl2
PjwvZGl2PiI7CgoJJGxpbmUgPSBhc3Zfc2FmZUpTKCRsaW5lKTsKCgkkZm9ybXMgPSBhcnJh
eSgpOwoKCSRmb3Jtc1swXSA9IGFzdl9zYWZlSlMoJzx0eHA6YXN2X2FtYXpvbjIgYXNpbj0i
W2Fzdl9hbWF6b24yX2FzaW5dIj48dHhwOmFzdl9hbWF6b24yX3RpdGxlIC8+PHR4cDphc3Zf
YW1hem9uMl9pbWFnZVVSTCB1cmw9Ilthc3ZfYW1hem9uMl9pbWdVUkxtXSIgLz48dHhwOmFz
dl9hbWF6b24yX3VybCAvPjwvdHhwOmFzdl9hbWF6b24yPicpOwoKCSRqcyA9IDw8PEVPRgo8
U0NSSVBUIExBTkdVQUdFPSJKYXZhU2NyaXB0IiBTUkM9Ii90ZXh0cGF0dGVybi9qcXVlcnku
anMiPgo8L1NDUklQVD4KPHNjcmlwdCBsYW5ndWFnZT0iamF2YXNjcmlwdCIgdHlwZT0idGV4
dC9qYXZhc2NyaXB0Ij4KPCEtLQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vQXR0YWNoIHRoZSBhbWF6b24yIHBs
dWdpbiB0byB0aGUgcGFnZQoKICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgewoJJCgi
JGxpbmUiKS5pbnNlcnRCZWZvcmUoIiN3cml0ZS1zdGF0dXMiKTsKICAgfSk7CgovLy0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KCmZ1bmN0aW9uIGFzdl9sb2FkUmVzdWx0cygpCnsKCXZhciBrZXl3b3JkcyA9CSQoIiNh
c3ZfS2V5d29yZHMiKS52YWwoKTsKCXZhciBzZWFyY2hpbmRleCA9ICQoIiNhc3ZfU2VhcmNo
SW5kZXggb3B0aW9uW0BzZWxlY3RlZF0iKS50ZXh0KCk7Cglhc3ZfcmVxdWVzdChrZXl3b3Jk
cywgc2VhcmNoaW5kZXgsICcxJyk7Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZnVuY3Rpb24gYXN2X3JlcXVl
c3Qoa2V5d29yZHMsIHNlYXJjaGluZGV4LCBpdGVtcGFnZSl7CgkkKCcjYXN2X2FtYXpvbjJm
b3JtJykuaHRtbCgnPGZpZWxkc2V0PjxsZWdlbmQ+Q2hvb3NlIEZvcm08L2xlZ2VuZD48Zm9y
bT48c2VsZWN0IG5hbWU9ImFtYXpvbkZvcm0iPjxvcHRpb24+ZGVmYXVsdDwvb3B0aW9uPjwv
c2VsZWN0PjwvZm9ybT4nKTsKCSQoJyNhc3ZfYW1hem9uMlJlc3VsdHMnKS5odG1sKCc8Zmll
bGRzZXQ+PGxlZ2VuZD5SZXN1bHRzPC9sZWdlbmQ+PGRpdiBpZD0iYXN2X2FtYXpvbjJSZXN1
bHRzRGF0YSI+PHAgPmxvYWRpbmcuLi48L3A+PC9kaXY+PC9maWVsZHNldD4nKTsKCSQoIiNh
c3ZfYW1hem9uMlJlc3VsdHNEYXRhIikuY3NzKCJwYWRkaW5nIiwgIjBweCAwcHggMTBweCAw
cHgiKTsKCSQoJyNhc3ZfYW1hem9uMmZvcm0nKS5zaG93KCdzbG93Jyk7CgkkKCcjYXN2X2Ft
YXpvbjJSZXN1bHRzJykuc2hvdygnc2xvdycpOwoKCSQuZ2V0KCdpbmRleC5waHAnLAoJIAl7
YXN2X2FtYXpvbjJfYWN0aW9uOiAiMSIsIGFzdl9rZXl3b3JkczogZXNjYXBlKGtleXdvcmRz
KSwgYXN2X3NlYXJjaGluZGV4OiBlc2NhcGUoc2VhcmNoaW5kZXgpLCBhc3ZfaXRlbXBhZ2U6
IGl0ZW1wYWdlIH0sCgkgICBhc3ZfcGFyc2VSZXNwb25zZSwKCSAgICJ4bWwiCgkgKTsKfQoK
Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tCgpmdW5jdGlvbiBhc3ZfcGFyc2VSZXNwb25zZSh4bWwpCnsKCXZhciBpdGVt
UGFnZSA9ICQoJ0l0ZW1QYWdlJywgeG1sKS50ZXh0KCk7Cgl2YXIgc2VhcmNoaW5kZXggPSAk
KCdTZWFyY2hJbmRleCcsIHhtbCkudGV4dCgpOwoJdmFyIHRvdGFsUGFnZXMgPSAkKCdUb3Rh
bFBhZ2VzJywgeG1sKS50ZXh0KCk7Cgl2YXIga2V5d29yZHMgPSAkKCdLZXl3b3JkcycsIHht
bCkudGV4dCgpOwoJdmFyIGxpbmUgPSIiOwoKCWxpbmUgKz0gYXN2X3ByZXZuZXh0X2xpbmso
a2V5d29yZHMsIHNlYXJjaGluZGV4LCBpdGVtUGFnZSwgdG90YWxQYWdlcywgInRvcCIpOwoK
CSQoeG1sKS5maW5kKCdJdGVtJykuZWFjaChmdW5jdGlvbigpewoJCXZhciB0aXRsZSA9ICQo
J1RpdGxlJyx0aGlzKS50ZXh0KCk7CgkJdmFyIHNJbWFnZVVSTCA9ICQoIlNtYWxsSW1hZ2Ug
PiBVUkwiLHRoaXMpLnRleHQoKTsKCQl2YXIgbUltYWdlVVJMID0gJCgiTWVkaXVtSW1hZ2Ug
PiBVUkwiLHRoaXMpLnRleHQoKTsKCQl2YXIgbEltYWdlVVJMID0gJCgiTGFyZ2VJbWFnZSA+
IFVSTCIsdGhpcykudGV4dCgpOwoJCXZhciB1cmwgPSAkKCdEZXRhaWxQYWdlVVJMJyx0aGlz
KS50ZXh0KCk7CgkJdmFyIGFzaW4gPSAkKCdBU0lOJyx0aGlzKS50ZXh0KCk7CgoKCQl2YXIg
YW1hem9uSFRNTCA9ICc8YSBocmVmPSInK3VybCsnIj48aW1nIHNyYz0iJysgc0ltYWdlVVJM
ICsnIiBzdHlsZT0iZGlzcGxheTogYmxvY2s7bWFyZ2luLWxlZnQ6IGF1dG87bWFyZ2luLXJp
Z2h0OiBhdXRvOyIvPjxzcGFuIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXIiPicgKyB0aXRs
ZSArICc8L3NwYW4+PC9hPicgOwoKCQl2YXIgZm9ybSA9ICc8Zm9ybSBpZD0iYXN2X2FtYXpv
bjJfJythc2luKycgb25zdWJtaXQ9ImFzdl9hbWF6b24yX2FkZHRvQm9keShcJycrYXNpbisn
XCcpIj4nICsKCQkJCQknPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYXN2X2FtYXpvbjJf
dGl0bGUiIHZhbHVlPSInK3RpdGxlKyciIC8+JyArCgkJCQkJJzxpbnB1dCB0eXBlPSJoaWRk
ZW4iIG5hbWU9ImFzdl9hbWF6b24yX3NJbWFnZVVSTCIgdmFsdWUgPSInK3NJbWFnZVVSTCsn
IiAvPicgKwoJCQkJCSc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJhc3ZfYW1hem9uMl9t
SW1hZ2VVUkwiIHZhbHVlID0iJyttSW1hZ2VVUkwrJyIgLz4nICsKCQkJCQknPGlucHV0IHR5
cGU9ImhpZGRlbiIgbmFtZT0iYXN2X2FtYXpvbjJfbEltYWdlVVJMIiB2YWx1ZSA9IicrbElt
YWdlVVJMKyciIC8+JyArCgkJCQkJJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImFzdl9h
bWF6b24yX3VybCIgdmFsdWUgPSInK3VybCsnIiAvPicgKwoJCQkJCSc8aW5wdXQgdHlwZT0i
aGlkZGVuIiBuYW1lPSJhc3ZfYW1hem9uMl9hc2luIiB2YWx1ZSA9IicrYXNpbisnIiAvPicg
KwoJCQkJCSc8aW5wdXQgdHlwZT0iYnV0dG9uIiBzdHlsZT0iZmxvYXQ6cmlnaHQiIG9uY2xp
Y2s9ImFzdl9hbWF6b24yX2FkZHRvQm9keShcJycrYXNpbisnXCcpIiBjbGFzcz0icHVibGlz
aCIgdmFsdWU9ImFkZCIgLz4nCgkJCQkgICAnPC9mb3JtPic7CgoJCWxpbmUgKz0gJzxwPicg
KyBmb3JtICsgYW1hem9uSFRNTCAgKyAnPC9wPic7CiAgICB9KTsKCglsaW5lICs9IGFzdl9w
cmV2bmV4dF9saW5rKGtleXdvcmRzLCBzZWFyY2hpbmRleCwgaXRlbVBhZ2UsIHRvdGFsUGFn
ZXMsICJib3R0b20iKTsKCiAgICAkKCIjYXN2X2FtYXpvbjJSZXN1bHRzRGF0YSIpLmh0bWwo
bGluZSk7CgkkKCIjYXN2X2FtYXpvbjJSZXN1bHRzRGF0YSIpLmNzcygibWF4LWhlaWdodCIs
ICI1MDBweCIpOwoJJCgiI2Fzdl9hbWF6b24yUmVzdWx0c0RhdGEiKS5jc3MoIm92ZXJmbG93
IiwgImF1dG8iKTsKCSQoIiNhc3ZfYW1hem9uMlJlc3VsdHNEYXRhIikuY3NzKCJwYWRkaW5n
IiwgIjBweCAwcHggMTBweCAwcHgiKTsKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgokLmZuLmFwcGVuZFZhbCA9
IGZ1bmN0aW9uKHR4dCkgewogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpewogICAg
ICAgIHRoaXMudmFsdWUgKz0gdHh0OwogICAgfSk7Cgp9OwoKLy8tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpmdW5jdGlv
biBhc3ZfYW1hem9uMl9hZGR0b0JvZHkoYXNpbikKewoJdmFyIGVsZW0gPSAkKCcjYXN2X2Ft
YXpvbjJfJythc2luKTsKCgl2YXIgdGl0bGUgPSAkKCdpbnB1dDpoaWRkZW5bQG5hbWU9YXN2
X2FtYXpvbjJfdGl0bGVdJykudmFsKCk7Cgl2YXIgc0ltYWdlVVJMID0gJCgnaW5wdXQ6aGlk
ZGVuW0BuYW1lPWFzdl9hbWF6b24yX3NJbWFnZVVSTF0nKS52YWwoKTsKCXZhciBtSW1hZ2VV
UkwgPSAkKCdpbnB1dDpoaWRkZW5bQG5hbWU9YXN2X2FtYXpvbjJfbUltYWdlVVJMXScpLnZh
bCgpOwoJdmFyIGxJbWFnZVVSTCA9ICQoJ2lucHV0OmhpZGRlbltAbmFtZT1hc3ZfYW1hem9u
Ml9sSW1hZ2VVUkxdJykudmFsKCk7Cgl2YXIgdXJsID0gJCgnaW5wdXQ6aGlkZGVuW0BuYW1l
PWFzdl9hbWF6b24yX3NJbWFnZVVSTF0nKS52YWwoKTsKCgl2YXIgbGluZSA9ICcnOwoJbGlu
ZSArPSAiJGZvcm1zWzBdIjsKCWxpbmUgPSBsaW5lLnJlcGxhY2UoJ1thc3ZfYW1hem9uMl9h
c2luXScsIGFzaW4pOwoJbGluZSA9IGxpbmUucmVwbGFjZSgnW2Fzdl9hbWF6b24yX2ltZ1VS
THNdJywgc0ltYWdlVVJMKTsKCWxpbmUgPSBsaW5lLnJlcGxhY2UoJ1thc3ZfYW1hem9uMl9p
bWdVUkxtXScsIG1JbWFnZVVSTCk7CglsaW5lID0gbGluZS5yZXBsYWNlKCdbYXN2X2FtYXpv
bjJfaW1nVVJMbF0nLCBsSW1hZ2VVUkwpOwoJbGluZSA9IGxpbmUucmVwbGFjZSgnW2Fzdl9h
bWF6b24yX3VybF0nLCB1cmwpOwoKCSQoJyNib2R5JykuYXBwZW5kVmFsKCdcXG4nICsgbGlu
ZSk7CgoKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCi8vQWRkIHRoZSBBbWF6b24gaW5mb3JtYXRpb24gdG8gdGhl
IGJvZHkgb2YgdGhlIGFydGljbGUKCmZ1bmN0aW9uIGFzdl9vbkNsaWNrKGVsZW0pCnsKCSQo
JyNib2R5JykuYXBwZW5kKCIgYSIpOwp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmZ1bmN0aW9uIGFzdl9jYW5j
ZWxSZXN1bHRzKCkKewoJJCgnI2Fzdl9hbWF6b24yUmVzdWx0cycpLmhpZGUoJ3Nsb3cnKTsK
CSQoJyNhc3ZfYW1hem9uMmZvcm0nKS5oaWRlKCdzbG93Jyk7Cn0KCi8vLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZnVu
Y3Rpb24gYXN2X3ByZXZuZXh0X2xpbmsoa2V5d29yZHMsIHNlYXJjaGluZGV4LCBpdGVtUGFn
ZSwgdG90YWxQYWdlcywgbG9jKQp7CglsaW5lID0gJyc7CgoJaWYocGFyc2VJbnQodG90YWxQ
YWdlcyk+MSkKCXsKCQlpZihsb2M9PSJib3R0b20iKSBsaW5lKz0nPGhyIC8+JzsKCgkJbGlu
ZSs9JzxwIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7Ij4nOwoKCQlpdGVtUGFnZSA9IHBh
cnNlSW50KGl0ZW1QYWdlKTsKCgkJdmFyIHRleHQgPSAnJzsKCgkJaWYoaXRlbVBhZ2U+MSkK
CQl7CgkJCXZhciBwSXRlbVBhZ2UgPSBpdGVtUGFnZSAtIDE7CgoJCQlsaW5lICs9ICc8YSBo
cmVmPSIjIiBvbmNsaWNrPSJhc3ZfcmVxdWVzdChcJycra2V5d29yZHMgKyAnXCcsXCcnICsg
c2VhcmNoaW5kZXggKyAnXCcsXCcnKyBwSXRlbVBhZ2UrJ1wnKTtyZXR1cm4gZmFsc2U7Ij5w
cmV2aW91czwvYT4gfCAnOwoKCQl9CgkJaWYoaXRlbVBhZ2U8dG90YWxQYWdlcykKCQl7CgkJ
CXZhciBuSXRlbVBhZ2UgPSBpdGVtUGFnZSArIDE7CgoJCQlsaW5lICs9ICc8YSBocmVmPSIj
IiBvbmNsaWNrPSJhc3ZfcmVxdWVzdChcJycra2V5d29yZHMgKyAnXCcsXCcnICsgc2VhcmNo
aW5kZXggKyAnXCcsXCcnKyBuSXRlbVBhZ2UrJ1wnKTtyZXR1cm4gZmFsc2U7Ij5uZXh0PC9h
Pic7CgoJCX0KCgkJbGluZSs9JzwvcD4nOwoKCQlpZihsb2M9PSJ0b3AiKSBsaW5lKz0nPGhy
IC8+JzsKCX0KCglyZXR1cm4gbGluZTsKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyAtLT4KPC9zY3JpcHQ+
CkVPRjsKCWVjaG8gJGpzOwp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmZ1bmN0aW9uIGFzdl9zYWZlSlMoJGxp
bmUpCnsKCXJldHVybiBzdHJfcmVwbGFjZSgiXG4iLCAiIiwgYWRkc2xhc2hlcygkbGluZSkp
Owp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KCmNsYXNzIGFzdl9BbWF6b24KewoJdmFyICRhcGlfa2V5ID0gIjBZ
OEYxWVYxTjJZU0dKMU1DMjAyIjsKCXZhciAkY29udGVudFR5cGUgPSAidGV4dCUyRnhtbCI7
Cgl2YXIgJG9wZXJhdGlvbiA9ICJJdGVtU2VhcmNoIjsKCXZhciAkc2VydmljZSA9ICJBV1NF
Q29tbWVyY2VTZXJ2aWNlIjsKCXZhciAkYmFzZVVSTCA9ICJodHRwOi8vZWNzLmFtYXpvbmF3
cy5jb20vb25jYS94bWw/IjsKCXZhciAkc2VhcmNoSW5kZXggPSAiQmxlbmRlZCI7Cgl2YXIg
JHJlc3BvbnNlR3JvdXAgPSAiSW1hZ2VzLFNtYWxsIjsKCXZhciAkdmVyc2lvbiA9ICIyMDA1
LTAzLTIzIjsKCXZhciAkbG9jYWxlOwoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCWZ1bmN0aW9uIGFzdl9BbWF6
b24oJGxvY2FsZSkKCXsKCQkkdGhpcy0+JGxvY2FsZSA9ICRsb2NhbGU7Cgl9CgoJLy8tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tCgoJZnVuY3Rpb24gcmVxdWVzdCgka2V5d29yZHMsICRzZWFyY2hpbmRleCwgJGl0ZW1Q
YWdlID0gIjEiKQoJewoJCSR1cmwgPSAkdGhpcy0+YnVpbGRVUkwoZG9TbGFzaCgka2V5d29y
ZHMpLCBkb1NsYXNoKCRzZWFyY2hpbmRleCksIGRvU2xhc2goJGl0ZW1QYWdlKSk7CgoJCS8v
IGNyZWF0ZSBhIG5ldyBjdXJsIHJlc291cmNlCgkJJGNoID0gY3VybF9pbml0KCk7CgoJCS8v
IHNldCBVUkwgYW5kIG90aGVyIGFwcHJvcHJpYXRlIG9wdGlvbnMKCQljdXJsX3NldG9wdCgk
Y2gsIENVUkxPUFRfVVJMLCAkdXJsKTsKCgkJLy8gZ3JhYiBVUkwgYW5kIHBhc3MgaXQgdG8g
dGhlIGJyb3dzZXIKCQljdXJsX2V4ZWMoJGNoKTsKCgkJLy8gY2xvc2UgY3VybCByZXNvdXJj
ZSwgYW5kIGZyZWUgdXAgc3lzdGVtIHJlc291cmNlcwoJCWN1cmxfY2xvc2UoJGNoKTsKCX0K
CgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0KCglmdW5jdGlvbiBidWlsZFVSTCAvKiBwcml2YXRlICovKCRrZXl3b3Jk
cywgJHNlYXJjaGluZGV4LCAkaXRlbVBhZ2UgPSAiMSIpCgl7CgkJJHVybCA9ICR0aGlzLT5i
YXNlVVJMLgoJCQkJIlNlcnZpY2U9Ii4kdGhpcy0+c2VydmljZS4KCQkJCSImT3BlcmF0aW9u
PSIuJHRoaXMtPm9wZXJhdGlvbi4KCQkJCSImU3Vic2NyaXB0aW9uSWQ9Ii4kdGhpcy0+YXBp
X2tleS4KCQkJCSImU2VhcmNoSW5kZXg9Ii4kc2VhcmNoaW5kZXguCgkJCQkiJktleXdvcmRz
PSIuJGtleXdvcmRzLgoJCQkJIiZSZXNwb25zZUdyb3VwPSIuJHRoaXMtPnJlc3BvbnNlR3Jv
dXAuCgkJCQkiJkl0ZW1QYWdlPSIuJGl0ZW1QYWdlLiImVmVyc2lvbj0iLiR0aGlzLT52ZXJz
aW9uOwoKCQlyZXR1cm4gJHVybDsKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KfQoKLy8tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiI7czoz
OiJtZDUiO3M6MzI6IjQzYzcwMTFiNDVjOWUwZjAwYTBkYTM0ZmI5ZTNhMGJhIjt9
